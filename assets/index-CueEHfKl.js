(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const x={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return dn(this.context.count)},getNextContextId(){return dn(this.context.count++)}};function dn(e){const t=String(e),n=t.length-1;return x.context.id+(n?String.fromCharCode(96+n):"")+t}function Ue(e){x.context=e}const vr=!1,wr=(e,t)=>e===t,ne=Symbol("solid-proxy"),Tn=typeof Proxy=="function",ze=Symbol("solid-track"),at={equals:wr};let In=Rn;const re=1,qe=2,Ln={owned:null,cleanups:null,context:null,owner:null},kt={};var E=null;let _=null,$r=null,j=null,V=null,B=null,mt=0;function ue(e,t){const n=j,r=E,s=e.length===0,i=t===void 0?r:t,a=s?Ln:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=s?e:()=>e(()=>I(()=>fe(a)));E=a,j=null;try{return W(l,!0)}finally{j=n,E=r}}function L(e,t){t=t?Object.assign({},at,t):at;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=s=>(typeof s=="function"&&(_&&_.running&&_.sources.has(n)?s=s(n.tValue):s=s(n.value)),Dn(n,s));return[Nn.bind(n),r]}function hn(e,t,n){const r=pt(e,t,!0,re);De(r)}function N(e,t,n){const r=pt(e,t,!1,re);De(r)}function Tt(e,t,n){In=Pr;const r=pt(e,t,!1,re),s=ve&&Ne(ve);s&&(r.suspense=s),r.user=!0,B?B.push(r):De(r)}function P(e,t,n){n=n?Object.assign({},at,n):at;const r=pt(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,De(r),Nn.bind(r)}function _r(e){return e&&typeof e=="object"&&"then"in e}function gn(e,t,n){let r,s,i;r=!0,s=e,i={};let a=null,l=kt,o=null,c=!1,f=!1,u="initialValue"in i,h=typeof r=="function"&&P(r);const m=new Set,[d,g]=(i.storage||L)(i.initialValue),[p,v]=L(void 0),[y,k]=L(void 0,{equals:!1}),[C,T]=L(u?"ready":"unresolved");x.context&&(o=x.getNextContextId(),i.ssrLoadFrom==="initial"?l=i.initialValue:x.load&&x.has(o)&&(l=x.load(o)));function M(D,R,G,A){return a===D&&(a=null,A!==void 0&&(u=!0),(D===l||R===l)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(A,{value:R})),l=kt,_&&D&&c?(_.promises.delete(D),c=!1,W(()=>{_.running=!0,ce(R,G)},!1)):ce(R,G)),R}function ce(D,R){W(()=>{R===void 0&&g(()=>D),T(R!==void 0?"errored":u?"ready":"unresolved"),v(R);for(const G of m.keys())G.decrement();m.clear()},!1)}function me(){const D=ve&&Ne(ve),R=d(),G=p();if(G!==void 0&&!a)throw G;return j&&!j.user&&D&&hn(()=>{y(),a&&(D.resolved&&_&&c?_.promises.add(a):m.has(D)||(D.increment(),m.add(D)))}),R}function _e(D=!0){if(D!==!1&&f)return;f=!1;const R=h?h():r;if(c=_&&_.running,R==null||R===!1){M(a,I(d));return}_&&a&&_.promises.delete(a);let G;const A=l!==kt?l:I(()=>{try{return s(R,{value:d(),refetching:D})}catch(O){G=O}});if(G!==void 0){M(a,void 0,st(G),R);return}else if(!_r(A))return M(a,A,void 0,R),A;return a=A,"v"in A?(A.s===1?M(a,A.v,void 0,R):M(a,void 0,st(A.v),R),A):(f=!0,queueMicrotask(()=>f=!1),W(()=>{T(u?"refreshing":"pending"),k()},!1),A.then(O=>M(A,O,void 0,R),O=>M(A,void 0,st(O),R)))}Object.defineProperties(me,{state:{get:()=>C()},error:{get:()=>p()},loading:{get(){const D=C();return D==="pending"||D==="refreshing"}},latest:{get(){if(!u)return me();const D=p();if(D&&!a)throw D;return d()}}});let et=E;return h?hn(()=>(et=E,_e(!1))):_e(!1),[me,{refetch:D=>Yt(et,()=>_e(D)),mutate:g}]}function ae(e){return W(e,!1)}function I(e){if(j===null)return e();const t=j;j=null;try{return e()}finally{j=t}}function Xt(e,t,n){const r=Array.isArray(e);let s,i=n&&n.defer;return a=>{let l;if(r){l=Array(e.length);for(let c=0;c<e.length;c++)l[c]=e[c]()}else l=e();if(i)return i=!1,a;const o=I(()=>t(l,s,a));return s=l,o}}function kr(e){Tt(()=>I(e))}function ge(e){return E===null||(E.cleanups===null?E.cleanups=[e]:E.cleanups.push(e)),e}function lt(){return j}function Ye(){return E}function Yt(e,t){const n=E,r=j;E=e,j=null;try{return W(t,!0)}catch(s){Qt(s)}finally{E=n,j=r}}function Ve(e){if(_&&_.running)return e(),_.done;const t=j,n=E;return Promise.resolve().then(()=>{j=t,E=n;let r;return ve&&(r=_||(_={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),r.done||(r.done=new Promise(s=>r.resolve=s)),r.running=!0),W(e,!1),j=E=null,r?r.done:void 0})}const[El,mn]=L(!1);function xr(e){B.push.apply(B,e),e.length=0}function Ze(e,t){const n=Symbol("context");return{id:n,Provider:Er(n),defaultValue:e}}function Ne(e){let t;return E&&E.context&&(t=E.context[e.id])!==void 0?t:e.defaultValue}function Zt(e){const t=P(e),n=P(()=>It(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let ve;function Ar(){return ve||(ve=Ze())}function Nn(){const e=_&&_.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===re)De(this);else{const t=V;V=null,W(()=>ct(this),!1),V=t}if(j){const t=this.observers?this.observers.length:0;j.sources?(j.sources.push(this),j.sourceSlots.push(t)):(j.sources=[this],j.sourceSlots=[t]),this.observers?(this.observers.push(j),this.observerSlots.push(j.sources.length-1)):(this.observers=[j],this.observerSlots=[j.sources.length-1])}return e&&_.sources.has(this)?this.tValue:this.value}function Dn(e,t,n){let r=_&&_.running&&_.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,t)){if(_){const s=_.running;(s||!n&&_.sources.has(e))&&(_.sources.add(e),e.tValue=t),s||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&W(()=>{for(let s=0;s<e.observers.length;s+=1){const i=e.observers[s],a=_&&_.running;a&&_.disposed.has(i)||((a?!i.tState:!i.state)&&(i.pure?V.push(i):B.push(i),i.observers&&Mn(i)),a?i.tState=re:i.state=re)}if(V.length>1e6)throw V=[],new Error},!1)}return t}function De(e){if(!e.fn)return;fe(e);const t=mt;pn(e,_&&_.running&&_.sources.has(e)?e.tValue:e.value,t),_&&!_.running&&_.sources.has(e)&&queueMicrotask(()=>{W(()=>{_&&(_.running=!0),j=E=e,pn(e,e.tValue,t),j=E=null},!1)})}function pn(e,t,n){let r;const s=E,i=j;j=E=e;try{r=e.fn(t)}catch(a){return e.pure&&(_&&_.running?(e.tState=re,e.tOwned&&e.tOwned.forEach(fe),e.tOwned=void 0):(e.state=re,e.owned&&e.owned.forEach(fe),e.owned=null)),e.updatedAt=n+1,Qt(a)}finally{j=i,E=s}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Dn(e,r,!0):_&&_.running&&e.pure?(_.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=n)}function pt(e,t,n,r=re,s){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:E,context:E?E.context:null,pure:n};return _&&_.running&&(i.state=0,i.tState=r),E===null||E!==Ln&&(_&&_.running&&E.pure?E.tOwned?E.tOwned.push(i):E.tOwned=[i]:E.owned?E.owned.push(i):E.owned=[i]),i}function ot(e){const t=_&&_.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===qe)return ct(e);if(e.suspense&&I(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<mt);){if(t&&_.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let r=n.length-1;r>=0;r--){if(e=n[r],t){let s=e,i=n[r+1];for(;(s=s.owner)&&s!==i;)if(_.disposed.has(s))return}if((t?e.tState:e.state)===re)De(e);else if((t?e.tState:e.state)===qe){const s=V;V=null,W(()=>ct(e,n[0]),!1),V=s}}}function W(e,t){if(V)return e();let n=!1;t||(V=[]),B?n=!0:B=[],mt++;try{const r=e();return Cr(n),r}catch(r){n||(B=null),V=null,Qt(r)}}function Cr(e){if(V&&(Rn(V),V=null),e)return;let t;if(_){if(!_.promises.size&&!_.queue.size){const r=_.sources,s=_.disposed;B.push.apply(B,_.effects),t=_.resolve;for(const i of B)"tState"in i&&(i.state=i.tState),delete i.tState;_=null,W(()=>{for(const i of s)fe(i);for(const i of r){if(i.value=i.tValue,i.owned)for(let a=0,l=i.owned.length;a<l;a++)fe(i.owned[a]);i.tOwned&&(i.owned=i.tOwned),delete i.tValue,delete i.tOwned,i.tState=0}mn(!1)},!1)}else if(_.running){_.running=!1,_.effects.push.apply(_.effects,B),B=null,mn(!0);return}}const n=B;B=null,n.length&&W(()=>In(n),!1),t&&t()}function Rn(e){for(let t=0;t<e.length;t++)ot(e[t])}function Pr(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:ot(r)}if(x.context){if(x.count){x.effects||(x.effects=[]),x.effects.push(...e.slice(0,n));return}Ue()}for(x.effects&&(x.done||!x.count)&&(e=[...x.effects,...e],n+=x.effects.length,delete x.effects),t=0;t<n;t++)ot(e[t])}function ct(e,t){const n=_&&_.running;n?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const i=n?s.tState:s.state;i===re?s!==t&&(!s.updatedAt||s.updatedAt<mt)&&ot(s):i===qe&&ct(s,t)}}}function Mn(e){const t=_&&_.running;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(t?!r.tState:!r.state)&&(t?r.tState=qe:r.state=qe,r.pure?V.push(r):B.push(r),r.observers&&Mn(r))}}function fe(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),a=n.observerSlots.pop();r<s.length&&(i.sourceSlots[a]=r,s[r]=i,n.observerSlots[r]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)fe(e.tOwned[t]);delete e.tOwned}if(_&&_.running&&e.pure)Un(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)fe(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}_&&_.running?e.tState=0:e.state=0}function Un(e,t){if(t||(e.tState=0,_.disposed.add(e)),e.owned)for(let n=0;n<e.owned.length;n++)Un(e.owned[n])}function st(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Qt(e,t=E){throw st(e)}function It(e){if(typeof e=="function"&&!e.length)return It(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=It(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Er(e,t){return function(r){let s;return N(()=>s=I(()=>(E.context={...E.context,[e]:r.value},Zt(()=>r.children))),void 0),s}}const Lt=Symbol("fallback");function ut(e){for(let t=0;t<e.length;t++)e[t]()}function Sr(e,t,n={}){let r=[],s=[],i=[],a=0,l=t.length>1?[]:null;return ge(()=>ut(i)),()=>{let o=e()||[],c=o.length,f,u;return o[ze],I(()=>{let m,d,g,p,v,y,k,C,T;if(c===0)a!==0&&(ut(i),i=[],r=[],s=[],a=0,l&&(l=[])),n.fallback&&(r=[Lt],s[0]=ue(M=>(i[0]=M,n.fallback())),a=1);else if(a===0){for(s=new Array(c),u=0;u<c;u++)r[u]=o[u],s[u]=ue(h);a=c}else{for(g=new Array(c),p=new Array(c),l&&(v=new Array(c)),y=0,k=Math.min(a,c);y<k&&r[y]===o[y];y++);for(k=a-1,C=c-1;k>=y&&C>=y&&r[k]===o[C];k--,C--)g[C]=s[k],p[C]=i[k],l&&(v[C]=l[k]);for(m=new Map,d=new Array(C+1),u=C;u>=y;u--)T=o[u],f=m.get(T),d[u]=f===void 0?-1:f,m.set(T,u);for(f=y;f<=k;f++)T=r[f],u=m.get(T),u!==void 0&&u!==-1?(g[u]=s[f],p[u]=i[f],l&&(v[u]=l[f]),u=d[u],m.set(T,u)):i[f]();for(u=y;u<c;u++)u in g?(s[u]=g[u],i[u]=p[u],l&&(l[u]=v[u],l[u](u))):s[u]=ue(h);s=s.slice(0,a=c),r=o.slice(0)}return s});function h(m){if(i[u]=m,l){const[d,g]=L(u);return l[u]=g,t(o[u],d)}return t(o[u])}}}function Or(e,t,n={}){let r=[],s=[],i=[],a=[],l=0,o;return ge(()=>ut(i)),()=>{const c=e()||[],f=c.length;return c[ze],I(()=>{if(f===0)return l!==0&&(ut(i),i=[],r=[],s=[],l=0,a=[]),n.fallback&&(r=[Lt],s[0]=ue(h=>(i[0]=h,n.fallback())),l=1),s;for(r[0]===Lt&&(i[0](),i=[],r=[],s=[],l=0),o=0;o<f;o++)o<r.length&&r[o]!==c[o]?a[o](()=>c[o]):o>=r.length&&(s[o]=ue(u));for(;o<r.length;o++)i[o]();return l=a.length=i.length=f,r=c.slice(0),s=s.slice(0,l)});function u(h){i[o]=h;const[m,d]=L(c[o]);return a[o]=d,t(m,o)}}}function b(e,t){return I(()=>e(t||{}))}function nt(){return!0}const Nt={get(e,t,n){return t===ne?n:e.get(t)},has(e,t){return t===ne?!0:e.has(t)},set:nt,deleteProperty:nt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:nt,deleteProperty:nt}},ownKeys(e){return e.keys()}};function xt(e){return(e=typeof e=="function"?e():e)?e:{}}function jr(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function J(...e){let t=!1;for(let a=0;a<e.length;a++){const l=e[a];t=t||!!l&&ne in l,e[a]=typeof l=="function"?(t=!0,P(l)):l}if(Tn&&t)return new Proxy({get(a){for(let l=e.length-1;l>=0;l--){const o=xt(e[l])[a];if(o!==void 0)return o}},has(a){for(let l=e.length-1;l>=0;l--)if(a in xt(e[l]))return!0;return!1},keys(){const a=[];for(let l=0;l<e.length;l++)a.push(...Object.keys(xt(e[l])));return[...new Set(a)]}},Nt);const n={},r=Object.create(null);for(let a=e.length-1;a>=0;a--){const l=e[a];if(!l)continue;const o=Object.getOwnPropertyNames(l);for(let c=o.length-1;c>=0;c--){const f=o[c];if(f==="__proto__"||f==="constructor")continue;const u=Object.getOwnPropertyDescriptor(l,f);if(!r[f])r[f]=u.get?{enumerable:!0,configurable:!0,get:jr.bind(n[f]=[u.get.bind(l)])}:u.value!==void 0?u:void 0;else{const h=n[f];h&&(u.get?h.push(u.get.bind(l)):u.value!==void 0&&h.push(()=>u.value))}}}const s={},i=Object.keys(r);for(let a=i.length-1;a>=0;a--){const l=i[a],o=r[l];o&&o.get?Object.defineProperty(s,l,o):s[l]=o?o.value:void 0}return s}function Bn(e,...t){if(Tn&&ne in e){const s=new Set(t.length>1?t.flat():t[0]),i=t.map(a=>new Proxy({get(l){return a.includes(l)?e[l]:void 0},has(l){return a.includes(l)&&l in e},keys(){return a.filter(l=>l in e)}},Nt));return i.push(new Proxy({get(a){return s.has(a)?void 0:e[a]},has(a){return s.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!s.has(a))}},Nt)),i}const n={},r=t.map(()=>({}));for(const s of Object.getOwnPropertyNames(e)){const i=Object.getOwnPropertyDescriptor(e,s),a=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let l=!1,o=0;for(const c of t)c.includes(s)&&(l=!0,a?r[o][s]=i.value:Object.defineProperty(r[o],s,i)),++o;l||(a?n[s]=i.value:Object.defineProperty(n,s,i))}return[...r,n]}let Tr=0;function yt(){return x.context?x.getNextContextId():`cl-${Tr++}`}const Ir=e=>`Stale read from <${e}>.`;function de(e){const t="fallback"in e&&{fallback:()=>e.fallback};return P(Sr(()=>e.each,e.children,t||void 0))}function Lr(e){const t="fallback"in e&&{fallback:()=>e.fallback};return P(Or(()=>e.each,e.children,t||void 0))}function S(e){const t=e.keyed,n=P(()=>e.when,void 0,void 0),r=t?n:P(n,void 0,{equals:(s,i)=>!s==!i});return P(()=>{const s=r();if(s){const i=e.children;return typeof i=="function"&&i.length>0?I(()=>i(t?s:()=>{if(!I(r))throw Ir("Show");return n()})):i}return e.fallback},void 0,void 0)}const Nr=Ze();function yn(e){let t=0,n,r,s,i,a;const[l,o]=L(!1),c=Ar(),f={increment:()=>{++t===1&&o(!0)},decrement:()=>{--t===0&&o(!1)},inFallback:l,effects:[],resolved:!1},u=Ye();if(x.context&&x.load){const d=x.getContextId();let g=x.load(d);if(g&&(typeof g!="object"||g.s!==1?s=g:x.gather(d)),s&&s!=="$$f"){const[p,v]=L(void 0,{equals:!1});i=p,s.then(()=>{if(x.done)return v();x.gather(d),Ue(r),v(),Ue()},y=>{a=y,v()})}}const h=Ne(Nr);h&&(n=h.register(f.inFallback));let m;return ge(()=>m&&m()),b(c.Provider,{value:f,get children(){return P(()=>{if(a)throw a;if(r=x.context,i)return i(),i=void 0;r&&s==="$$f"&&Ue();const d=P(()=>e.children);return P(g=>{const p=f.inFallback(),{showContent:v=!0,showFallback:y=!0}=n?n():{};if((!p||s&&s!=="$$f")&&v)return f.resolved=!0,m&&m(),m=r=s=void 0,xr(f.effects),d();if(y)return m?g:ue(k=>(m=k,r&&(Ue({id:r.id+"F",count:0}),r=void 0),e.fallback),u)})})}})}const Dr=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Rr=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Dr]),Mr=new Set(["innerHTML","textContent","innerText","children"]),Ur=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Br=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Vr(e,t){const n=Br[e];return typeof n=="object"?n[t]?n.$:void 0:n}const Kr=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Gr=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),zr={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},q=e=>P(()=>e());function qr(e,t,n){let r=n.length,s=t.length,i=r,a=0,l=0,o=t[s-1].nextSibling,c=null;for(;a<s||l<i;){if(t[a]===n[l]){a++,l++;continue}for(;t[s-1]===n[i-1];)s--,i--;if(s===a){const f=i<r?l?n[l-1].nextSibling:n[i-l]:o;for(;l<i;)e.insertBefore(n[l++],f)}else if(i===l)for(;a<s;)(!c||!c.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[i-1]&&n[l]===t[s-1]){const f=t[--s].nextSibling;e.insertBefore(n[l++],t[a++].nextSibling),e.insertBefore(n[--i],f),t[s]=n[i]}else{if(!c){c=new Map;let u=l;for(;u<i;)c.set(n[u],u++)}const f=c.get(t[a]);if(f!=null)if(l<f&&f<i){let u=a,h=1,m;for(;++u<s&&u<i&&!((m=c.get(t[u]))==null||m!==f+h);)h++;if(h>f-l){const d=t[a];for(;l<f;)e.insertBefore(n[l++],d)}else e.replaceChild(n[l++],t[a++])}else a++;else t[a++].remove()}}}const bn="_$DX_DELEGATE";function Hr(e,t,n,r={}){let s;return ue(i=>{s=i,t===document?e():w(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{s(),t.textContent=""}}function $(e,t,n,r){let s;const i=()=>{const l=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return l.innerHTML=e,n?l.content.firstChild.firstChild:r?l.firstChild:l.content.firstChild},a=t?()=>I(()=>document.importNode(s||(s=i()),!0)):()=>(s||(s=i())).cloneNode(!0);return a.cloneNode=a,a}function le(e,t=window.document){const n=t[bn]||(t[bn]=new Set);for(let r=0,s=e.length;r<s;r++){const i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,ts))}}function K(e,t,n){we(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function Wr(e,t,n,r){we(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function Jr(e,t,n){we(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function Vn(e,t){we(e)||(t==null?e.removeAttribute("class"):e.className=t)}function Kn(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const s=n[0];e.addEventListener(t,n[0]=i=>s.call(e,n[1],i))}else e.addEventListener(t,n,typeof n!="function"&&n)}function Xr(e,t,n={}){const r=Object.keys(t||{}),s=Object.keys(n);let i,a;for(i=0,a=s.length;i<a;i++){const l=s[i];!l||l==="undefined"||t[l]||(vn(e,l,!1),delete n[l])}for(i=0,a=r.length;i<a;i++){const l=r[i],o=!!t[l];!l||l==="undefined"||n[l]===o||!o||(vn(e,l,!0),n[l]=o)}return n}function Yr(e,t,n){if(!t)return n?K(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let s,i;for(i in n)t[i]==null&&r.removeProperty(i),delete n[i];for(i in t)s=t[i],s!==n[i]&&(r.setProperty(i,s),n[i]=s);return n}function Zr(e,t,n){e.style.setProperty(t,n)}function X(e,t={},n,r){const s={};return r||N(()=>s.children=He(e,t.children,s.children)),N(()=>typeof t.ref=="function"&&Ft(t.ref,e)),N(()=>Qr(e,t,n,!0,s,!0)),s}function Ft(e,t,n){return I(()=>e(t,n))}function w(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return He(e,t,r,n);N(s=>He(e,t(),s,n),r)}function Qr(e,t,n,r,s={},i=!1){t||(t={});for(const a in s)if(!(a in t)){if(a==="children")continue;s[a]=wn(e,a,null,s[a],n,i,t)}for(const a in t){if(a==="children")continue;const l=t[a];s[a]=wn(e,a,l,s[a],n,i,t)}}function Fr(e){let t,n;return!we()||!(t=x.registry.get(n=ns()))?e():(x.completed&&x.completed.add(t),x.registry.delete(n),t)}function we(e){return!!x.context&&!x.done&&(!e||e.isConnected)}function es(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function vn(e,t,n){const r=t.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)e.classList.toggle(r[s],n)}function wn(e,t,n,r,s,i,a){let l,o,c,f,u;if(t==="style")return Yr(e,n,r);if(t==="classList")return Xr(e,n,r);if(n===r)return r;if(t==="ref")i||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);r&&e.removeEventListener(h,r,typeof r!="function"&&r),n&&e.addEventListener(h,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);r&&e.removeEventListener(h,r,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),m=Kr.has(h);if(!m&&r){const d=Array.isArray(r)?r[0]:r;e.removeEventListener(h,d)}(m||n)&&(Kn(e,h,n,m),m&&le([h]))}else if(t.slice(0,5)==="attr:")K(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")Jr(e,t.slice(5),n);else if((u=t.slice(0,5)==="prop:")||(c=Mr.has(t))||!s&&((f=Vr(t,e.tagName))||(o=Rr.has(t)))||(l=e.nodeName.includes("-")||"is"in a)){if(u)t=t.slice(5),o=!0;else if(we(e))return n;t==="class"||t==="className"?Vn(e,n):l&&!o&&!c?e[es(t)]=n:e[f||t]=n}else{const h=s&&t.indexOf(":")>-1&&zr[t.split(":")[0]];h?Wr(e,h,t,n):K(e,Ur[t]||t,n)}return n}function ts(e){if(x.registry&&x.events&&x.events.find(([o,c])=>c===e))return;let t=e.target;const n=`$$${e.type}`,r=e.target,s=e.currentTarget,i=o=>Object.defineProperty(e,"target",{configurable:!0,value:o}),a=()=>{const o=t[n];if(o&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?o.call(t,c,e):o.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},l=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),x.registry&&!x.done&&(x.done=_$HY.done=!0),e.composedPath){const o=e.composedPath();i(o[0]);for(let c=0;c<o.length-2&&(t=o[c],!!a());c++){if(t._$host){t=t._$host,l();break}if(t.parentNode===s)break}}else l();i(r)}function He(e,t,n,r,s){const i=we(e);if(i){!n&&(n=[...e.childNodes]);let o=[];for(let c=0;c<n.length;c++){const f=n[c];f.nodeType===8&&f.data.slice(0,2)==="!$"?f.remove():o.push(f)}n=o}for(;typeof n=="function";)n=n();if(t===n)return n;const a=typeof t,l=r!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,a==="string"||a==="number"){if(i||a==="number"&&(t=t.toString(),t===n))return n;if(l){let o=n[0];o&&o.nodeType===3?o.data!==t&&(o.data=t):o=document.createTextNode(t),n=Ae(e,n,r,o)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||a==="boolean"){if(i)return n;n=Ae(e,n,r)}else{if(a==="function")return N(()=>{let o=t();for(;typeof o=="function";)o=o();n=He(e,o,n,r)}),()=>n;if(Array.isArray(t)){const o=[],c=n&&Array.isArray(n);if(Dt(o,t,n,s))return N(()=>n=He(e,o,n,r,!0)),()=>n;if(i){if(!o.length)return n;if(r===void 0)return n=[...e.childNodes];let f=o[0];if(f.parentNode!==e)return n;const u=[f];for(;(f=f.nextSibling)!==r;)u.push(f);return n=u}if(o.length===0){if(n=Ae(e,n,r),l)return n}else c?n.length===0?$n(e,o,r):qr(e,n,o):(n&&Ae(e),$n(e,o));n=o}else if(t.nodeType){if(i&&t.parentNode)return n=l?[t]:t;if(Array.isArray(n)){if(l)return n=Ae(e,n,r,t);Ae(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Dt(e,t,n,r){let s=!1;for(let i=0,a=t.length;i<a;i++){let l=t[i],o=n&&n[e.length],c;if(!(l==null||l===!0||l===!1))if((c=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))s=Dt(e,l,o)||s;else if(c==="function")if(r){for(;typeof l=="function";)l=l();s=Dt(e,Array.isArray(l)?l:[l],Array.isArray(o)?o:[o])||s}else e.push(l),s=!0;else{const f=String(l);o&&o.nodeType===3&&o.data===f?e.push(o):e.push(document.createTextNode(f))}}return s}function $n(e,t,n=null){for(let r=0,s=t.length;r<s;r++)e.insertBefore(t[r],n)}function Ae(e,t,n,r){if(n===void 0)return e.textContent="";const s=r||document.createTextNode("");if(t.length){let i=!1;for(let a=t.length-1;a>=0;a--){const l=t[a];if(s!==l){const o=l.parentNode===e;!i&&!a?o?e.replaceChild(s,l):e.insertBefore(s,n):o&&l.remove()}else i=!0}}else e.insertBefore(s,n);return[s]}function ns(){return x.getNextContextId()}const Gn=!1,rs="http://www.w3.org/2000/svg";function ss(e,t=!1,n=void 0){return t?document.createElementNS(rs,e):document.createElement(e,{is:n})}function is(e,t){const n=P(e);return P(()=>{const r=n();switch(typeof r){case"function":return I(()=>r(t));case"string":const s=Gr.has(r),i=x.context?Fr():ss(r,s,I(()=>t.is));return X(i,t,s),i}})}function as(e){const[,t]=Bn(e,["component"]);return is(()=>e.component,t)}function ls(e){return{collections:e,parseCollection(t,n){const r=e[t];if(!r)throw new Error(`Unknown collection: ${String(t)}`);return r.parse(n)},getSchema(t){return e[t]?.schema},getCollections(){return Object.keys(e)}}}let At;function en(e){return{lang:e?.lang??At?.lang,message:e?.message,abortEarly:e?.abortEarly??At?.abortEarly,abortPipeEarly:e?.abortPipeEarly??At?.abortPipeEarly}}let os;function cs(e){return os?.get(e)}let us;function fs(e){return us?.get(e)}let ds;function hs(e,t){return ds?.get(e)?.get(t)}function zn(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function se(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=s?.expected??e.expects??null,l=s?.received??zn(i),o={kind:e.kind,type:e.type,input:i,expected:a,received:l,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:s?.path,issues:s?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",f=s?.message??e.message??hs(e.reference,o.lang)??(c?fs(o.lang):null)??r.message??cs(o.lang);f!==void 0&&(o.message=typeof f=="function"?f(o):f),c&&(n.typed=!1),n.issues?n.issues.push(o):n.issues=[o]}function $e(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},en())}}}function gs(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}const ms=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u;function qn(e){return{kind:"validation",type:"iso_date",reference:qn,async:!1,expects:null,requirement:ms,message:e,"~run"(t,n){return t.typed&&!this.requirement.test(t.value)&&se(this,"date",t,n),t}}}function Rt(e,t){return{kind:"validation",type:"max_length",reference:Rt,async:!1,expects:`<=${e}`,requirement:e,message:t,"~run"(n,r){return n.typed&&n.value.length>this.requirement&&se(this,"length",n,r,{received:`${n.value.length}`}),n}}}function H(e){return{kind:"metadata",type:"metadata",reference:H,metadata:e}}function Mt(e,t){return{kind:"validation",type:"min_length",reference:Mt,async:!1,expects:`>=${e}`,requirement:e,message:t,"~run"(n,r){return n.typed&&n.value.length<this.requirement&&se(this,"length",n,r,{received:`${n.value.length}`}),n}}}function Hn(e,t){return{kind:"validation",type:"regex",reference:Hn,async:!1,expects:`${e}`,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement.test(n.value)&&se(this,"format",n,r),n}}}function ps(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function tn(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Ut(e,t){return{kind:"schema",type:"array",reference:Ut,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return $e(this)},"~run"(n,r){const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let i=0;i<s.length;i++){const a=s[i],l=this.item["~run"]({value:a},r);if(l.issues){const o={type:"array",origin:"value",input:s,key:i,value:a};for(const c of l.issues)c.path?c.path.unshift(o):c.path=[o],n.issues?.push(c);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value.push(l.value)}}else se(this,"type",n,r);return n}}}function Wn(e){return{kind:"schema",type:"boolean",reference:Wn,expects:"boolean",async:!1,message:e,get"~standard"(){return $e(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:se(this,"type",t,n),t}}}function pe(e,t){return{kind:"schema",type:"object",reference:pe,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return $e(this)},"~run"(n,r){const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const l=i in s?s[i]:tn(a),o=a["~run"]({value:l},r);if(o.issues){const c={type:"object",origin:"value",input:s,key:i,value:l};for(const f of o.issues)f.path?f.path.unshift(c):f.path=[c],n.issues?.push(f);if(n.issues||(n.issues=o.issues),r.abortEarly){n.typed=!1;break}}o.typed||(n.typed=!1),n.value[i]=o.value}else if(a.fallback!==void 0)n.value[i]=ps(a);else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(se(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}}else se(this,"type",n,r);return n}}}function ye(e,t){return{kind:"schema",type:"optional",reference:ye,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return $e(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=tn(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Jn(e,t){return{kind:"schema",type:"picklist",reference:Jn,expects:gs(e.map(zn),"|"),async:!1,options:e,message:t,get"~standard"(){return $e(this)},"~run"(n,r){return this.options.includes(n.value)?n.typed=!0:se(this,"type",n,r),n}}}function te(e){return{kind:"schema",type:"string",reference:te,expects:"string",async:!1,message:e,get"~standard"(){return $e(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:se(this,"type",t,n),t}}}function Z(...e){return{...e[0],pipe:e,get"~standard"(){return $e(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function Bt(e,t,n){const r=e["~run"]({value:t},en(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}async function ys(e,t,n){const r=await e["~run"]({value:t},en(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}function Q(e){return{"~plasticine":e}}function Ce(e){const t=Z(te(),H(Q({ui:"text",label:e?.label,placeholder:e?.placeholder})));return e?.minLength!==void 0&&e?.maxLength!==void 0?Z(te(),Mt(e.minLength),Rt(e.maxLength),H(Q({ui:"text",label:e?.label,placeholder:e?.placeholder}))):e?.minLength!==void 0?Z(te(),Mt(e.minLength),H(Q({ui:"text",label:e?.label,placeholder:e?.placeholder}))):e?.maxLength!==void 0?Z(te(),Rt(e.maxLength),H(Q({ui:"text",label:e?.label,placeholder:e?.placeholder}))):t}function bs(e){return Z(te(),H(Q({ui:"textarea",label:e?.label,placeholder:e?.placeholder})))}function Ct(e){return Z(te(),H(Q({ui:"markdown",label:e?.label,placeholder:e?.placeholder})))}function vs(e){return Z(Wn(),H(Q({ui:"boolean",label:e?.label,description:e?.description})))}function ws(e){return Z(te(),qn(),H(Q({ui:"date",label:e?.label})))}function rt(e){return Z(te(),Hn(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Must be a valid slug (lowercase, hyphens only)"),H(Q({ui:"slug",label:e?.label,placeholder:e?.placeholder||"my-slug"})))}function Pt(e){return Z(te(),H(Q({ui:"image",label:e?.label,accept:e?.accept||"image/*",path:e?.path})))}function $s(e,t){return Z(Jn(e),H(Q({ui:"select",label:t?.label,options:e})))}function _s(e,t){return Z(te(),H(Q({ui:"reference",label:t?.label,collection:e})))}class Xn extends Error{issues;constructor(t){super("Schema validation failed across all versions"),this.issues=t}}function Et(e){return{schema:e,parse(t){const n=Bt(e,t);if(n.success)return n.output;throw new Xn([[n.issues[0],...n.issues.slice(1)]])},version(t,n){return Yn([{schema:e,transform:n}],t)}}}function Yn(e,t){return{schema:t,parse(n){const r=Bt(t,n);if(r.success)return r.output;const s=[];let i=!1;for(const a of e){const l=Bt(a.schema,n);if(s.push({...a,...l}),l.success){i=!0;break}}if(i)return s.toReversed().reduce((a,{transform:l})=>l(a),n);throw new Xn(s.map(({issues:a})=>a).filter(a=>a!==void 0))},version(n,r){return Yn([{schema:t,transform:r},...e],n)}}}function nn(e){return"entries"in e&&typeof e.entries=="object"?e.entries:"wrapped"in e&&e.wrapped?nn(e.wrapped):null}function Re(e){if("pipe"in e&&Array.isArray(e.pipe)){for(const t of e.pipe)if(t&&typeof t=="object"&&"type"in t&&t.type==="metadata"){const n=t.metadata;return n&&typeof n=="object"&&"~plasticine"in n?n["~plasticine"]:n||{}}}return"wrapped"in e&&e.wrapped?Re(e.wrapped):{}}function ks(e,t){const n=e.getCollections(),r={};for(const s of n){const i={async list(){return t.listItems(s)},async get(a){const l=await t.getItem(s,a);return e.parseCollection(s,l)},async getAll(){const a=await t.listItems(s);return await Promise.all(a.map(async o=>{const c=await t.getItem(s,o),f=e.parseCollection(s,c);return{id:o,data:f}}))},async has(a){return t.hasItem(s,a)}};r[s]=i}return r}function xs(e){const{owner:t,repo:n,branch:r="main",contentPath:s="content"}=e,i=`https://raw.githubusercontent.com/${t}/${n}/${r}/${s}`,a=`https://api.github.com/repos/${t}/${n}/contents/${s}`;return{async listItems(l){const o=await fetch(`${a}/${l}?ref=${r}`,{headers:{Accept:"application/vnd.github.v3+json"}});if(!o.ok){if(o.status===404)return[];throw new Error(`Failed to list items: ${o.statusText}`)}return(await o.json()).filter(f=>f.type==="file"&&f.name.endsWith(".json")).map(f=>f.name.replace(/\.json$/,""))},async getItem(l,o){const c=await fetch(`${i}/${l}/${o}.json`);if(!c.ok)throw new Error(`Failed to get item ${l}/${o}: ${c.statusText}`);return c.json()},async hasItem(l,o){return(await fetch(`${i}/${l}/${o}.json`,{method:"HEAD"})).ok}}}function As(e,t){return ks(e,xs(t))}const Pe="https://api.github.com";class Cs{token;config;constructor(t,n){this.token=t,this.config={branch:"main",contentPath:"content",...n}}get headers(){return{Accept:"application/vnd.github+json",Authorization:`Bearer ${this.token}`,"X-GitHub-Api-Version":"2022-11-28"}}buildPath(t,n){const r=[this.config.contentPath,t];return n&&r.push(n),r.filter(Boolean).join("/")}async listCollection(t){return this.listFolder(this.buildPath(t))}async listFolder(t,n=!1){const r=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${t}?ref=${this.config.branch}`,s=await fetch(r,{headers:this.headers});if(s.status===404)return[];if(!s.ok)throw new Error(`Failed to list folder: ${s.statusText}`);const i=await s.json(),a=Array.isArray(i)?i:[];if(n){const l=a.filter(o=>o.type==="dir");for(const o of l){const c=await this.listFolder(o.path,!0);a.push(...c)}}return a}async getFile(t,n){const r=this.buildPath(t,n),s=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${r}?ref=${this.config.branch}`,i=await fetch(s,{headers:this.headers});if(!i.ok)throw new Error(`Failed to get file: ${i.statusText}`);return i.json()}async getJSON(t,n){const r=await this.getFile(t,n),s=atob(r.content);return{data:JSON.parse(s),sha:r.sha}}async saveFile(t,n,r,s,i){const a=this.buildPath(t,n),l=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${a}`,o=3;let c=i,f=null;for(let u=0;u<o;u++){if(u>0&&(await new Promise(g=>setTimeout(g,1e3*u)),c))try{c=(await this.getFile(t,n)).sha}catch{c=void 0}const h={message:s,content:btoa(r),branch:this.config.branch};c&&(h.sha=c);const m=await fetch(l,{method:"PUT",headers:this.headers,body:JSON.stringify(h)});if(m.ok)return{sha:(await m.json()).content.sha};const d=await m.json();if(m.status===409&&u<o-1){f=new Error(d.message||m.statusText);continue}throw new Error(`Failed to save file: ${d.message||m.statusText}`)}throw f||new Error("Failed to save file after retries")}async saveJSON(t,n,r,s,i){const a=JSON.stringify(r,null,2);return this.saveFile(t,n,a,s,i)}async uploadFile(t,n="uploads"){const r=Date.now(),s=t.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`${r}-${s}`,a=`${this.config.contentPath}/${n}/${i}`,l=await this.fileToBase64(t),o=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${a}`,c=3;let f=null;for(let u=0;u<c;u++){u>0&&await new Promise(d=>setTimeout(d,1e3*u));const h=await fetch(o,{method:"PUT",headers:this.headers,body:JSON.stringify({message:`cms: Upload ${t.name}`,content:l,branch:this.config.branch})});if(h.ok){const d=await h.json();return{url:`https://raw.githubusercontent.com/${this.config.owner}/${this.config.repo}/${this.config.branch}/${a}`,sha:d.content.sha}}const m=await h.json();if(h.status===409&&u<c-1){f=new Error(m.message||h.statusText);continue}throw new Error(`Failed to upload file: ${m.message||h.statusText}`)}throw f||new Error("Failed to upload file after retries")}fileToBase64(t){return new Promise((n,r)=>{const s=new FileReader;s.onload=()=>{const a=s.result.split(",")[1];n(a)},s.onerror=r,s.readAsDataURL(t)})}async deleteFile(t,n,r,s){const i=this.buildPath(t,n);await this.deleteFileByPath(i,r,s)}async deleteFileByPath(t,n,r){const s=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${t}`,i=await fetch(s,{method:"DELETE",headers:this.headers,body:JSON.stringify({message:n,sha:r,branch:this.config.branch})});if(!i.ok){const a=await i.json();throw new Error(`Failed to delete file: ${a.message||i.statusText}`)}}async ensureContentDirectory(){const t=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${this.config.contentPath}?ref=${this.config.branch}`;(await fetch(t,{headers:this.headers})).status===404&&await this.saveFile("",".gitkeep","","Initialize content directory")}}function Ps(e){function t(n){const r=new Cs(n.token,n),s=n.branch||"main",i=n.contentPath||"content";return{content:{async listCollection(c){const f=await r.listCollection(c),u=[];for(const h of f)if(h.type==="file"&&h.name.endsWith(".json"))try{const{data:m,sha:d}=await r.getJSON(c,h.name);u.push({id:h.name.replace(".json",""),sha:d,data:m})}catch(m){console.error(`Failed to load ${h.name}:`,m)}return u},async getItem(c,f){const{data:u,sha:h}=await r.getJSON(c,`${f}.json`);return{id:f,sha:h,data:u}},async saveItem(c,f,u,h){const m=`${f}.json`,d=h?`cms: Update ${c}/${m}`:`cms: Create ${c}/${m}`;return r.saveJSON(c,m,u,d,h)},async deleteItem(c,f,u){const h=`${f}.json`,m=`cms: Delete ${c}/${h}`;await r.deleteFile(c,h,m,u)}},media:{async listMedia(){const c=`${i}/uploads`;return(await r.listFolder(c,!0)).filter(u=>u.type==="file").map(u=>({name:u.name,path:u.path,sha:u.sha,size:u.size,url:`https://raw.githubusercontent.com/${n.owner}/${n.repo}/${s}/${u.path}`}))},async uploadFile(c,f){const u=f?`uploads/${f}`:"uploads";return r.uploadFile(c,u)},async deleteFile(c,f){await r.deleteFileByPath(c,`cms: Delete media ${c}`,f)}},config:{async readFile(c){const f=`https://api.github.com/repos/${n.owner}/${n.repo}/contents/${c}?ref=${s}`,u=await fetch(f,{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${n.token}`}});if(!u.ok)throw new Error(`Failed to read file: ${u.statusText}`);const h=await u.json();return{content:atob(h.content),sha:h.sha}},async writeFile(c,f,u){const h=`https://api.github.com/repos/${n.owner}/${n.repo}/contents/${c}`,m=await fetch(h,{method:"PUT",headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${n.token}`},body:JSON.stringify({message:`cms: Update ${c}`,content:btoa(f),branch:s,...u?{sha:u}:{}})});if(!m.ok){const g=await m.json();throw new Error(`Failed to write file: ${g.message||m.statusText}`)}return{sha:(await m.json()).content.sha}}}}}return{config:e,createBackend:n=>t({...e,token:n})}}var Es=$("<div class=auth-error>"),Ss=$('<div class=auth><div class=auth-container><h1 class=auth-title>Plasticine CMS</h1><p class=auth-subtitle>Git-based content management</p><form class=token-form><p class=token-instructions>Create a <a href="https://github.com/settings/tokens/new?scopes=repo&amp;description=Plasticine%20CMS"target=_blank rel="noopener noreferrer">Personal Access Token</a> with <code>repo</code> scope.</p><input type=password class=input placeholder=ghp_xxxxxxxxxxxx><button type=submit class="btn btn-primary">');const Os="https://api.github.com",St="plasticine_token";async function _n(e){const t=await fetch(`${Os}/user`,{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${e}`,"X-GitHub-Api-Version":"2022-11-28"}});if(!t.ok)throw new Error("Invalid token or API error");return t.json()}function js(e){const t={get:()=>localStorage.getItem(St),set:n=>localStorage.setItem(St,n),remove:()=>localStorage.removeItem(St)};return{async checkAuth(){const n=t.get();if(!n)return null;try{return{user:await _n(n),token:n}}catch{return t.remove(),null}},async logout(){t.remove()},LoginScreen(n){const[r,s]=L(""),[i,a]=L(!1),[l,o]=L(null),c=async f=>{f.preventDefault();const u=r().trim();if(u){a(!0),o(null);try{const h=await _n(u);t.set(u),n.onSuccess({user:h,token:u})}catch(h){o(h instanceof Error?h.message:"Authentication failed")}finally{a(!1)}}};return(()=>{var f=Ss(),u=f.firstChild,h=u.firstChild,m=h.nextSibling,d=m.nextSibling,g=d.firstChild,p=g.nextSibling,v=p.nextSibling;return w(u,b(S,{get when(){return l()},get children(){var y=Es();return w(y,l),y}}),d),d.addEventListener("submit",c),p.$$input=y=>s(y.currentTarget.value),w(v,()=>i()?"Verifying...":"Login"),N(y=>{var k=i(),C=i()||!r().trim();return k!==y.e&&(p.disabled=y.e=k),C!==y.t&&(v.disabled=y.t=C),y},{e:void 0,t:void 0}),N(()=>p.value=r()),f})()}}}le(["input"]);function Zn(){let e=new Set;function t(s){return e.add(s),()=>e.delete(s)}let n=!1;function r(s,i){if(n)return!(n=!1);const a={to:s,options:i,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const l of e)l.listener({...a,from:l.location,retry:o=>{o&&(n=!0),l.navigate(s,{...i,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}let Vt;function rn(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Vt=window.history.state._depth}rn();function Ts(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Is(e,t){let n=!1;return()=>{const r=Vt;rn();const s=r==null?null:Vt-r;if(n){n=!1;return}s&&t(s)?(n=!0,window.history.go(-s)):e()}}const Ls=/^(?:[a-z0-9]+:)?\/\//i,Ns=/^\/+|(\/)\/+$/g,sn="http://sr";function Ke(e,t=!1){const n=e.replace(Ns,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function it(e,t,n){if(Ls.test(t))return;const r=Ke(e),s=n&&Ke(n);let i="";return!s||t.startsWith("/")?i=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+s:i=s,(i||"/")+Ke(t,!i)}function Ds(e,t){if(e==null)throw new Error(t);return e}function Rs(e,t){return Ke(e).replace(/\/*(\*.*)?$/g,"")+Ke(t)}function Qn(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Ms(e,t,n){const[r,s]=e.split("/*",2),i=r.split("/").filter(Boolean),a=i.length;return l=>{const o=l.split("/").filter(Boolean),c=o.length-a;if(c<0||c>0&&s===void 0&&!t)return null;const f={path:a?"":"/",params:{}},u=h=>n===void 0?void 0:n[h];for(let h=0;h<a;h++){const m=i[h],d=m[0]===":",g=d?o[h]:o[h].toLowerCase(),p=d?m.slice(1):m.toLowerCase();if(d&&Ot(g,u(p)))f.params[p]=g;else if(d||!Ot(g,p))return null;f.path+=`/${g}`}if(s){const h=c?o.slice(-c).join("/"):"";if(Ot(h,u(s)))f.params[s]=h;else return null}return f}}function Ot(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Us(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((s,i)=>s+(i.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Fn(e){const t=new Map,n=Ye();return new Proxy({},{get(r,s){return t.has(s)||Yt(n,()=>t.set(s,P(()=>e()[s]))),t.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,s){return s in e()}})}function Bs(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([s,i])=>{i==null||i===""||i instanceof Array&&!i.length?n.delete(s):i instanceof Array?(n.delete(s),i.forEach(a=>{n.append(s,String(a))})):n.set(s,String(i))});const r=n.toString();return r?`?${r}`:""}function er(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const s=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=t[1]),r=r.slice(t[0].length);return er(r).reduce((i,a)=>[...i,...s.map(l=>l+a)],[])}const Vs=100,tr=Ze(),nr=Ze(),bt=()=>Ds(Ne(tr),"<A> and 'use' router primitives can be only used inside a Route."),vt=()=>bt().navigatorFactory(),Ks=()=>bt().location,rr=()=>{const e=Ks(),t=vt(),n=(r,s)=>{const i=I(()=>Bs(e.search,r)+e.hash);t(i,{scroll:!1,resolve:!1,...s})};return[e.query,n]};function Gs(e,t=""){const{component:n,preload:r,load:s,children:i,info:a}=e,l=!i||Array.isArray(i)&&!i.length,o={key:e,component:n,preload:r||s,info:a};return sr(e.path).reduce((c,f)=>{for(const u of er(f)){const h=Rs(t,u);let m=l?h:h.split("/*",1)[0];m=m.split("/").map(d=>d.startsWith(":")||d.startsWith("*")?d:encodeURIComponent(d)).join("/"),c.push({...o,originalPath:f,pattern:m,matcher:Ms(m,!l,e.matchFilters)})}return c},[])}function zs(e,t=0){return{routes:e,score:Us(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let s=e.length-1;s>=0;s--){const i=e[s],a=i.matcher(n);if(!a)return null;r.unshift({...a,route:i})}return r}}}function sr(e){return Array.isArray(e)?e:[e]}function ir(e,t="",n=[],r=[]){const s=sr(e);for(let i=0,a=s.length;i<a;i++){const l=s[i];if(l&&typeof l=="object"){l.hasOwnProperty("path")||(l.path="");const o=Gs(l,t);for(const c of o){n.push(c);const f=Array.isArray(l.children)&&l.children.length===0;if(l.children&&!f)ir(l.children,c.pattern,n,r);else{const u=zs([...n],r.length);r.push(u)}n.pop()}}}return n.length?r:r.sort((i,a)=>a.score-i.score)}function jt(e,t){for(let n=0,r=e.length;n<r;n++){const s=e[n].matcher(t);if(s)return s}return[]}function qs(e,t,n){const r=new URL(sn),s=P(f=>{const u=e();try{return new URL(u,r)}catch{return console.error(`Invalid path ${u}`),f}},r,{equals:(f,u)=>f.href===u.href}),i=P(()=>s().pathname),a=P(()=>s().search,!0),l=P(()=>s().hash),o=()=>"",c=Xt(a,()=>Qn(s()));return{get pathname(){return i()},get search(){return a()},get hash(){return l()},get state(){return t()},get key(){return o()},query:n?n(c):Fn(c)}}let be;function ar(){return be}let je=!1;function Hs(){return je}function kn(e){je=e}function Ws(e,t,n,r={}){const{signal:[s,i],utils:a={}}=e,l=a.parsePath||(A=>A),o=a.renderPath||(A=>A),c=a.beforeLeave||Zn(),f=it("",r.base||"");if(f===void 0)throw new Error(`${f} is not a valid base path`);f&&!s().value&&i({value:f,replace:!0,scroll:!1});const[u,h]=L(!1);let m;const d=(A,O)=>{O.value===g()&&O.state===v()||(m===void 0&&h(!0),be=A,m=O,Ve(()=>{m===O&&(p(m.value),y(m.state),T[1](z=>z.filter(ke=>ke.pending)))}).finally(()=>{m===O&&ae(()=>{be=void 0,A==="navigate"&&R(m),h(!1),m=void 0})}))},[g,p]=L(s().value),[v,y]=L(s().state),k=qs(g,v,a.queryWrapper),C=[],T=L([]),M=P(()=>typeof r.transformUrl=="function"?jt(t(),r.transformUrl(k.pathname)):jt(t(),k.pathname)),ce=()=>{const A=M(),O={};for(let z=0;z<A.length;z++)Object.assign(O,A[z].params);return O},me=a.paramsWrapper?a.paramsWrapper(ce,t):Fn(ce),_e={pattern:f,path:()=>f,outlet:()=>null,resolvePath(A){return it(f,A)}};return N(Xt(s,A=>d("native",A),{defer:!0})),{base:_e,location:k,params:me,isRouting:u,renderPath:o,parsePath:l,navigatorFactory:D,matches:M,beforeLeave:c,preloadRoute:G,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:T};function et(A,O,z){I(()=>{if(typeof O=="number"){O&&(a.go?a.go(O):console.warn("Router integration does not support relative routing"));return}const ke=!O||O[0]==="?",{replace:$t,resolve:xe,scroll:_t,state:Me}={replace:!1,resolve:!ke,scroll:!0,...z},tt=xe?A.resolvePath(O):it(ke&&k.pathname||"",O);if(tt===void 0)throw new Error(`Path '${O}' is not a routable path`);if(C.length>=Vs)throw new Error("Too many redirects");const fn=g();(tt!==fn||Me!==v())&&(Gn||c.confirm(tt,z)&&(C.push({value:fn,replace:$t,scroll:_t,state:v()}),d("navigate",{value:tt,state:Me})))})}function D(A){return A=A||Ne(nr)||_e,(O,z)=>et(A,O,z)}function R(A){const O=C[0];O&&(i({...A,replace:O.replace,scroll:O.scroll}),C.length=0)}function G(A,O){const z=jt(t(),A.pathname),ke=be;be="preload";for(let $t in z){const{route:xe,params:_t}=z[$t];xe.component&&xe.component.preload&&xe.component.preload();const{preload:Me}=xe;je=!0,O&&Me&&Yt(n(),()=>Me({params:_t,location:{pathname:A.pathname,search:A.search,hash:A.hash,query:Qn(A),state:null,key:""},intent:"preload"})),je=!1}be=ke}}function Js(e,t,n,r){const{base:s,location:i,params:a}=e,{pattern:l,component:o,preload:c}=r().route,f=P(()=>r().path);o&&o.preload&&o.preload(),je=!0;const u=c?c({params:a,location:i,intent:be||"initial"}):void 0;return je=!1,{parent:t,pattern:l,path:f,outlet:()=>o?b(o,{params:a,location:i,data:u,get children(){return n()}}):n(),resolvePath(m){return it(s.path(),m,f())}}}const Xs=e=>t=>{const{base:n}=t,r=Zt(()=>t.children),s=P(()=>ir(r(),t.base||""));let i;const a=Ws(e,s,()=>i,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),b(tr.Provider,{value:a,get children(){return b(Ys,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[q(()=>(i=Ye())&&null),b(Zs,{routerState:a,get branches(){return s()}})]}})}})};function Ys(e){const t=e.routerState.location,n=e.routerState.params,r=P(()=>e.preload&&I(()=>{kn(!0),e.preload({params:n,location:t,intent:ar()||"initial"}),kn(!1)}));return b(S,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:s=>b(s,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function Zs(e){const t=[];let n;const r=P(Xt(e.routerState.matches,(s,i,a)=>{let l=i&&s.length===i.length;const o=[];for(let c=0,f=s.length;c<f;c++){const u=i&&i[c],h=s[c];a&&u&&h.route.key===u.route.key?o[c]=a[c]:(l=!1,t[c]&&t[c](),ue(m=>{t[c]=m,o[c]=Js(e.routerState,o[c-1]||e.routerState.base,xn(()=>r()[c+1]),()=>{const d=e.routerState.matches();return d[c]??d[0]})}))}return t.splice(s.length).forEach(c=>c()),a&&l?a:(n=o[0],o)}));return xn(()=>r()&&n)()}const xn=e=>()=>b(S,{get when(){return e()},keyed:!0,children:t=>b(nr.Provider,{value:t,get children(){return t.outlet()}})}),Kt=e=>{const t=Zt(()=>e.children);return J(e,{get children(){return t()}})};function Qs([e,t],n,r){return[e,r?s=>t(r(s)):t]}function Fs(e){let t=!1;const n=s=>typeof s=="string"?{value:s}:s,r=Qs(L(n(e.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!t&&e.set(s),x.registry&&!x.done&&(x.done=!0),s));return e.init&&ge(e.init((s=e.get())=>{t=!0,r[1](n(s)),t=!1})),Xs({signal:r,create:e.create,utils:e.utils})}function ei(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function ti(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const ni="Location",ri=5e3,si=18e4;let We=new Map;setInterval(()=>{const e=Date.now();for(let[t,n]of We.entries())!n[4].count&&e-n[0]>si&&We.delete(t)},3e5);function Qe(){return We}function ii(e,t=!0){return Ve(()=>{const n=Date.now();lr(e,r=>{t&&(r[0]=0),r[4][1](n)})})}function lr(e,t){e&&!Array.isArray(e)&&(e=[e]);for(let n of We.keys())(e===void 0||ai(n,e))&&t(We.get(n))}function Fe(e,t){e.GET&&(e=e.GET);const n=((...r)=>{const s=Qe(),i=ar(),a=Hs(),o=Ye()?vt():void 0,c=Date.now(),f=t+Gt(r);let u=s.get(f),h;if(lt()&&!Gn&&(h=!0,ge(()=>u[4].count--)),u&&u[0]&&(i==="native"||u[4].count||Date.now()-u[0]<ri)){h&&(u[4].count++,u[4][0]()),u[3]==="preload"&&i!=="preload"&&(u[0]=c);let g=u[1];return i!=="preload"&&(g="then"in u[1]?u[1].then(d(!1),d(!0)):d(!1)(u[1]),i==="navigate"&&Ve(()=>u[4][1](u[0]))),a&&"then"in g&&g.catch(()=>{}),g}let m;return x.has&&x.has(f)?(m=x.load(f),delete globalThis._$HY.r[f]):m=e(...r),u?(u[0]=c,u[1]=m,u[3]=i,i==="navigate"&&Ve(()=>u[4][1](u[0]))):(s.set(f,u=[c,m,,i,L(c)]),u[4].count=0),h&&(u[4].count++,u[4][0]()),i!=="preload"&&(m="then"in m?m.then(d(!1),d(!0)):d(!1)(m)),a&&"then"in m&&m.catch(()=>{}),m;function d(g){return async p=>{if(p instanceof Response){const v=p.headers.get(ni);if(v!==null){o&&v.startsWith("/")?Ve(()=>{o(v,{replace:!0})}):window.location.href=v;return}p.customBody&&(p=await p.customBody())}if(g)throw p;return u[2]=p,p}}});return n.keyFor=(...r)=>t+Gt(r),n.key=t,n}Fe.get=e=>Qe().get(e)[2];Fe.set=(e,t)=>{const n=Qe(),r=Date.now();let s=n.get(e);s?(s[0]=r,s[1]=Promise.resolve(t),s[2]=t,s[3]="preload"):(n.set(e,s=[r,Promise.resolve(t),t,"preload",L(r)]),s[4].count=0)};Fe.delete=e=>Qe().delete(e);Fe.clear=()=>Qe().clear();function ai(e,t){for(let n of t)if(n&&e.startsWith(n))return!0;return!1}function Gt(e){return JSON.stringify(e,(t,n)=>li(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function li(e){let t;return e!=null&&typeof e=="object"&&(!(t=Object.getPrototypeOf(e))||t===Object.prototype)}const zt=new Map;function oi(e,t){const n=bt(),r=P(()=>n.submissions[0]().filter(s=>s.url===e.base&&!0));return new Proxy([],{get(s,i){return i===ze?r():i==="pending"?r().some(a=>!a.result):r()[i]},has(s,i){return i in r()}})}function an(e,t){const n=oi(e);return new Proxy({},{get(r,s){return n.length===0&&s==="clear"||s==="retry"?()=>{}:n[n.length-1]?.[s]}})}function ln(e){const t=bt();return(...n)=>e.apply({r:t},n)}function wt(e,t={}){function n(...i){const a=this.r,l=this.f,o=(a.singleFlight&&e.withOptions?e.withOptions({headers:{"X-Single-Flight":"true"}}):e)(...i),[c,f]=L();let u;function h(m){return async d=>{const g=await ui(d,m,a.navigatorFactory());let p=null;if(r.onComplete?.({...u,result:g?.data,error:g?.error,pending:!1,retry(){return p=u.retry()}}),p)return p;if(!g)return u.clear();if(f(g),g.error&&!l)throw g.error;return g.data}}return a.submissions[1](m=>[...m,u={input:i,url:s,get result(){return c()?.data},get error(){return c()?.error},get pending(){return!c()},clear(){a.submissions[1](d=>d.filter(g=>g!==u))},retry(){return f(void 0),e(...i).then(h(),h(!0))}}]),o.then(h(),h(!0))}const r=typeof t=="string"?{name:t}:t,s=e.url||r.name&&`https://action/${r.name}`||`https://action/${ci(e.toString())}`;return n.base=s,or(n,s)}function or(e,t){return e.toString=()=>{if(!t)throw new Error("Client Actions need explicit names if server rendered");return t},e.with=function(...n){const r=function(...i){return e.call(this,...n,...i)};r.base=e.base;const s=new URL(t,sn);return s.searchParams.set("args",Gt(n)),or(r,(s.origin==="https://action"?s.origin:"")+s.pathname+s.search)},e.url=t,zt.set(t,e),Ye()&&ge(()=>zt.delete(t)),e}const ci=e=>e.split("").reduce((t,n)=>(t<<5)-t+n.charCodeAt(0)|0,0);async function ui(e,t,n){let r,s,i,a;if(e instanceof Response){if(e.headers.has("X-Revalidate")&&(i=e.headers.get("X-Revalidate").split(",")),e.customBody&&(r=s=await e.customBody(),e.headers.has("X-Single-Flight")&&(r=r._$value,delete s._$value,a=Object.keys(s))),e.headers.has("Location")){const l=e.headers.get("Location")||"/";l.startsWith("http")?window.location.href=l:n(l)}}else{if(t)return{error:e};r=e}return lr(i,l=>l[0]=0),a&&a.forEach(l=>Fe.set(l,s[l])),await ii(i,!1),r!=null?{data:r}:void 0}function fi(e=!0,t=!1,n="/_server",r){return s=>{const i=s.base.path(),a=s.navigatorFactory(s.base);let l,o;function c(g){return g.namespaceURI==="http://www.w3.org/2000/svg"}function f(g){if(g.defaultPrevented||g.button!==0||g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)return;const p=g.composedPath().find(M=>M instanceof Node&&M.nodeName.toUpperCase()==="A");if(!p||t&&!p.hasAttribute("link"))return;const v=c(p),y=v?p.href.baseVal:p.href;if((v?p.target.baseVal:p.target)||!y&&!p.hasAttribute("state"))return;const C=(p.getAttribute("rel")||"").split(/\s+/);if(p.hasAttribute("download")||C&&C.includes("external"))return;const T=v?new URL(y,document.baseURI):new URL(y);if(!(T.origin!==window.location.origin||i&&T.pathname&&!T.pathname.toLowerCase().startsWith(i.toLowerCase())))return[p,T]}function u(g){const p=f(g);if(!p)return;const[v,y]=p,k=s.parsePath(y.pathname+y.search+y.hash),C=v.getAttribute("state");g.preventDefault(),a(k,{resolve:!1,replace:v.hasAttribute("replace"),scroll:!v.hasAttribute("noscroll"),state:C?JSON.parse(C):void 0})}function h(g){const p=f(g);if(!p)return;const[v,y]=p;r&&(y.pathname=r(y.pathname)),s.preloadRoute(y,v.getAttribute("preload")!=="false")}function m(g){clearTimeout(l);const p=f(g);if(!p)return o=null;const[v,y]=p;o!==v&&(r&&(y.pathname=r(y.pathname)),l=setTimeout(()=>{s.preloadRoute(y,v.getAttribute("preload")!=="false"),o=v},20))}function d(g){if(g.defaultPrevented)return;let p=g.submitter&&g.submitter.hasAttribute("formaction")?g.submitter.getAttribute("formaction"):g.target.getAttribute("action");if(!p)return;if(!p.startsWith("https://action/")){const y=new URL(p,sn);if(p=s.parsePath(y.pathname+y.search),!p.startsWith(n))return}if(g.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const v=zt.get(p);if(v){g.preventDefault();const y=new FormData(g.target,g.submitter);v.call({r:s,f:g.target},g.target.enctype==="multipart/form-data"?y:new URLSearchParams(y))}}le(["click","submit"]),document.addEventListener("click",u),e&&(document.addEventListener("mousemove",m,{passive:!0}),document.addEventListener("focusin",h,{passive:!0}),document.addEventListener("touchstart",h,{passive:!0})),document.addEventListener("submit",d),ge(()=>{document.removeEventListener("click",u),e&&(document.removeEventListener("mousemove",m),document.removeEventListener("focusin",h),document.removeEventListener("touchstart",h)),document.removeEventListener("submit",d)})}}function cr(e){const t=()=>{const r=window.location.pathname.replace(/^\/+/,"/")+window.location.search,s=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:r+window.location.hash,state:s}},n=Zn();return Fs({get:t,set({value:r,replace:s,scroll:i,state:a}){s?window.history.replaceState(Ts(a),"",r):window.history.pushState(a,"",r),ti(decodeURIComponent(window.location.hash.slice(1)),i),rn()},init:r=>ei(window,"popstate",Is(r,s=>{if(s)return!n.confirm(s);{const i=t();return!n.confirm(i.value,{state:i.state})}})),create:fi(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(e)}const ft=Symbol("store-raw"),Se=Symbol("store-node"),ie=Symbol("store-has"),ur=Symbol("store-self");function fr(e){let t=e[ne];if(!t&&(Object.defineProperty(e,ne,{value:t=new Proxy(e,gi)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,i=n.length;s<i;s++){const a=n[s];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}function Te(e){let t;return e!=null&&typeof e=="object"&&(e[ne]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Ie(e,t=new Set){let n,r,s,i;if(n=e!=null&&e[ft])return n;if(!Te(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,l=e.length;a<l;a++)s=e[a],(r=Ie(s,t))!==s&&(e[a]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let o=0,c=a.length;o<c;o++)i=a[o],!l[i].get&&(s=e[i],(r=Ie(s,t))!==s&&(e[i]=r))}return e}function dt(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function Je(e,t,n){if(e[t])return e[t];const[r,s]=L(n,{equals:!1,internal:!0});return r.$=s,e[t]=r}function di(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===ne||t===Se||(delete n.value,delete n.writable,n.get=()=>e[ne][t]),n}function dr(e){lt()&&Je(dt(e,Se),ur)()}function hi(e){return dr(e),Reflect.ownKeys(e)}const gi={get(e,t,n){if(t===ft)return e;if(t===ne)return n;if(t===ze)return dr(e),n;const r=dt(e,Se),s=r[t];let i=s?s():e[t];if(t===Se||t===ie||t==="__proto__")return i;if(!s){const a=Object.getOwnPropertyDescriptor(e,t);lt()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(i=Je(r,t,i)())}return Te(i)?fr(i):i},has(e,t){return t===ft||t===ne||t===ze||t===Se||t===ie||t==="__proto__"?!0:(lt()&&Je(dt(e,ie),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:hi,getOwnPropertyDescriptor:di};function Le(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],i=e.length;n===void 0?(delete e[t],e[ie]&&e[ie][t]&&s!==void 0&&e[ie][t].$()):(e[t]=n,e[ie]&&e[ie][t]&&s===void 0&&e[ie][t].$());let a=dt(e,Se),l;if((l=Je(a,t,s))&&l.$(()=>n),Array.isArray(e)&&e.length!==i){for(let o=e.length;o<i;o++)(l=a[o])&&l.$();(l=Je(a,"length",i))&&l.$(e.length)}(l=a[ur])&&l.$()}function hr(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];Le(e,s,t[s])}}function mi(e,t){if(typeof t=="function"&&(t=t(e)),t=Ie(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const s=t[n];e[n]!==s&&Le(e,n,s)}Le(e,"length",r)}else hr(e,t)}function Be(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const a=typeof r,l=Array.isArray(e);if(Array.isArray(r)){for(let o=0;o<r.length;o++)Be(e,[r[o]].concat(t),n);return}else if(l&&a==="function"){for(let o=0;o<e.length;o++)r(e[o],o)&&Be(e,[o].concat(t),n);return}else if(l&&a==="object"){const{from:o=0,to:c=e.length-1,by:f=1}=r;for(let u=o;u<=c;u+=f)Be(e,[u].concat(t),n);return}else if(t.length>1){Be(e[r],t,[r].concat(n));return}s=e[r],n=[r].concat(n)}let i=t[0];typeof i=="function"&&(i=i(s,n),i===s)||r===void 0&&i==null||(i=Ie(i),r===void 0||Te(s)&&Te(i)&&!Array.isArray(i)?hr(s,i):Le(e,r,i))}function pi(...[e,t]){const n=Ie(e||{}),r=Array.isArray(n),s=fr(n);function i(...a){ae(()=>{r&&a.length===1?mi(n,a[0]):Be(n,a)})}return[s,i]}const ht=new WeakMap,gr={get(e,t){if(t===ft)return e;const n=e[t];let r;return Te(n)?ht.get(n)||(ht.set(n,r=new Proxy(n,gr)),r):n},set(e,t,n){return Le(e,t,Ie(n)),!0},deleteProperty(e,t){return Le(e,t,void 0,!0),!0}};function Y(e){return t=>{if(Te(t)){let n;(n=ht.get(t))||ht.set(t,n=new Proxy(t,gr)),e(n)}return t}}const An=wt(async(e,t)=>(await t.saveSchema(e),{ok:!0}),"saveSchema"),Cn=wt(async(e,t,n,r)=>(await r.saveItem(e,t,n),{ok:!0}),"saveItem"),Pn=wt(async(e,t,n,r)=>(await r.deleteItem(e,t,n),{ok:!0}),"deleteItem");wt(async(e,t,n,r)=>(await r.deleteMedia(e,t,n),{ok:!0}),"deleteMedia");function yi(e){const{config:t,backend:n,auth:r,schemaPath:s="plasticine/config.ts"}=e;let i=null,a;const l=t.getCollections(),[o,c]=pi({authenticated:!1,user:null,authLoading:!1,authError:null,dataLoading:!1,dataError:null,collections:Object.fromEntries(l.map(d=>[d,{items:[],loading:!1,error:null}])),media:{files:[],loading:!1,error:null},schema:{content:"",sha:null,loading:!1,saving:!1,error:null},currentView:"collections",currentCollection:null,currentItem:null}),f=d=>{const g=t.getSchema(d);if(!g)return[];const p=nn(g);return p?Object.entries(p).filter(([v,y])=>{const k=Re(y);return k.ui==="image"||k.ui==="file"}).map(([v])=>v):[]},u=d=>{const g=d.slug??d.id;return typeof g=="string"&&g?g:Date.now().toString()},h=async d=>{if(!i)throw new Error("Not authenticated");if(!t.getSchema(d))throw new Error(`Unknown collection: ${d}`);return(await i.content.listCollection(d)).map(v=>{const y=t.parseCollection(d,v.data);return{...v,filename:`${v.id}.json`,data:y}})},m={async handleAuthSuccess(d){a=d.token,i=n.createBackend(a),c(Y(g=>{g.authenticated=!0,g.user=d.user,g.authLoading=!1})),await m.loadAllData()},async logout(){await r.logout(),i=null,a=void 0,c(Y(d=>{d.authenticated=!1,d.user=null,d.dataLoading=!1,d.dataError=null;for(const g of l)d.collections[g]={items:[],loading:!1,error:null};d.media={files:[],loading:!1,error:null}}))},async loadAllData(){if(!i)throw new Error("Not authenticated");c("dataLoading",!0),c("dataError",null);try{const[d,g]=await Promise.all([Promise.all(l.map(async p=>({name:p,items:await h(p)}))),i.media.listMedia()]);c(Y(p=>{for(const{name:v,items:y}of d)p.collections[v].items=y;p.media.files=g,p.dataLoading=!1}))}catch(d){throw c(Y(g=>{g.dataLoading=!1,g.dataError=d instanceof Error?d.message:"Failed to load data"})),d}},async saveItem(d,g,p){if(!i)throw new Error("Not authenticated");if(!t.getSchema(d))throw new Error(`Unknown collection: ${d}`);const y=t.parseCollection(d,g),k=u(y),{sha:C}=await i.content.saveItem(d,k,y,p);c("collections",d,"items",Y(T=>{const M=T.findIndex(me=>me.id===k),ce={id:k,filename:`${k}.json`,sha:C,data:y};M>=0?T[M]=ce:T.push(ce)}))},async deleteItem(d,g,p){if(!i)throw new Error("Not authenticated");await i.content.deleteItem(d,g,p),c("collections",d,"items",Y(v=>{const y=v.findIndex(k=>k.id===g);y>=0&&v.splice(y,1)}))},async uploadFile(d,g){if(!i)throw new Error("Not authenticated");const{url:p,sha:v}=await i.media.uploadFile(d,g),y=p.split("/").pop()||"";return c("media","files",Y(k=>{k.push({name:y,path:y,sha:v,size:d.size,url:p})})),p},getMediaReferences(d){const g=[];for(const p of l){const v=f(p),y=o.collections[p]?.items||[];for(const k of y)for(const C of v)k.data[C]===d&&g.push({collection:p,id:k.id,field:C})}return g},async deleteMedia(d,g,p){if(!i)throw new Error("Not authenticated");const v=m.getMediaReferences(d);for(const y of v){const k=o.collections[y.collection]?.items.find(T=>T.id===y.id);if(!k)continue;const C={...k.data,[y.field]:void 0};await m.saveItem(y.collection,C,k.sha)}await i.media.deleteFile(g,p),c("media","files",Y(y=>{const k=y.findIndex(C=>C.path===g);k>=0&&y.splice(k,1)}))},async loadSchema(){if(!i)throw new Error("Not authenticated");c("schema","loading",!0),c("schema","error",null);try{const{content:d,sha:g}=await i.config.readFile(s);c(Y(p=>{p.schema.content=d,p.schema.sha=g||null,p.schema.loading=!1}))}catch(d){throw c(Y(g=>{g.schema.loading=!1,g.schema.error=d instanceof Error?d.message:"Failed to load schema"})),d}},async saveSchema(d){if(!i)throw new Error("Not authenticated");c("schema","saving",!0),c("schema","error",null);try{const{sha:g}=await i.config.writeFile(s,d,o.schema.sha||void 0);c(Y(p=>{p.schema.content=d,p.schema.sha=g||null,p.schema.saving=!1}))}catch(g){throw c(Y(p=>{p.schema.saving=!1,p.schema.error=g instanceof Error?g.message:"Failed to save schema"})),g}},setCurrentView(d){c("currentView",d),(d==="media"||d==="schema")&&(c("currentCollection",null),c("currentItem",null)),d==="schema"&&!o.schema.content&&!o.schema.loading&&m.loadSchema()},setCurrentCollection(d){c("currentView","collections"),c("currentCollection",d),c("currentItem",null)},setCurrentItem(d){c("currentItem",d)}};return r.checkAuth().then(d=>{d&&m.handleAuthSuccess(d)}),[o,m]}const mr=Ze();function bi(e){const t=yi({config:e.config,backend:e.backend,auth:e.auth,schemaPath:e.schemaPath});return b(mr.Provider,{value:t,get children(){return[" ",q(()=>e.children)," "]}})}function oe(){const e=Ne(mr);if(!e)throw new Error("useCMS must be used within a CMSProvider");return e}var vi=$("<form>");function U(e){const[t,n]=L(e);return{get value(){return t()},set value(r){n(()=>r)}}}function ee(e,t,n,r,s=!1){if(t.type==="object_with_rest"||t.type==="record"||t.type==="tuple_with_rest"||t.type==="promise")throw new Error(`"${t.type}" schema is not supported`);if(t.type==="lazy")ee(e,t.getter(void 0),n,r);else if(t.type==="exact_optional"||t.type==="nullable"||t.type==="nullish"||t.type==="optional"||t.type==="undefinedable")ee(e,t.wrapped,n===void 0?tn(t):n,r,!0);else if(t.type==="non_nullable"||t.type==="non_nullish"||t.type==="non_optional")ee(e,t.wrapped,n,r);else if(t.type==="intersect"||t.type==="union"||t.type==="variant")for(const i of t.options)ee(e,i,n,r);else{e.schema=t,e.name=JSON.stringify(r);const i=[];if(e.initialElements=i,e.elements=i,e.errors=U(null),e.isTouched=U(!1),e.isDirty=U(!1),t.type==="array"||t.type==="loose_tuple"||t.type==="strict_tuple"||t.type==="tuple"){if(e.kind&&e.kind!=="array")throw new Error(`Store initialized as "${e.kind}" cannot be reinitialized as "array"`);if(e.kind="array",e.kind==="array"){if(e.children??=[],t.type==="array"){if(n)for(let o=0;o<n.length;o++)e.children[o]={},r.push(o),ee(e.children[o],t.item,n[o],r),r.pop()}else for(let o=0;o<t.items;o++)e.children[o]={},r.push(o),ee(e.children[o],t.items[o],n?.[o],r),r.pop();const a=s&&n==null?n:!0;e.initialInput=U(a),e.startInput=U(a),e.input=U(a);const l=e.children.map(yt);e.initialItems=U(l),e.startItems=U(l),e.items=U(l)}}else if(t.type==="loose_object"||t.type==="object"||t.type==="strict_object"){if(e.kind&&e.kind!=="object")throw new Error(`Store initialized as "${e.kind}" cannot be reinitialized as "object"`);if(e.kind="object",e.kind==="object"){e.children??={};for(const l in t.entries)e.children[l]={},r.push(l),ee(e.children[l],t.entries[l],n?.[l],r),r.pop();const a=s&&n==null?n:!0;e.initialInput=U(a),e.startInput=U(a),e.input=U(a)}}else e.kind="value",e.kind==="value"&&(e.initialInput=U(n),e.startInput=U(n),e.input=U(n))}}function gt(e,t){ae(()=>{I(()=>{if(t.elements=e.elements,t.errors.value=e.errors.value,t.startInput.value=e.startInput.value,t.input.value=e.input.value,t.isTouched.value=e.isTouched.value,t.isDirty.value=e.isDirty.value,e.kind==="array"&&t.kind==="array"){const n=e.items.value;t.startItems.value=e.startItems.value,t.items.value=n;let r;for(let s=0;s<n.length;s++)t.children[s]||(r??=JSON.parse(t.name),t.children[s]={},r.push(s),ee(t.children[s],t.schema.item,void 0,r),r.pop()),gt(e.children[s],t.children[s])}else if(e.kind==="object"&&t.kind==="object")for(const n in e.children)gt(e.children[n],t.children[n])})})}function qt(e,t){ae(()=>{if(e.elements=[],e.errors.value=null,e.isTouched.value=!1,e.isDirty.value=!1,e.kind==="array"||e.kind==="object"){const n=t==null?t:!0;if(e.startInput.value=n,e.input.value=n,e.kind==="array")if(t){const r=t.map(yt);e.startItems.value=r,e.items.value=r;for(let s=0;s<t.length;s++)e.children[s]&&qt(e.children[s],t[s])}else e.startItems.value=[],e.items.value=[];else for(const r in e.children)qt(e.children[r],t?.[r])}else e.startInput.value=t,e.input.value=t})}function Xe(e){if(e.kind==="array"){if(e.input.value){const t=[];for(let n=0;n<e.items.value.length;n++)t[n]=Xe(e.children[n]);return t}return e.input.value}if(e.kind==="object"){if(e.input.value){const t={};for(const n in e.children)t[n]=Xe(e.children[n]);return t}return e.input.value}return e.input.value}function wi(e,t){if(e.options&&e.multiple)return[...e.options].filter(n=>n.selected&&!n.disabled).map(n=>n.value);if(e.type==="checkbox"){const n=document.getElementsByName(e.name);return n.length>1?[...n].filter(r=>r.checked).map(r=>r.value):e.checked}return e.type==="radio"?e.checked?e.value:I(()=>Xe(t)):e.type==="file"?e.multiple?[...e.files]:e.files[0]:e.value}function F(e,t){if(e[t].value)return!0;if(e.kind==="array"){for(let n=0;n<e.items.value.length;n++)if(F(e.children[n],t))return!0;return!1}if(e.kind=="object"){for(const n in e.children)if(F(e.children[n],t))return!0;return!1}return!1}function on(e,t){let n=e;for(const r of t)n=n.children[r];return n}function Ht(e,t,n){ae(()=>{if(e.kind==="array"){e[t].value=n;for(let r=0;r<I(()=>e.items.value).length;r++)Ht(e.children[r],t,n)}else if(e.kind=="object")for(const r in e.children)Ht(e.children[r],t,n);else e[t].value=n})}function Wt(e,t){if(e.isTouched.value=!0,e.kind==="array"){const n=t??[],r=e.items.value;if(n.length<r.length)e.items.value=r.slice(0,n.length);else if(n.length>r.length){if(n.length>e.children.length){const s=JSON.parse(e.name);for(let i=e.children.length;i<n.length;i++)e.children[i]={},s.push(i),ee(e.children[i],e.schema.item,n[i],s),s.pop()}e.items.value=[...r,...n.slice(r.length).map(yt)]}for(let s=0;s<n.length;s++)Wt(e.children[s],n[s]);e.input.value=t==null?t:!0,e.isDirty.value=e.startInput.value!==e.input.value||e.startItems.value.length!==r.length}else if(e.kind==="object"){for(const n in e.children)Wt(e.children[n],t?.[n]);e.input.value=t==null?t:!0,e.isDirty.value=e.startInput.value!==e.input.value}else{e.input.value=t;const n=e.startInput.value;e.isDirty.value=n!==t&&(n!=null||t!==""&&!Number.isNaN(t))}}function $i(e,t,n){ae(()=>{I(()=>{let r=e;for(let s=0;s<t.length;s++)r=r.children[t[s]],s<t.length-1&&(r.input.value=!0);Wt(r,n)})})}function Jt(e,t){if(t(e),e.kind==="array")for(let n=0;n<I(()=>e.items.value).length;n++)Jt(e.children[n],t);else if(e.kind==="object")for(const n in e.children)Jt(e.children[n],t)}function _i(e,t){const n={};return ee(n,e.schema,e.initialInput,[]),n.validators=0,n.validate=e.validate??"submit",n.revalidate=e.revalidate??"input",n.parse=t,n.isSubmitting=U(!1),n.isSubmitted=U(!1),n.isValidating=U(!1),n}async function cn(e,t){e.validators++,e.isValidating.value=!0;const n=await e.parse(I(()=>Xe(e)));let r,s;if(n.issues){s={};for(const a of n.issues)if(a.path){const l=[];for(const f of a.path){const u=f.key,h=typeof u,m=f.type;if(h!=="string"&&h!=="number"||m==="map"||m==="set")break;l.push(u)}const o=JSON.stringify(l),c=s[o];c?c.push(a.message):s[o]=[a.message]}else r?r.push(a.message):r=[a.message]}let i=t?.shouldFocus??!1;return ae(()=>{Jt(e,a=>{if(a.name==="[]")a.errors.value=r??null;else{const l=s?.[a.name]??null;a.errors.value=l,i&&l&&(a.elements[0]?.focus(),i=!1)}}),e.validators--,e.isValidating.value=e.validators>0}),n}function Ee(e,t,n){n===(e.validate==="initial"||(e.validate==="submit"?I(()=>e.isSubmitted.value):I(()=>F(t,"errors")))?e.revalidate:e.validate)&&cn(e)}var he="~internal";function ki(e,t){return async n=>{n.preventDefault();const r=e[he];r.isSubmitted.value=!0,r.isSubmitting.value=!0;try{const s=await cn(r,{shouldFocus:!0});s.success&&await t(s.output,n)}catch(s){r.errors.value=[s&&typeof s=="object"&&"message"in s&&typeof s.message=="string"?s.message:"An unknown error has occurred."]}finally{r.isSubmitting.value=!1}}}function xi(e,t){const n=e[he];let r=n;for(let l=0;l<t.path.length;l++)r=r.children[t.path[l]],l<t.path.length-1&&(r.input.value=!0);const s=r,i=I(()=>s.items.value),a=t.at===void 0?i.length:t.at;a>=0&&a<=i.length&&ae(()=>{const l=[...i];l.splice(a,0,yt()),s.items.value=l;for(let o=i.length;o>a;o--)gt(s.children[o-1],s.children[o]);if(s.children[a])qt(s.children[a],t.initialInput);else{const o=JSON.parse(s.name);s.children[a]={},o.push(a),ee(s.children[a],s.schema.item,t.initialInput,o)}s.input.value=!0,s.isTouched.value=!0,s.isDirty.value=!0,Ee(n,s,"input")})}function Ai(e,t){const n=e[he],r=on(n,t.path),s=I(()=>r.items.value);t.at>=0&&t.at<=s.length-1&&ae(()=>{const i=[...s];i.splice(t.at,1),r.items.value=i;for(let a=t.at;a<s.length-1;a++)gt(r.children[a+1],r.children[a]);r.isTouched.value=!0,r.isDirty.value=r.startItems.value.join()!==i.join(),Ee(n,r,"input")})}function Ci(e){const t=_i(e,a=>ys(e.schema,a)),n=P(()=>F(t,"isTouched")),r=P(()=>F(t,"isDirty")),s=P(()=>!F(t,"errors")),i={[he]:t,get isSubmitting(){return t.isSubmitting.value},get isSubmitted(){return t.isSubmitted.value},get isValidating(){return t.isValidating.value},get isTouched(){return n()},get isDirty(){return r()},get isValid(){return s()},get errors(){return t.errors.value}};return e.validate==="initial"&&cn(i[he]),i}function Ge(e){return typeof e=="function"?e():e}function Pi(e,t){const n=P(()=>Ge(t).path),r=P(()=>Ge(e)[he]),s=P(()=>on(r(),n())),i=P(()=>Xe(s())),a=P(()=>F(s(),"isTouched")),l=P(()=>F(s(),"isDirty")),o=P(()=>!F(s(),"errors"));return{get path(){return n()},get input(){return i()},get errors(){return s().errors.value},get isTouched(){return a()},get isDirty(){return l()},get isValid(){return o()},props:{get name(){return s().name},autofocus:!!s().errors.value,ref:c=>{const f=s();f.elements.push(c),ge(()=>{f.elements=f.elements.filter(u=>u!==c)})},onFocus(){Ht(s(),"isTouched",!0),Ee(r(),s(),"touch")},onInput(c){const f=s();$i(r(),n(),wi(c.currentTarget,f)),Ee(r(),f,"input")},onChange(){Ee(r(),s(),"change")},onBlur(){Ee(r(),s(),"blur")}}}}function Ei(e,t){const n=P(()=>on(Ge(e)[he],Ge(t).path)),r=P(()=>F(n(),"isTouched")),s=P(()=>F(n(),"isDirty")),i=P(()=>!F(n(),"errors"));return{get path(){return Ge(t).path},get items(){return n().items.value},get errors(){return n().errors.value},get isTouched(){return r()},get isDirty(){return s()},get isValid(){return i()}}}function Si(e){const t=Pi(()=>e.of,()=>({path:e.path}));return q(()=>e.children(t))}function Oi(e){const t=Ei(()=>e.of,()=>({path:e.path}));return q(()=>e.children(t))}function ji(e){const[,t]=Bn(e,["of","onSubmit"]);return(()=>{var n=vi();return Ft(r=>{e.of[he].element=r},n),X(n,J(t,{novalidate:!0,onSubmit:r=>ki(e.of,e.onSubmit)(r)}),!1,!1),n})()}var Ti=$("<input type=text class=input>"),Ii=$('<textarea class="input textarea">'),Li=$('<textarea class="input textarea markdown-editor">'),Ni=$("<input type=number class=input>"),Di=$("<span class=checkbox-description>"),Ri=$("<label class=checkbox-label><input type=checkbox class=checkbox>"),Mi=$("<input type=date class=input>"),Ui=$("<input type=datetime-local class=input>"),Bi=$('<input type=text class="input slug-input">'),Vi=$("<img alt=Preview class=image-preview>"),Ki=$('<div class=image-input><div class=image-input-row><input type=url class=input><label class="btn btn-secondary upload-btn"><input type=file>'),Gi=$('<select class="input select"><option value>Select...'),pr=$("<option>"),zi=$('<select class="input select"><option value>Select <!>...'),qi=$("<span class=field-error>"),Hi=$("<div class=field><label class=field-label>"),Wi=$('<div class="field object-field"><label class=field-label></label><div class=object-field-entries>'),Ji=$('<div class=array-field-empty>No items yet. Click "Add" to create one.'),Xi=$('<div class="field array-field"><div class=array-field-header><label class=field-label></label><button type=button class="btn btn-small btn-secondary">+ Add</button></div><div class=array-field-items>'),Yi=$('<div class=array-field-item><div class=array-field-item-content></div><button type=button class="btn btn-small btn-danger array-field-remove">');function Zi(e){return"type"in e&&e.type==="array"&&"item"in e}function Qi(e){return Re(e).ui?!1:"type"in e&&e.type==="object"&&"entries"in e}function Fi(e){const t=Re(e);if(t.ui)return t.ui;if("type"in e)switch(e.type){case"string":return"text";case"number":return"number";case"boolean":return"boolean";default:return"text"}return"text"}function ea(e,t){const n=Re(e);if(n.label)return n.label;const r=t[t.length-1];return String(r).replace(/([A-Z])/g," $1").replace(/^./,s=>s.toUpperCase()).trim()}const ta=e=>(()=>{var t=Ti();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""},get placeholder(){return e.metadata.placeholder}}),!1,!1),t})(),na=e=>(()=>{var t=Ii();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""},get placeholder(){return e.metadata.placeholder},rows:5}),!1,!1),t})(),ra=e=>(()=>{var t=Li();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""},get placeholder(){return e.metadata.placeholder||"Write markdown..."},rows:10}),!1,!1),t})(),sa=e=>(()=>{var t=Ni();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""},get min(){return e.metadata.min},get max(){return e.metadata.max},get step(){return e.metadata.step}}),!1,!1),t})(),ia=e=>(()=>{var t=Ri(),n=t.firstChild;return X(n,J(()=>e.field.props,{get checked(){return e.field.input??!1}}),!1,!1),w(t,b(S,{get when(){return e.metadata.description},get children(){var r=Di();return w(r,()=>e.metadata.description),r}}),null),t})(),aa=e=>(()=>{var t=Mi();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""}}),!1,!1),t})(),la=e=>(()=>{var t=Ui();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""}}),!1,!1),t})(),oa=e=>(()=>{var t=Bi();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""},get placeholder(){return e.metadata.placeholder||"my-slug"},pattern:"^[a-z0-9]+(?:-[a-z0-9]+)*$"}),!1,!1),t})(),En=e=>{const[,t]=oe(),[n,r]=L(!1);let s;const i=()=>e.field.input,a=()=>e.metadata.accept||"image/*",l=()=>e.metadata.path,o=async c=>{const u=c.target.files?.[0];if(u){r(!0);try{const h=await t.uploadFile(u,l());s&&(s.value=h,s.dispatchEvent(new Event("input",{bubbles:!0})))}catch(h){console.error("Upload failed:",h),alert("Upload failed: "+(h instanceof Error?h.message:"Unknown error"))}finally{r(!1)}}};return(()=>{var c=Ki(),f=c.firstChild,u=f.firstChild,h=u.nextSibling,m=h.firstChild,d=s;return typeof d=="function"?Ft(d,u):s=u,X(u,J(()=>e.field.props,{get value(){return i()??""},placeholder:"https://example.com/image.jpg"}),!1,!1),w(h,()=>n()?"...":"Upload",m),m.addEventListener("change",o),Zr(m,"display","none"),w(c,b(S,{get when(){return i()},get children(){var g=Vi();return N(()=>K(g,"src",i())),g}}),null),N(g=>{var p=a(),v=n();return p!==g.e&&K(m,"accept",g.e=p),v!==g.t&&(m.disabled=g.t=v),g},{e:void 0,t:void 0}),c})()},ca=e=>{const t=()=>e.metadata.options||[];return(()=>{var n=Gi();return n.firstChild,X(n,J(()=>e.field.props,{get value(){return e.field.input??""}}),!1,!0),w(n,b(de,{get each(){return t()},children:r=>(()=>{var s=pr();return s.value=r,w(s,r),s})()}),null),n})()},ua=e=>{const[t]=oe(),n=()=>e.metadata.collection,r=()=>t.collections[n()]?.items||[];return(()=>{var s=zi(),i=s.firstChild,a=i.firstChild,l=a.nextSibling;return l.nextSibling,X(s,J(()=>e.field.props,{get value(){return e.field.input??""}}),!1,!0),w(i,n,l),w(s,b(de,{get each(){return r()},children:o=>(()=>{var c=pr();return w(c,()=>o.data.name||o.data.title||o.id),N(()=>c.value=o.id),c})()}),null),s})()},fa={text:ta,textarea:na,markdown:ra,number:sa,boolean:ia,date:aa,datetime:la,slug:oa,image:En,file:En,select:ca,reference:ua};function un(e){const t=()=>Fi(e.schema),n=()=>e.label||ea(e.schema,e.path),r=()=>Re(e.schema);return Zi(e.schema)?b(ha,{get form(){return e.form},get path(){return e.path},get itemSchema(){return e.schema.item},get label(){return n()},get metadata(){return r()}}):Qi(e.schema)?b(da,{get form(){return e.form},get path(){return e.path},get entries(){return e.schema.entries},get label(){return n()}}):b(Si,{get of(){return e.form},get path(){return e.path},children:s=>(()=>{var i=Hi(),a=i.firstChild;return w(a,n),w(i,b(as,{get component(){return fa[t()]},field:s,get metadata(){return r()}}),null),w(i,b(S,{get when(){return s.errors?.[0]},get children(){var l=qi();return w(l,()=>s.errors[0]),l}}),null),i})()})}function da(e){return(()=>{var t=Wi(),n=t.firstChild,r=n.nextSibling;return w(n,()=>e.label),w(r,b(de,{get each(){return Object.entries(e.entries)},children:([s,i])=>b(un,{get form(){return e.form},get path(){return[...e.path,s]},schema:i})})),t})()}function ha(e){const t=()=>{xi(e.form,{path:e.path,initialInput:yr(e.itemSchema)})},n=r=>{Ai(e.form,{path:e.path,at:r})};return b(Oi,{get of(){return e.form},get path(){return e.path},children:r=>(()=>{var s=Xi(),i=s.firstChild,a=i.firstChild,l=a.nextSibling,o=i.nextSibling;return w(a,()=>e.label),l.$$click=t,w(o,b(Lr,{get each(){return r.items},children:(c,f)=>(()=>{var u=Yi(),h=u.firstChild,m=h.nextSibling;return w(h,b(un,{get form(){return e.form},get path(){return[...e.path,f]},get schema(){return e.itemSchema},get label(){return`${e.label} ${f+1}`}})),m.$$click=()=>n(f),u})()})),w(s,b(S,{get when(){return r.items.length===0},get children(){return Ji()}}),null),s})()})}function yr(e){if("type"in e)switch(e.type){case"string":return"";case"number":return 0;case"boolean":return!1;case"array":return[];case"object":if("entries"in e&&typeof e.entries=="object"){const t=e.entries;return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,yr(r)]))}return{};default:return}}le(["click"]);var ga=$("<div class=form-fields>"),ma=$("<div class=form-error>"),pa=$('<button type=button class="btn btn-secondary">Cancel'),ya=$('<div class=form-actions><button type=submit class="btn btn-primary">');function ba(e){const t=Ci({schema:e.schema,values:e.initialData}),n=()=>nn(e.schema);return b(ji,{of:t,onSubmit:async s=>{await e.onSubmit(s)},class:"schema-form",get children(){return[(()=>{var s=ga();return w(s,b(de,{get each(){return Object.entries(n()||{})},children:([i,a])=>b(un,{form:t,path:[i],schema:a})})),s})(),b(S,{get when(){return e.error},get children(){var s=ma();return w(s,()=>e.error),s}}),(()=>{var s=ya(),i=s.firstChild;return w(s,b(S,{get when(){return e.onCancel},get children(){var a=pa();return Kn(a,"click",e.onCancel,!0),N(()=>a.disabled=e.pending),a}}),i),w(i,(()=>{var a=q(()=>!!e.pending);return()=>a()?"Saving...":e.submitLabel||"Save"})()),N(()=>i.disabled=e.pending),s})()]}})}le(["click"]);var va=$("<div class=editor><div class=editor-header><h2 class=editor-title>");function wa(e){const[t,n]=oe(),r=vt(),s=ln(Cn),i=an(Cn),a=()=>e.itemId==="__new__",l=()=>e.collectionKey.charAt(0).toUpperCase()+e.collectionKey.slice(1),o=()=>a()?void 0:t.collections[e.collectionKey]?.items.find(h=>h.id===e.itemId),c=async u=>{const h=o()?.sha;if(await s(e.collectionKey,u,h,n),a()){const m=u.slug??u.id;m&&r(`/collections/${e.collectionKey}/${m}`,{replace:!0})}},f=()=>{r(`/collections/${e.collectionKey}`)};return(()=>{var u=va(),h=u.firstChild,m=h.firstChild;return w(m,(()=>{var d=q(()=>!!a());return()=>d()?`New ${l()}`:`Edit ${l()}`})()),w(u,b(S,{get when(){return q(()=>!!a())()?e.itemId:o()},keyed:!0,children:d=>b(ba,{get schema(){return e.schema},get initialData(){return q(()=>!!a())()?void 0:d.data},onSubmit:c,onCancel:f,get submitLabel(){return a()?"Create":"Save"},get pending(){return i.pending},get error(){return q(()=>!!i.error)()?String(i.error):void 0}})}),null),u})()}var $a=$("<a>");const Sn=["view","collection","item"];function Oe(e){const[t]=rr(),n=()=>{const s=new URLSearchParams;for(const a of Sn)e.params[a]&&s.set(a,e.params[a]);const i=s.toString();return i?`?${i}`:"?"},r=()=>Sn.every(s=>{const i=e.params[s];return i===void 0?!t[s]:t[s]===i});return(()=>{var s=$a();return w(s,()=>e.children),N(i=>{var a=n(),l=`${e.class||""} ${r()&&e.activeClass?e.activeClass:""}`;return a!==i.e&&K(s,"href",i.e=a),l!==i.t&&Vn(s,i.t=l),i},{e:void 0,t:void 0}),s})()}var _a=$("<div class=item-list-loading>Loading..."),ka=$("<div class=item-list-error>"),xa=$("<div class=item-list-empty>No items yet. Create your first one!"),Aa=$("<div class=item-list><div class=item-list-header><h2 class=item-list-title></h2></div><ul class=item-list-items>"),Ca=$("<span class=item-title>"),Pa=$("<span class=item-id>"),Ea=$('<li class=item-list-item><button class="btn btn-danger btn-small">');function Sa(e){const[t,n]=oe(),r=ln(Pn),s=an(Pn),i=()=>t.collections[e.collectionKey],a=()=>i()?.items||[],l=()=>e.collectionKey.charAt(0).toUpperCase()+e.collectionKey.slice(1),o=u=>u.title||u.name||u.slug||"Untitled",c=(u,h)=>{confirm("Are you sure you want to delete this item?")&&r(e.collectionKey,u,h,n)},f=u=>{if(!s.pending)return!1;const h=s.input;return Array.isArray(h)&&h[1]===u};return(()=>{var u=Aa(),h=u.firstChild,m=h.firstChild,d=h.nextSibling;return w(m,l),w(h,b(Oe,{get params(){return{collection:e.collectionKey,item:"__new__"}},class:"btn btn-primary",children:"+ New"}),null),w(u,b(S,{get when(){return i()?.loading},get children(){return _a()}}),d),w(u,b(S,{get when(){return i()?.error},get children(){var g=ka();return w(g,()=>i()?.error),g}}),d),w(u,b(S,{get when(){return q(()=>!i()?.loading)()&&a().length===0},get children(){return xa()}}),d),w(d,b(de,{get each(){return a()},children:g=>(()=>{var p=Ea(),v=p.firstChild;return w(p,b(Oe,{get params(){return{collection:e.collectionKey,item:g.id}},class:"item-info",activeClass:"active",get children(){return[(()=>{var y=Ca();return w(y,()=>o(g.data)),y})(),(()=>{var y=Pa();return w(y,()=>g.id),y})()]}}),v),v.$$click=y=>{y.stopPropagation(),c(g.id,g.sha)},w(v,()=>f(g.id)?"...":"Delete"),N(()=>v.disabled=f(g.id)),p})()})),u})()}le(["click"]);var Oa=$("<div class=media-library-loading>Loading media..."),ja=$("<div class=media-library-error>"),Ta=$("<div class=media-library-empty>No media files yet. Upload files through content fields."),Ia=$("<div class=media-library><div class=media-library-header><h2 class=media-library-title>Media Library</h2></div><div class=media-grid>"),La=$("<img loading=lazy>",!0,!1,!1),Na=$('<div class=media-item><div class=media-preview></div><div class=media-info><span class=media-name></span><span class=media-meta></span></div><button class="media-delete btn btn-danger btn-small"title="Delete file">'),Da=$("<div class=media-file-icon><span class=media-file-ext>");function Ra(){const[e,t]=oe(),[n,r]=L(null),s=l=>/\.(jpg|jpeg|png|gif|webp|svg|ico)$/i.test(l),i=l=>l<1024?`${l} B`:l<1024*1024?`${(l/1024).toFixed(1)} KB`:`${(l/(1024*1024)).toFixed(1)} MB`,a=async l=>{const c=t.getMediaReferences(l.url).length,f=c>0?`This will delete the file and remove ${c} reference${c>1?"s":""} from your content. Continue?`:"Delete this file?";if(confirm(f)){r(l.path);try{await t.deleteMedia(l.url,l.path,l.sha)}finally{r(null)}}};return(()=>{var l=Ia(),o=l.firstChild,c=o.nextSibling;return w(l,b(S,{get when(){return e.media.loading},get children(){return Oa()}}),c),w(l,b(S,{get when(){return e.media.error},get children(){var f=ja();return w(f,()=>e.media.error),f}}),c),w(l,b(S,{get when(){return q(()=>!e.media.loading)()&&e.media.files.length===0},get children(){return Ta()}}),c),w(c,b(de,{get each(){return e.media.files},children:f=>{const u=()=>t.getMediaReferences(f.url);return(()=>{var h=Na(),m=h.firstChild,d=m.nextSibling,g=d.firstChild,p=g.nextSibling,v=d.nextSibling;return w(m,b(S,{get when(){return s(f.name)},get fallback(){return(()=>{var y=Da(),k=y.firstChild;return w(k,()=>f.name.split(".").pop()?.toUpperCase()),y})()},get children(){var y=La();return N(k=>{var C=f.url,T=f.name;return C!==k.e&&K(y,"src",k.e=C),T!==k.t&&K(y,"alt",k.t=T),k},{e:void 0,t:void 0}),y}})),w(g,()=>f.name),w(p,()=>i(f.size),null),w(p,b(S,{get when(){return u().length>0},get children(){return["  ",q(()=>u().length)," ref",q(()=>u().length>1?"s":"")]}}),null),v.$$click=()=>a(f),w(v,()=>n()===f.path?"...":""),N(y=>{var k=n()===f.path,C=f.name,T=n()===f.path;return k!==y.e&&h.classList.toggle("deleting",y.e=k),C!==y.t&&K(g,"title",y.t=C),T!==y.a&&(v.disabled=y.a=T),y},{e:void 0,t:void 0,a:void 0}),h})()}})),l})()}le(["click"]);var Ma=$('<button class="btn btn-secondary">Reset'),Ua=$("<div class=schema-editor-error>"),Ba=$("<textarea class=schema-editor-textarea>"),Va=$('<div class=schema-editor><div class=schema-editor-header><h2>Schema Editor</h2><div class=schema-editor-actions><button class="btn btn-primary"></button></div></div><div class=schema-editor-hint>Saving will commit changes and trigger migrations on all content.'),Ka=$("<div class=schema-editor-loading>Loading schema...");function Ga(){const[e,t]=oe(),[n,r]=L(""),[s,i]=L(!1),a=ln(An),l=an(An);kr(()=>{!e.schema.content&&!e.schema.loading&&t.loadSchema()}),Tt(()=>{e.schema.content&&!s()&&r(e.schema.content)}),Tt(()=>{l.result?.ok&&i(!1)});const o=u=>{const h=u.target.value;r(h),i(h!==e.schema.content)},c=()=>{a(n(),t)},f=()=>{r(e.schema.content),i(!1)};return(()=>{var u=Va(),h=u.firstChild,m=h.firstChild,d=m.nextSibling,g=d.firstChild,p=h.nextSibling;return w(d,b(S,{get when(){return s()},get children(){var v=Ma();return v.$$click=f,N(()=>v.disabled=l.pending),v}}),g),g.$$click=c,w(g,()=>l.pending?"Saving...":"Save"),w(u,b(S,{get when(){return l.error},get children(){var v=Ua();return w(v,()=>String(l.error)),v}}),p),w(u,b(S,{get when(){return!e.schema.loading},get fallback(){return Ka()},get children(){var v=Ba();return v.$$input=o,K(v,"spellcheck",!1),N(()=>v.value=n()),v}}),p),N(()=>g.disabled=!s()||l.pending),u})()}le(["click","input"]);var za=$("<div class=cms-welcome><h2>Welcome to Plasticine</h2><p>Select a collection from the sidebar to get started."),qa=$("<div>Collection not found"),Ha=$("<span class=media-nav-name>Library"),Wa=$("<span class=media-nav-count>"),Ja=$("<span class=schema-nav-name>Schema"),Xa=$("<aside class=cms-sidebar><nav class=collection-list><h2 class=collection-list-title>Collections</h2><ul class=collection-list-items></ul></nav><nav class=media-nav><h2 class=media-nav-title>Media</h2><ul class=media-nav-items></ul></nav><nav class=schema-nav><h2 class=schema-nav-title>Settings</h2><ul class=schema-nav-items>"),Ya=$("<span class=collection-name>"),Za=$("<span class=collection-count>"),Qa=$('<div class=cms-user><img class=cms-avatar><span class=cms-username></span><button class="btn btn-small">Logout'),Fa=$("<div class=cms-layout><header class=cms-header></header><div class=cms-body><main class=cms-main>"),el=$("<div class=cms-loading><div class=cms-loading-content><h2>Loading...</h2><p>Fetching your content");function tl(){return za()}function nl(e){const[t]=rr(),n=()=>t.collection?e.config.getSchema(t.collection):null;return b(S,{get when(){return t.view==="media"},get fallback(){return b(S,{get when(){return t.view==="schema"},get fallback(){return b(S,{get when(){return t.collection},get fallback(){return b(tl,{})},get children(){return b(S,{get when(){return t.item},get fallback(){return b(Sa,{get collectionKey(){return t.collection}})},get children(){return b(S,{get when(){return n()},get fallback(){return qa()},get children(){return b(wa,{get schema(){return n()},get collectionKey(){return t.collection},get itemId(){return t.item}})}})}})}})},get children(){return b(Ga,{})}})},get children(){return b(Ra,{})}})}function rl(e){const[t]=oe(),n=r=>r.charAt(0).toUpperCase()+r.slice(1);return(()=>{var r=Xa(),s=r.firstChild,i=s.firstChild,a=i.nextSibling,l=s.nextSibling,o=l.firstChild,c=o.nextSibling,f=l.nextSibling,u=f.firstChild,h=u.nextSibling;return w(a,()=>e.config.getCollections().map(m=>b(Oe,{params:{collection:m},class:"collection-list-item",activeClass:"active",get children(){return[(()=>{var d=Ya();return w(d,()=>n(m)),d})(),(()=>{var d=Za();return w(d,()=>t.collections[m]?.items.length||0),d})()]}}))),w(c,b(Oe,{params:{view:"media"},class:"media-nav-item",activeClass:"active",get children(){return[Ha(),(()=>{var m=Wa();return w(m,()=>t.media.files.length),m})()]}})),w(h,b(Oe,{params:{view:"schema"},class:"schema-nav-item",activeClass:"active",get children(){return Ja()}})),r})()}function sl(e){const[t,n]=oe();return(()=>{var r=Fa(),s=r.firstChild,i=s.nextSibling,a=i.firstChild;return w(s,b(Oe,{params:{},class:"cms-logo",children:"Plasticine"}),null),w(s,b(S,{get when(){return t.user},get children(){var l=Qa(),o=l.firstChild,c=o.nextSibling,f=c.nextSibling;return w(c,()=>t.user.login),f.$$click=()=>n.logout(),N(u=>{var h=t.user.avatar_url,m=t.user.login;return h!==u.e&&K(o,"src",u.e=h),m!==u.t&&K(o,"alt",u.t=m),u},{e:void 0,t:void 0}),l}}),null),w(i,b(rl,{get config(){return e.config}}),a),w(a,b(nl,{get config(){return e.config}})),r})()}function il(e){const[t,n]=oe();return b(S,{get when(){return t.authenticated},get fallback(){return b(e.auth.LoginScreen,{get onSuccess(){return n.handleAuthSuccess}})},get children(){return b(S,{get when(){return!t.dataLoading},get fallback(){return el()},get children(){return b(sl,{get config(){return e.config}})}})}})}function On(e){return b(bi,{get config(){return e.config},get backend(){return e.backend},get auth(){return e.auth},get schemaPath(){return e.schemaPath},get children(){return b(il,{get config(){return e.config},get auth(){return e.auth}})}})}function al(e){try{return vt(),b(On,e)}catch{return b(cr,{get children(){return b(Kt,{path:"*",component:()=>b(On,e)})}})}}le(["click"]);const br=ls({authors:Et(pe({slug:rt({label:"Slug"}),name:Ce({label:"Name",placeholder:"John Doe"}),bio:ye(bs({label:"Bio",placeholder:"A short bio..."})),avatar:ye(Pt({label:"Avatar",path:"avatars"}))})),posts:Et(pe({slug:rt({label:"Slug"}),title:Ce({label:"Title",placeholder:"My awesome post"}),content:Ct({label:"Content"})})).version(pe({slug:rt({label:"Slug"}),title:Ce({label:"Title",placeholder:"My awesome post"}),cover:ye(Pt({label:"Cover Image",path:"covers"})),content:Ct({label:"Content"}),author:ye(_s("authors",{label:"Author"})),draft:vs({label:"Draft",description:"Keep this post as draft"}),publishedAt:ye(ws({label:"Published Date"})),images:Ut(pe({src:Pt({label:"Image",path:"posts"}),alt:ye(Ce({label:"Alt Text"})),tags:Ut(pe({name:Ce({label:"Tag Name"})}))}))}),e=>({...e,cover:void 0,author:void 0,draft:!0,publishedAt:void 0,images:[]})),pages:Et(pe({slug:rt({label:"Slug"}),title:Ce({label:"Title"}),content:Ct({label:"Content"}),template:$s(["default","landing","contact"],{label:"Template"})}))});var ll=$("<img alt class=post-cover>"),ol=$("<img alt class=author-avatar>"),cl=$("<div class=post-author><span>"),ul=$("<time class=post-date>"),fl=$("<article class=post-card><div class=post-content><h2 class=post-title></h2><div class=post-excerpt>..."),dl=$("<img alt class=author-avatar-large>"),hl=$("<p>"),gl=$("<div class=author-card><h3>"),ml=$("<div class=posts-grid>"),pl=$("<div class=authors-grid>"),yl=$("<div class=app><header class=header><h1>My Blog</h1><nav><a href=#posts>Posts</a><a href=#authors>Authors</a></nav></header><main><section id=posts class=section><h2>Latest Posts</h2></section><section id=authors class=section><h2>Authors</h2></section></main><footer class=footer><p>Powered by Plasticine CMS"),bl=$("<p>Loading posts..."),vl=$("<p>No posts yet."),wl=$("<p>Loading authors..."),$l=$("<p>No authors yet.");const jn=As(br,{owner:"bigmistqke",repo:"plasticine-cms",branch:"main",contentPath:"demo/demo1/content"});function _l(e){const t=()=>e.authors.find(n=>n.slug===e.post.author);return(()=>{var n=fl(),r=n.firstChild,s=r.firstChild,i=s.nextSibling,a=i.firstChild;return w(n,b(S,{get when(){return e.post.cover},get children(){var l=ll();return N(()=>K(l,"src",e.post.cover)),l}}),r),w(s,()=>e.post.title),w(r,b(S,{get when(){return t()},get children(){var l=cl(),o=l.firstChild;return w(l,b(S,{get when(){return t().avatar},get children(){var c=ol();return N(()=>K(c,"src",t().avatar)),c}}),o),w(o,()=>t().name),l}}),i),w(r,b(S,{get when(){return e.post.publishedAt},get children(){var l=ul();return w(l,()=>new Date(e.post.publishedAt).toLocaleDateString()),l}}),i),w(i,()=>e.post.content.slice(0,200),a),n})()}function kl(e){return(()=>{var t=gl(),n=t.firstChild;return w(t,b(S,{get when(){return e.author.avatar},get children(){var r=dl();return N(()=>K(r,"src",e.author.avatar)),r}}),n),w(n,()=>e.author.name),w(t,b(S,{get when(){return e.author.bio},get children(){var r=hl();return w(r,()=>e.author.bio),r}}),null),t})()}function xl(){const[e]=gn(()=>jn.posts.getAll()),[t]=gn(()=>jn.authors.getAll()),n=()=>(e()||[]).map(s=>s.data).filter(s=>!s.draft).sort((s,i)=>!s.publishedAt||!i.publishedAt?0:new Date(i.publishedAt).getTime()-new Date(s.publishedAt).getTime()),r=()=>(t()||[]).map(s=>s.data);return(()=>{var s=yl(),i=s.firstChild,a=i.nextSibling,l=a.firstChild;l.firstChild;var o=l.nextSibling;return o.firstChild,w(l,b(yn,{get fallback(){return bl()},get children(){return b(S,{get when(){return n().length>0},get fallback(){return vl()},get children(){var c=ml();return w(c,b(de,{get each(){return n()},children:f=>b(_l,{post:f,get authors(){return r()}})})),c}})}}),null),w(o,b(yn,{get fallback(){return wl()},get children(){return b(S,{get when(){return r().length>0},get fallback(){return $l()},get children(){var c=pl();return w(c,b(de,{get each(){return r()},children:f=>b(kl,{author:f})})),c}})}}),null),s})()}const Al=Ps({owner:"bigmistqke",repo:"plasticine-cms",branch:"main",contentPath:"demo/demo1/content"}),Cl=js(),Pl=document.getElementById("root");Hr(()=>b(cr,{base:"./",get children(){return[b(Kt,{path:"/*",component:xl}),b(Kt,{path:"/admin/*",component:()=>b(al,{config:br,backend:Al,auth:Cl,get schemaPath(){return"demo/demo1/config.ts"}})})]}}),Pl);
