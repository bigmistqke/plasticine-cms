(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const E={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return un(this.context.count)},getNextContextId(){return un(this.context.count++)}};function un(e){const t=String(e),n=t.length-1;return E.context.id+(n?String.fromCharCode(96+n):"")+t}function tt(e){E.context=e}const wr=!1,vr=(e,t)=>e===t,ne=Symbol("solid-proxy"),Sn=typeof Proxy=="function",Be=Symbol("solid-track"),at={equals:vr};let $r=Ln;const re=1,Ve=2,On={owned:null,cleanups:null,context:null,owner:null},_t={};var C=null;let $=null,_r=null,O=null,B=null,V=null,mt=0;function oe(e,t){const n=O,r=C,s=e.length===0,i=t===void 0?r:t,a=s?On:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=s?e:()=>e(()=>T(()=>ce(a)));C=a,O=null;try{return W(l,!0)}finally{O=n,C=r}}function N(e,t){t=t?Object.assign({},at,t):at;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=s=>(typeof s=="function"&&($&&$.running&&$.sources.has(n)?s=s(n.tValue):s=s(n.value)),Tn(n,s));return[jn.bind(n),r]}function fn(e,t,n){const r=Xt(e,t,!0,re);Ye(r)}function R(e,t,n){const r=Xt(e,t,!1,re);Ye(r)}function x(e,t,n){n=n?Object.assign({},at,n):at;const r=Xt(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,Ye(r),jn.bind(r)}function kr(e){return e&&typeof e=="object"&&"then"in e}function dn(e,t,n){let r,s,i;r=!0,s=e,i={};let a=null,l=_t,o=null,c=!1,f=!1,u="initialValue"in i,h=typeof r=="function"&&x(r);const m=new Set,[d,g]=(i.storage||N)(i.initialValue),[p,v]=N(void 0),[y,k]=N(void 0,{equals:!1}),[P,I]=N(u?"ready":"unresolved");E.context&&(o=E.getNextContextId(),i.ssrLoadFrom==="initial"?l=i.initialValue:E.load&&E.has(o)&&(l=E.load(o)));function M(L,D,q,A){return a===L&&(a=null,A!==void 0&&(u=!0),(L===l||D===l)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(A,{value:D})),l=_t,$&&L&&c?($.promises.delete(L),c=!1,W(()=>{$.running=!0,le(D,q)},!1)):le(D,q)),D}function le(L,D){W(()=>{D===void 0&&g(()=>L),I(D!==void 0?"errored":u?"ready":"unresolved"),v(D);for(const q of m.keys())q.decrement();m.clear()},!1)}function me(){const L=Ke&&Xe(Ke),D=d(),q=p();if(q!==void 0&&!a)throw q;return O&&!O.user&&L&&fn(()=>{y(),a&&(L.resolved&&$&&c?$.promises.add(a):m.has(L)||(L.increment(),m.add(L)))}),D}function $e(L=!0){if(L!==!1&&f)return;f=!1;const D=h?h():r;if(c=$&&$.running,D==null||D===!1){M(a,T(d));return}$&&a&&$.promises.delete(a);let q;const A=l!==_t?l:T(()=>{try{return s(D,{value:d(),refetching:L})}catch(S){q=S}});if(q!==void 0){M(a,void 0,st(q),D);return}else if(!kr(A))return M(a,A,void 0,D),A;return a=A,"v"in A?(A.s===1?M(a,A.v,void 0,D):M(a,void 0,st(A.v),D),A):(f=!0,queueMicrotask(()=>f=!1),W(()=>{I(u?"refreshing":"pending"),k()},!1),A.then(S=>M(A,S,void 0,D),S=>M(A,void 0,st(S),D)))}Object.defineProperties(me,{state:{get:()=>P()},error:{get:()=>p()},loading:{get(){const L=P();return L==="pending"||L==="refreshing"}},latest:{get(){if(!u)return me();const L=p();if(L&&!a)throw L;return d()}}});let Qe=C;return h?fn(()=>(Qe=C,$e(!1))):$e(!1),[me,{refetch:L=>Jt(Qe,()=>$e(L)),mutate:g}]}function ae(e){return W(e,!1)}function T(e){if(O===null)return e();const t=O;O=null;try{return e()}finally{O=t}}function Wt(e,t,n){const r=Array.isArray(e);let s,i=n&&n.defer;return a=>{let l;if(r){l=Array(e.length);for(let c=0;c<e.length;c++)l[c]=e[c]()}else l=e();if(i)return i=!1,a;const o=T(()=>t(l,s,a));return s=l,o}}function de(e){return C===null||(C.cleanups===null?C.cleanups=[e]:C.cleanups.push(e)),e}function lt(){return O}function We(){return C}function Jt(e,t){const n=C,r=O;C=e,O=null;try{return W(t,!0)}catch(s){Yt(s)}finally{C=n,O=r}}function Re(e){if($&&$.running)return e(),$.done;const t=O,n=C;return Promise.resolve().then(()=>{O=t,C=n;let r;return Ke&&(r=$||($={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),r.done||(r.done=new Promise(s=>r.resolve=s)),r.running=!0),W(e,!1),O=C=null,r?r.done:void 0})}const[vl,hn]=N(!1);function xr(e){V.push.apply(V,e),e.length=0}function Je(e,t){const n=Symbol("context");return{id:n,Provider:Cr(n),defaultValue:e}}function Xe(e){let t;return C&&C.context&&(t=C.context[e.id])!==void 0?t:e.defaultValue}function pt(e){const t=x(e),n=x(()=>jt(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Ke;function Ar(){return Ke||(Ke=Je())}function jn(){const e=$&&$.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===re)Ye(this);else{const t=B;B=null,W(()=>ot(this),!1),B=t}if(O){const t=this.observers?this.observers.length:0;O.sources?(O.sources.push(this),O.sourceSlots.push(t)):(O.sources=[this],O.sourceSlots=[t]),this.observers?(this.observers.push(O),this.observerSlots.push(O.sources.length-1)):(this.observers=[O],this.observerSlots=[O.sources.length-1])}return e&&$.sources.has(this)?this.tValue:this.value}function Tn(e,t,n){let r=$&&$.running&&$.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,t)){if($){const s=$.running;(s||!n&&$.sources.has(e))&&($.sources.add(e),e.tValue=t),s||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&W(()=>{for(let s=0;s<e.observers.length;s+=1){const i=e.observers[s],a=$&&$.running;a&&$.disposed.has(i)||((a?!i.tState:!i.state)&&(i.pure?B.push(i):V.push(i),i.observers&&Nn(i)),a?i.tState=re:i.state=re)}if(B.length>1e6)throw B=[],new Error},!1)}return t}function Ye(e){if(!e.fn)return;ce(e);const t=mt;gn(e,$&&$.running&&$.sources.has(e)?e.tValue:e.value,t),$&&!$.running&&$.sources.has(e)&&queueMicrotask(()=>{W(()=>{$&&($.running=!0),O=C=e,gn(e,e.tValue,t),O=C=null},!1)})}function gn(e,t,n){let r;const s=C,i=O;O=C=e;try{r=e.fn(t)}catch(a){return e.pure&&($&&$.running?(e.tState=re,e.tOwned&&e.tOwned.forEach(ce),e.tOwned=void 0):(e.state=re,e.owned&&e.owned.forEach(ce),e.owned=null)),e.updatedAt=n+1,Yt(a)}finally{O=i,C=s}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Tn(e,r,!0):$&&$.running&&e.pure?($.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=n)}function Xt(e,t,n,r=re,s){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:C,context:C?C.context:null,pure:n};return $&&$.running&&(i.state=0,i.tState=r),C===null||C!==On&&($&&$.running&&C.pure?C.tOwned?C.tOwned.push(i):C.tOwned=[i]:C.owned?C.owned.push(i):C.owned=[i]),i}function In(e){const t=$&&$.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===Ve)return ot(e);if(e.suspense&&T(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<mt);){if(t&&$.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let r=n.length-1;r>=0;r--){if(e=n[r],t){let s=e,i=n[r+1];for(;(s=s.owner)&&s!==i;)if($.disposed.has(s))return}if((t?e.tState:e.state)===re)Ye(e);else if((t?e.tState:e.state)===Ve){const s=B;B=null,W(()=>ot(e,n[0]),!1),B=s}}}function W(e,t){if(B)return e();let n=!1;t||(B=[]),V?n=!0:V=[],mt++;try{const r=e();return Pr(n),r}catch(r){n||(V=null),B=null,Yt(r)}}function Pr(e){if(B&&(Ln(B),B=null),e)return;let t;if($){if(!$.promises.size&&!$.queue.size){const r=$.sources,s=$.disposed;V.push.apply(V,$.effects),t=$.resolve;for(const i of V)"tState"in i&&(i.state=i.tState),delete i.tState;$=null,W(()=>{for(const i of s)ce(i);for(const i of r){if(i.value=i.tValue,i.owned)for(let a=0,l=i.owned.length;a<l;a++)ce(i.owned[a]);i.tOwned&&(i.owned=i.tOwned),delete i.tValue,delete i.tOwned,i.tState=0}hn(!1)},!1)}else if($.running){$.running=!1,$.effects.push.apply($.effects,V),V=null,hn(!0);return}}const n=V;V=null,n.length&&W(()=>$r(n),!1),t&&t()}function Ln(e){for(let t=0;t<e.length;t++)In(e[t])}function ot(e,t){const n=$&&$.running;n?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const i=n?s.tState:s.state;i===re?s!==t&&(!s.updatedAt||s.updatedAt<mt)&&In(s):i===Ve&&ot(s,t)}}}function Nn(e){const t=$&&$.running;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(t?!r.tState:!r.state)&&(t?r.tState=Ve:r.state=Ve,r.pure?B.push(r):V.push(r),r.observers&&Nn(r))}}function ce(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),a=n.observerSlots.pop();r<s.length&&(i.sourceSlots[a]=r,s[r]=i,n.observerSlots[r]=a)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)ce(e.tOwned[t]);delete e.tOwned}if($&&$.running&&e.pure)Dn(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)ce(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}$&&$.running?e.tState=0:e.state=0}function Dn(e,t){if(t||(e.tState=0,$.disposed.add(e)),e.owned)for(let n=0;n<e.owned.length;n++)Dn(e.owned[n])}function st(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Yt(e,t=C){throw st(e)}function jt(e){if(typeof e=="function"&&!e.length)return jt(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=jt(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Cr(e,t){return function(r){let s;return R(()=>s=T(()=>(C.context={...C.context,[e]:r.value},pt(()=>r.children))),void 0),s}}const Tt=Symbol("fallback");function ct(e){for(let t=0;t<e.length;t++)e[t]()}function Er(e,t,n={}){let r=[],s=[],i=[],a=0,l=t.length>1?[]:null;return de(()=>ct(i)),()=>{let o=e()||[],c=o.length,f,u;return o[Be],T(()=>{let m,d,g,p,v,y,k,P,I;if(c===0)a!==0&&(ct(i),i=[],r=[],s=[],a=0,l&&(l=[])),n.fallback&&(r=[Tt],s[0]=oe(M=>(i[0]=M,n.fallback())),a=1);else if(a===0){for(s=new Array(c),u=0;u<c;u++)r[u]=o[u],s[u]=oe(h);a=c}else{for(g=new Array(c),p=new Array(c),l&&(v=new Array(c)),y=0,k=Math.min(a,c);y<k&&r[y]===o[y];y++);for(k=a-1,P=c-1;k>=y&&P>=y&&r[k]===o[P];k--,P--)g[P]=s[k],p[P]=i[k],l&&(v[P]=l[k]);for(m=new Map,d=new Array(P+1),u=P;u>=y;u--)I=o[u],f=m.get(I),d[u]=f===void 0?-1:f,m.set(I,u);for(f=y;f<=k;f++)I=r[f],u=m.get(I),u!==void 0&&u!==-1?(g[u]=s[f],p[u]=i[f],l&&(v[u]=l[f]),u=d[u],m.set(I,u)):i[f]();for(u=y;u<c;u++)u in g?(s[u]=g[u],i[u]=p[u],l&&(l[u]=v[u],l[u](u))):s[u]=oe(h);s=s.slice(0,a=c),r=o.slice(0)}return s});function h(m){if(i[u]=m,l){const[d,g]=N(u);return l[u]=g,t(o[u],d)}return t(o[u])}}}function Sr(e,t,n={}){let r=[],s=[],i=[],a=[],l=0,o;return de(()=>ct(i)),()=>{const c=e()||[],f=c.length;return c[Be],T(()=>{if(f===0)return l!==0&&(ct(i),i=[],r=[],s=[],l=0,a=[]),n.fallback&&(r=[Tt],s[0]=oe(h=>(i[0]=h,n.fallback())),l=1),s;for(r[0]===Tt&&(i[0](),i=[],r=[],s=[],l=0),o=0;o<f;o++)o<r.length&&r[o]!==c[o]?a[o](()=>c[o]):o>=r.length&&(s[o]=oe(u));for(;o<r.length;o++)i[o]();return l=a.length=i.length=f,r=c.slice(0),s=s.slice(0,l)});function u(h){i[o]=h;const[m,d]=N(c[o]);return a[o]=d,t(m,o)}}}function b(e,t){return T(()=>e(t||{}))}function nt(){return!0}const It={get(e,t,n){return t===ne?n:e.get(t)},has(e,t){return t===ne?!0:e.has(t)},set:nt,deleteProperty:nt,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:nt,deleteProperty:nt}},ownKeys(e){return e.keys()}};function kt(e){return(e=typeof e=="function"?e():e)?e:{}}function Or(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function J(...e){let t=!1;for(let a=0;a<e.length;a++){const l=e[a];t=t||!!l&&ne in l,e[a]=typeof l=="function"?(t=!0,x(l)):l}if(Sn&&t)return new Proxy({get(a){for(let l=e.length-1;l>=0;l--){const o=kt(e[l])[a];if(o!==void 0)return o}},has(a){for(let l=e.length-1;l>=0;l--)if(a in kt(e[l]))return!0;return!1},keys(){const a=[];for(let l=0;l<e.length;l++)a.push(...Object.keys(kt(e[l])));return[...new Set(a)]}},It);const n={},r=Object.create(null);for(let a=e.length-1;a>=0;a--){const l=e[a];if(!l)continue;const o=Object.getOwnPropertyNames(l);for(let c=o.length-1;c>=0;c--){const f=o[c];if(f==="__proto__"||f==="constructor")continue;const u=Object.getOwnPropertyDescriptor(l,f);if(!r[f])r[f]=u.get?{enumerable:!0,configurable:!0,get:Or.bind(n[f]=[u.get.bind(l)])}:u.value!==void 0?u:void 0;else{const h=n[f];h&&(u.get?h.push(u.get.bind(l)):u.value!==void 0&&h.push(()=>u.value))}}}const s={},i=Object.keys(r);for(let a=i.length-1;a>=0;a--){const l=i[a],o=r[l];o&&o.get?Object.defineProperty(s,l,o):s[l]=o?o.value:void 0}return s}function Rn(e,...t){if(Sn&&ne in e){const s=new Set(t.length>1?t.flat():t[0]),i=t.map(a=>new Proxy({get(l){return a.includes(l)?e[l]:void 0},has(l){return a.includes(l)&&l in e},keys(){return a.filter(l=>l in e)}},It));return i.push(new Proxy({get(a){return s.has(a)?void 0:e[a]},has(a){return s.has(a)?!1:a in e},keys(){return Object.keys(e).filter(a=>!s.has(a))}},It)),i}const n={},r=t.map(()=>({}));for(const s of Object.getOwnPropertyNames(e)){const i=Object.getOwnPropertyDescriptor(e,s),a=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let l=!1,o=0;for(const c of t)c.includes(s)&&(l=!0,a?r[o][s]=i.value:Object.defineProperty(r[o],s,i)),++o;l||(a?n[s]=i.value:Object.defineProperty(n,s,i))}return[...r,n]}let jr=0;function yt(){return E.context?E.getNextContextId():`cl-${jr++}`}const Mn=e=>`Stale read from <${e}>.`;function ue(e){const t="fallback"in e&&{fallback:()=>e.fallback};return x(Er(()=>e.each,e.children,t||void 0))}function Tr(e){const t="fallback"in e&&{fallback:()=>e.fallback};return x(Sr(()=>e.each,e.children,t||void 0))}function j(e){const t=e.keyed,n=x(()=>e.when,void 0,void 0),r=t?n:x(n,void 0,{equals:(s,i)=>!s==!i});return x(()=>{const s=r();if(s){const i=e.children;return typeof i=="function"&&i.length>0?T(()=>i(t?s:()=>{if(!T(r))throw Mn("Show");return n()})):i}return e.fallback},void 0,void 0)}function Un(e){const t=pt(()=>e.children),n=x(()=>{const r=t(),s=Array.isArray(r)?r:[r];let i=()=>{};for(let a=0;a<s.length;a++){const l=a,o=s[a],c=i,f=x(()=>c()?void 0:o.when,void 0,void 0),u=o.keyed?f:x(f,void 0,{equals:(h,m)=>!h==!m});i=()=>c()||(u()?[l,f,o]:void 0)}return i});return x(()=>{const r=n()();if(!r)return e.fallback;const[s,i,a]=r,l=a.children;return typeof l=="function"&&l.length>0?T(()=>l(a.keyed?i():()=>{if(T(n)()?.[0]!==s)throw Mn("Match");return i()})):l},void 0,void 0)}function ut(e){return e}const Ir=Je();function mn(e){let t=0,n,r,s,i,a;const[l,o]=N(!1),c=Ar(),f={increment:()=>{++t===1&&o(!0)},decrement:()=>{--t===0&&o(!1)},inFallback:l,effects:[],resolved:!1},u=We();if(E.context&&E.load){const d=E.getContextId();let g=E.load(d);if(g&&(typeof g!="object"||g.s!==1?s=g:E.gather(d)),s&&s!=="$$f"){const[p,v]=N(void 0,{equals:!1});i=p,s.then(()=>{if(E.done)return v();E.gather(d),tt(r),v(),tt()},y=>{a=y,v()})}}const h=Xe(Ir);h&&(n=h.register(f.inFallback));let m;return de(()=>m&&m()),b(c.Provider,{value:f,get children(){return x(()=>{if(a)throw a;if(r=E.context,i)return i(),i=void 0;r&&s==="$$f"&&tt();const d=x(()=>e.children);return x(g=>{const p=f.inFallback(),{showContent:v=!0,showFallback:y=!0}=n?n():{};if((!p||s&&s!=="$$f")&&v)return f.resolved=!0,m&&m(),m=r=s=void 0,xr(f.effects),d();if(y)return m?g:oe(k=>(m=k,r&&(tt({id:r.id+"F",count:0}),r=void 0),e.fallback),u)})})}})}const Lr=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Nr=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Lr]),Dr=new Set(["innerHTML","textContent","innerText","children"]),Rr=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Mr=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Ur(e,t){const n=Mr[e];return typeof n=="object"?n[t]?n.$:void 0:n}const Br=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Vr=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Kr={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},z=e=>x(()=>e());function qr(e,t,n){let r=n.length,s=t.length,i=r,a=0,l=0,o=t[s-1].nextSibling,c=null;for(;a<s||l<i;){if(t[a]===n[l]){a++,l++;continue}for(;t[s-1]===n[i-1];)s--,i--;if(s===a){const f=i<r?l?n[l-1].nextSibling:n[i-l]:o;for(;l<i;)e.insertBefore(n[l++],f)}else if(i===l)for(;a<s;)(!c||!c.has(t[a]))&&t[a].remove(),a++;else if(t[a]===n[i-1]&&n[l]===t[s-1]){const f=t[--s].nextSibling;e.insertBefore(n[l++],t[a++].nextSibling),e.insertBefore(n[--i],f),t[s]=n[i]}else{if(!c){c=new Map;let u=l;for(;u<i;)c.set(n[u],u++)}const f=c.get(t[a]);if(f!=null)if(l<f&&f<i){let u=a,h=1,m;for(;++u<s&&u<i&&!((m=c.get(t[u]))==null||m!==f+h);)h++;if(h>f-l){const d=t[a];for(;l<f;)e.insertBefore(n[l++],d)}else e.replaceChild(n[l++],t[a++])}else a++;else t[a++].remove()}}}const pn="_$DX_DELEGATE";function Gr(e,t,n,r={}){let s;return oe(i=>{s=i,t===document?e():w(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{s(),t.textContent=""}}function _(e,t,n,r){let s;const i=()=>{const l=r?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return l.innerHTML=e,n?l.content.firstChild.firstChild:r?l.firstChild:l.content.firstChild},a=t?()=>T(()=>document.importNode(s||(s=i()),!0)):()=>(s||(s=i())).cloneNode(!0);return a.cloneNode=a,a}function he(e,t=window.document){const n=t[pn]||(t[pn]=new Set);for(let r=0,s=e.length;r<s;r++){const i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,Qr))}}function K(e,t,n){we(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function zr(e,t,n,r){we(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function Hr(e,t,n){we(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function Bn(e,t){we(e)||(t==null?e.removeAttribute("class"):e.className=t)}function Vn(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const s=n[0];e.addEventListener(t,n[0]=i=>s.call(e,n[1],i))}else e.addEventListener(t,n,typeof n!="function"&&n)}function Wr(e,t,n={}){const r=Object.keys(t||{}),s=Object.keys(n);let i,a;for(i=0,a=s.length;i<a;i++){const l=s[i];!l||l==="undefined"||t[l]||(yn(e,l,!1),delete n[l])}for(i=0,a=r.length;i<a;i++){const l=r[i],o=!!t[l];!l||l==="undefined"||n[l]===o||!o||(yn(e,l,!0),n[l]=o)}return n}function Jr(e,t,n){if(!t)return n?K(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let s,i;for(i in n)t[i]==null&&r.removeProperty(i),delete n[i];for(i in t)s=t[i],s!==n[i]&&(r.setProperty(i,s),n[i]=s);return n}function Xr(e,t,n){e.style.setProperty(t,n)}function X(e,t={},n,r){const s={};return r||R(()=>s.children=qe(e,t.children,s.children)),R(()=>typeof t.ref=="function"&&Zt(t.ref,e)),R(()=>Yr(e,t,n,!0,s,!0)),s}function Zt(e,t,n){return T(()=>e(t,n))}function w(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return qe(e,t,r,n);R(s=>qe(e,t(),s,n),r)}function Yr(e,t,n,r,s={},i=!1){t||(t={});for(const a in s)if(!(a in t)){if(a==="children")continue;s[a]=bn(e,a,null,s[a],n,i,t)}for(const a in t){if(a==="children")continue;const l=t[a];s[a]=bn(e,a,l,s[a],n,i,t)}}function Zr(e){let t,n;return!we()||!(t=E.registry.get(n=es()))?e():(E.completed&&E.completed.add(t),E.registry.delete(n),t)}function we(e){return!!E.context&&!E.done&&(!e||e.isConnected)}function Fr(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function yn(e,t,n){const r=t.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)e.classList.toggle(r[s],n)}function bn(e,t,n,r,s,i,a){let l,o,c,f,u;if(t==="style")return Jr(e,n,r);if(t==="classList")return Wr(e,n,r);if(n===r)return r;if(t==="ref")i||n(e);else if(t.slice(0,3)==="on:"){const h=t.slice(3);r&&e.removeEventListener(h,r,typeof r!="function"&&r),n&&e.addEventListener(h,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const h=t.slice(10);r&&e.removeEventListener(h,r,!0),n&&e.addEventListener(h,n,!0)}else if(t.slice(0,2)==="on"){const h=t.slice(2).toLowerCase(),m=Br.has(h);if(!m&&r){const d=Array.isArray(r)?r[0]:r;e.removeEventListener(h,d)}(m||n)&&(Vn(e,h,n,m),m&&he([h]))}else if(t.slice(0,5)==="attr:")K(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")Hr(e,t.slice(5),n);else if((u=t.slice(0,5)==="prop:")||(c=Dr.has(t))||!s&&((f=Ur(t,e.tagName))||(o=Nr.has(t)))||(l=e.nodeName.includes("-")||"is"in a)){if(u)t=t.slice(5),o=!0;else if(we(e))return n;t==="class"||t==="className"?Bn(e,n):l&&!o&&!c?e[Fr(t)]=n:e[f||t]=n}else{const h=s&&t.indexOf(":")>-1&&Kr[t.split(":")[0]];h?zr(e,h,t,n):K(e,Rr[t]||t,n)}return n}function Qr(e){if(E.registry&&E.events&&E.events.find(([o,c])=>c===e))return;let t=e.target;const n=`$$${e.type}`,r=e.target,s=e.currentTarget,i=o=>Object.defineProperty(e,"target",{configurable:!0,value:o}),a=()=>{const o=t[n];if(o&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?o.call(t,c,e):o.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},l=()=>{for(;a()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),E.registry&&!E.done&&(E.done=_$HY.done=!0),e.composedPath){const o=e.composedPath();i(o[0]);for(let c=0;c<o.length-2&&(t=o[c],!!a());c++){if(t._$host){t=t._$host,l();break}if(t.parentNode===s)break}}else l();i(r)}function qe(e,t,n,r,s){const i=we(e);if(i){!n&&(n=[...e.childNodes]);let o=[];for(let c=0;c<n.length;c++){const f=n[c];f.nodeType===8&&f.data.slice(0,2)==="!$"?f.remove():o.push(f)}n=o}for(;typeof n=="function";)n=n();if(t===n)return n;const a=typeof t,l=r!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,a==="string"||a==="number"){if(i||a==="number"&&(t=t.toString(),t===n))return n;if(l){let o=n[0];o&&o.nodeType===3?o.data!==t&&(o.data=t):o=document.createTextNode(t),n=xe(e,n,r,o)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||a==="boolean"){if(i)return n;n=xe(e,n,r)}else{if(a==="function")return R(()=>{let o=t();for(;typeof o=="function";)o=o();n=qe(e,o,n,r)}),()=>n;if(Array.isArray(t)){const o=[],c=n&&Array.isArray(n);if(Lt(o,t,n,s))return R(()=>n=qe(e,o,n,r,!0)),()=>n;if(i){if(!o.length)return n;if(r===void 0)return n=[...e.childNodes];let f=o[0];if(f.parentNode!==e)return n;const u=[f];for(;(f=f.nextSibling)!==r;)u.push(f);return n=u}if(o.length===0){if(n=xe(e,n,r),l)return n}else c?n.length===0?wn(e,o,r):qr(e,n,o):(n&&xe(e),wn(e,o));n=o}else if(t.nodeType){if(i&&t.parentNode)return n=l?[t]:t;if(Array.isArray(n)){if(l)return n=xe(e,n,r,t);xe(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Lt(e,t,n,r){let s=!1;for(let i=0,a=t.length;i<a;i++){let l=t[i],o=n&&n[e.length],c;if(!(l==null||l===!0||l===!1))if((c=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))s=Lt(e,l,o)||s;else if(c==="function")if(r){for(;typeof l=="function";)l=l();s=Lt(e,Array.isArray(l)?l:[l],Array.isArray(o)?o:[o])||s}else e.push(l),s=!0;else{const f=String(l);o&&o.nodeType===3&&o.data===f?e.push(o):e.push(document.createTextNode(f))}}return s}function wn(e,t,n=null){for(let r=0,s=t.length;r<s;r++)e.insertBefore(t[r],n)}function xe(e,t,n,r){if(n===void 0)return e.textContent="";const s=r||document.createTextNode("");if(t.length){let i=!1;for(let a=t.length-1;a>=0;a--){const l=t[a];if(s!==l){const o=l.parentNode===e;!i&&!a?o?e.replaceChild(s,l):e.insertBefore(s,n):o&&l.remove()}else i=!0}}else e.insertBefore(s,n);return[s]}function es(){return E.getNextContextId()}const Kn=!1,ts="http://www.w3.org/2000/svg";function ns(e,t=!1,n=void 0){return t?document.createElementNS(ts,e):document.createElement(e,{is:n})}function rs(e,t){const n=x(e);return x(()=>{const r=n();switch(typeof r){case"function":return T(()=>r(t));case"string":const s=Vr.has(r),i=E.context?Zr():ns(r,s,T(()=>t.is));return X(i,t,s),i}})}function ss(e){const[,t]=Rn(e,["component"]);return rs(()=>e.component,t)}function is(e){return{collections:e,parseCollection(t,n){const r=e[t];if(!r)throw new Error(`Unknown collection: ${String(t)}`);return r.parse(n)},getSchema(t){return e[t]?.schema},getCollections(){return Object.keys(e)}}}let xt;function Ft(e){return{lang:e?.lang??xt?.lang,message:e?.message,abortEarly:e?.abortEarly??xt?.abortEarly,abortPipeEarly:e?.abortPipeEarly??xt?.abortPipeEarly}}let as;function ls(e){return as?.get(e)}let os;function cs(e){return os?.get(e)}let us;function fs(e,t){return us?.get(e)?.get(t)}function qn(e){const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&Object.getPrototypeOf(e)?.constructor?.name)??"null":t}function se(e,t,n,r,s){const i=s&&"input"in s?s.input:n.value,a=s?.expected??e.expects??null,l=s?.received??qn(i),o={kind:e.kind,type:e.type,input:i,expected:a,received:l,message:`Invalid ${t}: ${a?`Expected ${a} but r`:"R"}eceived ${l}`,requirement:e.requirement,path:s?.path,issues:s?.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},c=e.kind==="schema",f=s?.message??e.message??fs(e.reference,o.lang)??(c?cs(o.lang):null)??r.message??ls(o.lang);f!==void 0&&(o.message=typeof f=="function"?f(o):f),c&&(n.typed=!1),n.issues?n.issues.push(o):n.issues=[o]}function ve(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},Ft())}}}function ds(e,t){const n=[...new Set(e)];return n.length>1?`(${n.join(` ${t} `)})`:n[0]??"never"}const hs=/^\d{4}-(?:0[1-9]|1[0-2])-(?:[12]\d|0[1-9]|3[01])$/u;function Gn(e){return{kind:"validation",type:"iso_date",reference:Gn,async:!1,expects:null,requirement:hs,message:e,"~run"(t,n){return t.typed&&!this.requirement.test(t.value)&&se(this,"date",t,n),t}}}function Nt(e,t){return{kind:"validation",type:"max_length",reference:Nt,async:!1,expects:`<=${e}`,requirement:e,message:t,"~run"(n,r){return n.typed&&n.value.length>this.requirement&&se(this,"length",n,r,{received:`${n.value.length}`}),n}}}function H(e){return{kind:"metadata",type:"metadata",reference:H,metadata:e}}function Dt(e,t){return{kind:"validation",type:"min_length",reference:Dt,async:!1,expects:`>=${e}`,requirement:e,message:t,"~run"(n,r){return n.typed&&n.value.length<this.requirement&&se(this,"length",n,r,{received:`${n.value.length}`}),n}}}function zn(e,t){return{kind:"validation",type:"regex",reference:zn,async:!1,expects:`${e}`,requirement:e,message:t,"~run"(n,r){return n.typed&&!this.requirement.test(n.value)&&se(this,"format",n,r),n}}}function gs(e,t,n){return typeof e.fallback=="function"?e.fallback(t,n):e.fallback}function Qt(e,t,n){return typeof e.default=="function"?e.default(t,n):e.default}function Rt(e,t){return{kind:"schema",type:"array",reference:Rt,expects:"Array",async:!1,item:e,message:t,get"~standard"(){return ve(this)},"~run"(n,r){const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let i=0;i<s.length;i++){const a=s[i],l=this.item["~run"]({value:a},r);if(l.issues){const o={type:"array",origin:"value",input:s,key:i,value:a};for(const c of l.issues)c.path?c.path.unshift(o):c.path=[o],n.issues?.push(c);if(n.issues||(n.issues=l.issues),r.abortEarly){n.typed=!1;break}}l.typed||(n.typed=!1),n.value.push(l.value)}}else se(this,"type",n,r);return n}}}function Hn(e){return{kind:"schema",type:"boolean",reference:Hn,expects:"boolean",async:!1,message:e,get"~standard"(){return ve(this)},"~run"(t,n){return typeof t.value=="boolean"?t.typed=!0:se(this,"type",t,n),t}}}function pe(e,t){return{kind:"schema",type:"object",reference:pe,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return ve(this)},"~run"(n,r){const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const i in this.entries){const a=this.entries[i];if(i in s||(a.type==="exact_optional"||a.type==="optional"||a.type==="nullish")&&a.default!==void 0){const l=i in s?s[i]:Qt(a),o=a["~run"]({value:l},r);if(o.issues){const c={type:"object",origin:"value",input:s,key:i,value:l};for(const f of o.issues)f.path?f.path.unshift(c):f.path=[c],n.issues?.push(f);if(n.issues||(n.issues=o.issues),r.abortEarly){n.typed=!1;break}}o.typed||(n.typed=!1),n.value[i]=o.value}else if(a.fallback!==void 0)n.value[i]=gs(a);else if(a.type!=="exact_optional"&&a.type!=="optional"&&a.type!=="nullish"&&(se(this,"key",n,r,{input:void 0,expected:`"${i}"`,path:[{type:"object",origin:"key",input:s,key:i,value:s[i]}]}),r.abortEarly))break}}else se(this,"type",n,r);return n}}}function ye(e,t){return{kind:"schema",type:"optional",reference:ye,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return ve(this)},"~run"(n,r){return n.value===void 0&&(this.default!==void 0&&(n.value=Qt(this,n,r)),n.value===void 0)?(n.typed=!0,n):this.wrapped["~run"](n,r)}}}function Wn(e,t){return{kind:"schema",type:"picklist",reference:Wn,expects:ds(e.map(qn),"|"),async:!1,options:e,message:t,get"~standard"(){return ve(this)},"~run"(n,r){return this.options.includes(n.value)?n.typed=!0:se(this,"type",n,r),n}}}function te(e){return{kind:"schema",type:"string",reference:te,expects:"string",async:!1,message:e,get"~standard"(){return ve(this)},"~run"(t,n){return typeof t.value=="string"?t.typed=!0:se(this,"type",t,n),t}}}function Z(...e){return{...e[0],pipe:e,get"~standard"(){return ve(this)},"~run"(t,n){for(const r of e)if(r.kind!=="metadata"){if(t.issues&&(r.kind==="schema"||r.kind==="transformation")){t.typed=!1;break}(!t.issues||!n.abortEarly&&!n.abortPipeEarly)&&(t=r["~run"](t,n))}return t}}}function Mt(e,t,n){const r=e["~run"]({value:t},Ft(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}async function ms(e,t,n){const r=await e["~run"]({value:t},Ft(n));return{typed:r.typed,success:!r.issues,output:r.value,issues:r.issues}}function F(e){return{"~plasticine":e}}function Ae(e){const t=Z(te(),H(F({ui:"text",label:e?.label,placeholder:e?.placeholder})));return e?.minLength!==void 0&&e?.maxLength!==void 0?Z(te(),Dt(e.minLength),Nt(e.maxLength),H(F({ui:"text",label:e?.label,placeholder:e?.placeholder}))):e?.minLength!==void 0?Z(te(),Dt(e.minLength),H(F({ui:"text",label:e?.label,placeholder:e?.placeholder}))):e?.maxLength!==void 0?Z(te(),Nt(e.maxLength),H(F({ui:"text",label:e?.label,placeholder:e?.placeholder}))):t}function ps(e){return Z(te(),H(F({ui:"textarea",label:e?.label,placeholder:e?.placeholder})))}function At(e){return Z(te(),H(F({ui:"markdown",label:e?.label,placeholder:e?.placeholder})))}function ys(e){return Z(Hn(),H(F({ui:"boolean",label:e?.label,description:e?.description})))}function bs(e){return Z(te(),Gn(),H(F({ui:"date",label:e?.label})))}function rt(e){return Z(te(),zn(/^[a-z0-9]+(?:-[a-z0-9]+)*$/,"Must be a valid slug (lowercase, hyphens only)"),H(F({ui:"slug",label:e?.label,placeholder:e?.placeholder||"my-slug"})))}function Pt(e){return Z(te(),H(F({ui:"image",label:e?.label,accept:e?.accept||"image/*",path:e?.path})))}function ws(e,t){return Z(Wn(e),H(F({ui:"select",label:t?.label,options:e})))}function vs(e,t){return Z(te(),H(F({ui:"reference",label:t?.label,collection:e})))}class Jn extends Error{issues;constructor(t){super("Schema validation failed across all versions"),this.issues=t}}function Ct(e){return{schema:e,parse(t){const n=Mt(e,t);if(n.success)return n.output;throw new Jn([[n.issues[0],...n.issues.slice(1)]])},version(t,n){return Xn([{schema:e,transform:n}],t)}}}function Xn(e,t){return{schema:t,parse(n){const r=Mt(t,n);if(r.success)return r.output;const s=[];let i=!1;for(const a of e){const l=Mt(a.schema,n);if(s.push({...a,...l}),l.success){i=!0;break}}if(i)return s.toReversed().reduce((a,{transform:l})=>l(a),n);throw new Jn(s.map(({issues:a})=>a).filter(a=>a!==void 0))},version(n,r){return Xn([{schema:t,transform:r},...e],n)}}}function en(e){return"entries"in e&&typeof e.entries=="object"?e.entries:"wrapped"in e&&e.wrapped?en(e.wrapped):null}function Le(e){if("pipe"in e&&Array.isArray(e.pipe)){for(const t of e.pipe)if(t&&typeof t=="object"&&"type"in t&&t.type==="metadata"){const n=t.metadata;return n&&typeof n=="object"&&"~plasticine"in n?n["~plasticine"]:n||{}}}return"wrapped"in e&&e.wrapped?Le(e.wrapped):{}}function $s(e,t){const n=e.getCollections(),r={};for(const s of n){const i={async list(){return t.listItems(s)},async get(a){const l=await t.getItem(s,a);return e.parseCollection(s,l)},async getAll(){const a=await t.listItems(s);return await Promise.all(a.map(async o=>{const c=await t.getItem(s,o),f=e.parseCollection(s,c);return{id:o,data:f}}))},async has(a){return t.hasItem(s,a)}};r[s]=i}return r}function _s(e){const{owner:t,repo:n,branch:r="main",contentPath:s="content"}=e,i=`https://raw.githubusercontent.com/${t}/${n}/${r}/${s}`,a=`https://api.github.com/repos/${t}/${n}/contents/${s}`;return{async listItems(l){const o=await fetch(`${a}/${l}?ref=${r}`,{headers:{Accept:"application/vnd.github.v3+json"}});if(!o.ok){if(o.status===404)return[];throw new Error(`Failed to list items: ${o.statusText}`)}return(await o.json()).filter(f=>f.type==="file"&&f.name.endsWith(".json")).map(f=>f.name.replace(/\.json$/,""))},async getItem(l,o){const c=await fetch(`${i}/${l}/${o}.json`);if(!c.ok)throw new Error(`Failed to get item ${l}/${o}: ${c.statusText}`);return c.json()},async hasItem(l,o){return(await fetch(`${i}/${l}/${o}.json`,{method:"HEAD"})).ok}}}function ks(e,t){return $s(e,_s(t))}const Pe="https://api.github.com";class xs{token;config;constructor(t,n){this.token=t,this.config={branch:"main",contentPath:"content",...n}}get headers(){return{Accept:"application/vnd.github+json",Authorization:`Bearer ${this.token}`,"X-GitHub-Api-Version":"2022-11-28"}}buildPath(t,n){const r=[this.config.contentPath,t];return n&&r.push(n),r.filter(Boolean).join("/")}async listCollection(t){return this.listFolder(this.buildPath(t))}async listFolder(t,n=!1){const r=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${t}?ref=${this.config.branch}`,s=await fetch(r,{headers:this.headers});if(s.status===404)return[];if(!s.ok)throw new Error(`Failed to list folder: ${s.statusText}`);const i=await s.json(),a=Array.isArray(i)?i:[];if(n){const l=a.filter(o=>o.type==="dir");for(const o of l){const c=await this.listFolder(o.path,!0);a.push(...c)}}return a}async getFile(t,n){const r=this.buildPath(t,n),s=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${r}?ref=${this.config.branch}`,i=await fetch(s,{headers:this.headers});if(!i.ok)throw new Error(`Failed to get file: ${i.statusText}`);return i.json()}async getJSON(t,n){const r=await this.getFile(t,n),s=atob(r.content);return{data:JSON.parse(s),sha:r.sha}}async saveFile(t,n,r,s,i){const a=this.buildPath(t,n),l=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${a}`,o=3;let c=i,f=null;for(let u=0;u<o;u++){if(u>0&&(await new Promise(g=>setTimeout(g,1e3*u)),c))try{c=(await this.getFile(t,n)).sha}catch{c=void 0}const h={message:s,content:btoa(r),branch:this.config.branch};c&&(h.sha=c);const m=await fetch(l,{method:"PUT",headers:this.headers,body:JSON.stringify(h)});if(m.ok)return{sha:(await m.json()).content.sha};const d=await m.json();if(m.status===409&&u<o-1){f=new Error(d.message||m.statusText);continue}throw new Error(`Failed to save file: ${d.message||m.statusText}`)}throw f||new Error("Failed to save file after retries")}async saveJSON(t,n,r,s,i){const a=JSON.stringify(r,null,2);return this.saveFile(t,n,a,s,i)}async uploadFile(t,n="uploads"){const r=Date.now(),s=t.name.replace(/[^a-zA-Z0-9.-]/g,"_"),i=`${r}-${s}`,a=`${this.config.contentPath}/${n}/${i}`,l=await this.fileToBase64(t),o=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${a}`,c=3;let f=null;for(let u=0;u<c;u++){u>0&&await new Promise(d=>setTimeout(d,1e3*u));const h=await fetch(o,{method:"PUT",headers:this.headers,body:JSON.stringify({message:`cms: Upload ${t.name}`,content:l,branch:this.config.branch})});if(h.ok){const d=await h.json();return{url:`https://raw.githubusercontent.com/${this.config.owner}/${this.config.repo}/${this.config.branch}/${a}`,sha:d.content.sha}}const m=await h.json();if(h.status===409&&u<c-1){f=new Error(m.message||h.statusText);continue}throw new Error(`Failed to upload file: ${m.message||h.statusText}`)}throw f||new Error("Failed to upload file after retries")}fileToBase64(t){return new Promise((n,r)=>{const s=new FileReader;s.onload=()=>{const a=s.result.split(",")[1];n(a)},s.onerror=r,s.readAsDataURL(t)})}async deleteFile(t,n,r,s){const i=this.buildPath(t,n);await this.deleteFileByPath(i,r,s)}async deleteFileByPath(t,n,r){const s=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${t}`,i=await fetch(s,{method:"DELETE",headers:this.headers,body:JSON.stringify({message:n,sha:r,branch:this.config.branch})});if(!i.ok){const a=await i.json();throw new Error(`Failed to delete file: ${a.message||i.statusText}`)}}async ensureContentDirectory(){const t=`${Pe}/repos/${this.config.owner}/${this.config.repo}/contents/${this.config.contentPath}?ref=${this.config.branch}`;(await fetch(t,{headers:this.headers})).status===404&&await this.saveFile("",".gitkeep","","Initialize content directory")}}function As(e){function t(n){const r=new xs(n.token,n),s=n.branch||"main",i=n.contentPath||"content";return{content:{async listCollection(c){const f=await r.listCollection(c),u=[];for(const h of f)if(h.type==="file"&&h.name.endsWith(".json"))try{const{data:m,sha:d}=await r.getJSON(c,h.name);u.push({id:h.name.replace(".json",""),sha:d,data:m})}catch(m){console.error(`Failed to load ${h.name}:`,m)}return u},async getItem(c,f){const{data:u,sha:h}=await r.getJSON(c,`${f}.json`);return{id:f,sha:h,data:u}},async saveItem(c,f,u,h){const m=`${f}.json`,d=h?`cms: Update ${c}/${m}`:`cms: Create ${c}/${m}`;return r.saveJSON(c,m,u,d,h)},async deleteItem(c,f,u){const h=`${f}.json`,m=`cms: Delete ${c}/${h}`;await r.deleteFile(c,h,m,u)}},media:{async listMedia(){const c=`${i}/uploads`;return(await r.listFolder(c,!0)).filter(u=>u.type==="file").map(u=>({name:u.name,path:u.path,sha:u.sha,size:u.size,url:`https://raw.githubusercontent.com/${n.owner}/${n.repo}/${s}/${u.path}`}))},async uploadFile(c,f){const u=f?`uploads/${f}`:"uploads";return r.uploadFile(c,u)},async deleteFile(c,f){await r.deleteFileByPath(c,`cms: Delete media ${c}`,f)}},config:{async readFile(c){const f=`https://api.github.com/repos/${n.owner}/${n.repo}/contents/${c}?ref=${s}`,u=await fetch(f,{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${n.token}`}});if(!u.ok)throw new Error(`Failed to read file: ${u.statusText}`);const h=await u.json();return{content:atob(h.content),sha:h.sha}},async writeFile(c,f,u){const h=`https://api.github.com/repos/${n.owner}/${n.repo}/contents/${c}`,m=await fetch(h,{method:"PUT",headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${n.token}`},body:JSON.stringify({message:`cms: Update ${c}`,content:btoa(f),branch:s,...u?{sha:u}:{}})});if(!m.ok){const g=await m.json();throw new Error(`Failed to write file: ${g.message||m.statusText}`)}return{sha:(await m.json()).content.sha}}}}}return{config:e,createBackend:n=>t({...e,token:n})}}var Ps=_("<div class=auth-error>"),Cs=_('<div class=auth><div class=auth-container><h1 class=auth-title>Plasticine CMS</h1><p class=auth-subtitle>Git-based content management</p><form class=token-form><p class=token-instructions>Create a <a href="https://github.com/settings/tokens/new?scopes=repo&amp;description=Plasticine%20CMS"target=_blank rel="noopener noreferrer">Personal Access Token</a> with <code>repo</code> scope.</p><input type=password class=input placeholder=ghp_xxxxxxxxxxxx><button type=submit class="btn btn-primary">');const Es="https://api.github.com",Et="plasticine_token";async function vn(e){const t=await fetch(`${Es}/user`,{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${e}`,"X-GitHub-Api-Version":"2022-11-28"}});if(!t.ok)throw new Error("Invalid token or API error");return t.json()}function Ss(e){const t={get:()=>localStorage.getItem(Et),set:n=>localStorage.setItem(Et,n),remove:()=>localStorage.removeItem(Et)};return{async checkAuth(){const n=t.get();if(!n)return null;try{return{user:await vn(n),token:n}}catch{return t.remove(),null}},async logout(){t.remove()},LoginScreen(n){const[r,s]=N(""),[i,a]=N(!1),[l,o]=N(null),c=async f=>{f.preventDefault();const u=r().trim();if(u){a(!0),o(null);try{const h=await vn(u);t.set(u),n.onSuccess({user:h,token:u})}catch(h){o(h instanceof Error?h.message:"Authentication failed")}finally{a(!1)}}};return(()=>{var f=Cs(),u=f.firstChild,h=u.firstChild,m=h.nextSibling,d=m.nextSibling,g=d.firstChild,p=g.nextSibling,v=p.nextSibling;return w(u,b(j,{get when(){return l()},get children(){var y=Ps();return w(y,l),y}}),d),d.addEventListener("submit",c),p.$$input=y=>s(y.currentTarget.value),w(v,()=>i()?"Verifying...":"Login"),R(y=>{var k=i(),P=i()||!r().trim();return k!==y.e&&(p.disabled=y.e=k),P!==y.t&&(v.disabled=y.t=P),y},{e:void 0,t:void 0}),R(()=>p.value=r()),f})()}}}he(["input"]);function Yn(){let e=new Set;function t(s){return e.add(s),()=>e.delete(s)}let n=!1;function r(s,i){if(n)return!(n=!1);const a={to:s,options:i,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const l of e)l.listener({...a,from:l.location,retry:o=>{o&&(n=!0),l.navigate(s,{...i,resolve:!1})}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}let Ut;function tn(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Ut=window.history.state._depth}tn();function Os(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function js(e,t){let n=!1;return()=>{const r=Ut;tn();const s=r==null?null:Ut-r;if(n){n=!1;return}s&&t(s)?(n=!0,window.history.go(-s)):e()}}const Ts=/^(?:[a-z0-9]+:)?\/\//i,Is=/^\/+|(\/)\/+$/g,nn="http://sr";function Me(e,t=!1){const n=e.replace(Is,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function it(e,t,n){if(Ts.test(t))return;const r=Me(e),s=n&&Me(n);let i="";return!s||t.startsWith("/")?i=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+s:i=s,(i||"/")+Me(t,!i)}function Ls(e,t){if(e==null)throw new Error(t);return e}function Ns(e,t){return Me(e).replace(/\/*(\*.*)?$/g,"")+Me(t)}function Zn(e){const t={};return e.searchParams.forEach((n,r)=>{r in t?Array.isArray(t[r])?t[r].push(n):t[r]=[t[r],n]:t[r]=n}),t}function Ds(e,t,n){const[r,s]=e.split("/*",2),i=r.split("/").filter(Boolean),a=i.length;return l=>{const o=l.split("/").filter(Boolean),c=o.length-a;if(c<0||c>0&&s===void 0&&!t)return null;const f={path:a?"":"/",params:{}},u=h=>n===void 0?void 0:n[h];for(let h=0;h<a;h++){const m=i[h],d=m[0]===":",g=d?o[h]:o[h].toLowerCase(),p=d?m.slice(1):m.toLowerCase();if(d&&St(g,u(p)))f.params[p]=g;else if(d||!St(g,p))return null;f.path+=`/${g}`}if(s){const h=c?o.slice(-c).join("/"):"";if(St(h,u(s)))f.params[s]=h;else return null}return f}}function St(e,t){const n=r=>r===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Rs(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((s,i)=>s+(i.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function Fn(e){const t=new Map,n=We();return new Proxy({},{get(r,s){return t.has(s)||Jt(n,()=>t.set(s,x(()=>e()[s]))),t.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(r,s){return s in e()}})}function Ms(e,t){const n=new URLSearchParams(e);Object.entries(t).forEach(([s,i])=>{i==null||i===""||i instanceof Array&&!i.length?n.delete(s):i instanceof Array?(n.delete(s),i.forEach(a=>{n.append(s,String(a))})):n.set(s,String(i))});const r=n.toString();return r?`?${r}`:""}function Qn(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const s=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)s.push(n+=t[1]),r=r.slice(t[0].length);return Qn(r).reduce((i,a)=>[...i,...s.map(l=>l+a)],[])}const Us=100,er=Je(),tr=Je(),bt=()=>Ls(Xe(er),"<A> and 'use' router primitives can be only used inside a Route."),rn=()=>bt().navigatorFactory(),Bs=()=>bt().location,sn=()=>{const e=Bs(),t=rn(),n=(r,s)=>{const i=T(()=>Ms(e.search,r)+e.hash);t(i,{scroll:!1,resolve:!1,...s})};return[e.query,n]};function Vs(e,t=""){const{component:n,preload:r,load:s,children:i,info:a}=e,l=!i||Array.isArray(i)&&!i.length,o={key:e,component:n,preload:r||s,info:a};return nr(e.path).reduce((c,f)=>{for(const u of Qn(f)){const h=Ns(t,u);let m=l?h:h.split("/*",1)[0];m=m.split("/").map(d=>d.startsWith(":")||d.startsWith("*")?d:encodeURIComponent(d)).join("/"),c.push({...o,originalPath:f,pattern:m,matcher:Ds(m,!l,e.matchFilters)})}return c},[])}function Ks(e,t=0){return{routes:e,score:Rs(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let s=e.length-1;s>=0;s--){const i=e[s],a=i.matcher(n);if(!a)return null;r.unshift({...a,route:i})}return r}}}function nr(e){return Array.isArray(e)?e:[e]}function rr(e,t="",n=[],r=[]){const s=nr(e);for(let i=0,a=s.length;i<a;i++){const l=s[i];if(l&&typeof l=="object"){l.hasOwnProperty("path")||(l.path="");const o=Vs(l,t);for(const c of o){n.push(c);const f=Array.isArray(l.children)&&l.children.length===0;if(l.children&&!f)rr(l.children,c.pattern,n,r);else{const u=Ks([...n],r.length);r.push(u)}n.pop()}}}return n.length?r:r.sort((i,a)=>a.score-i.score)}function Ot(e,t){for(let n=0,r=e.length;n<r;n++){const s=e[n].matcher(t);if(s)return s}return[]}function qs(e,t,n){const r=new URL(nn),s=x(f=>{const u=e();try{return new URL(u,r)}catch{return console.error(`Invalid path ${u}`),f}},r,{equals:(f,u)=>f.href===u.href}),i=x(()=>s().pathname),a=x(()=>s().search,!0),l=x(()=>s().hash),o=()=>"",c=Wt(a,()=>Zn(s()));return{get pathname(){return i()},get search(){return a()},get hash(){return l()},get state(){return t()},get key(){return o()},query:n?n(c):Fn(c)}}let be;function sr(){return be}let Oe=!1;function Gs(){return Oe}function $n(e){Oe=e}function zs(e,t,n,r={}){const{signal:[s,i],utils:a={}}=e,l=a.parsePath||(A=>A),o=a.renderPath||(A=>A),c=a.beforeLeave||Yn(),f=it("",r.base||"");if(f===void 0)throw new Error(`${f} is not a valid base path`);f&&!s().value&&i({value:f,replace:!0,scroll:!1});const[u,h]=N(!1);let m;const d=(A,S)=>{S.value===g()&&S.state===v()||(m===void 0&&h(!0),be=A,m=S,Re(()=>{m===S&&(p(m.value),y(m.state),I[1](G=>G.filter(_e=>_e.pending)))}).finally(()=>{m===S&&ae(()=>{be=void 0,A==="navigate"&&D(m),h(!1),m=void 0})}))},[g,p]=N(s().value),[v,y]=N(s().state),k=qs(g,v,a.queryWrapper),P=[],I=N([]),M=x(()=>typeof r.transformUrl=="function"?Ot(t(),r.transformUrl(k.pathname)):Ot(t(),k.pathname)),le=()=>{const A=M(),S={};for(let G=0;G<A.length;G++)Object.assign(S,A[G].params);return S},me=a.paramsWrapper?a.paramsWrapper(le,t):Fn(le),$e={pattern:f,path:()=>f,outlet:()=>null,resolvePath(A){return it(f,A)}};return R(Wt(s,A=>d("native",A),{defer:!0})),{base:$e,location:k,params:me,isRouting:u,renderPath:o,parsePath:l,navigatorFactory:L,matches:M,beforeLeave:c,preloadRoute:q,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:I};function Qe(A,S,G){T(()=>{if(typeof S=="number"){S&&(a.go?a.go(S):console.warn("Router integration does not support relative routing"));return}const _e=!S||S[0]==="?",{replace:vt,resolve:ke,scroll:$t,state:Ne}={replace:!1,resolve:!_e,scroll:!0,...G},et=ke?A.resolvePath(S):it(_e&&k.pathname||"",S);if(et===void 0)throw new Error(`Path '${S}' is not a routable path`);if(P.length>=Us)throw new Error("Too many redirects");const cn=g();(et!==cn||Ne!==v())&&(Kn||c.confirm(et,G)&&(P.push({value:cn,replace:vt,scroll:$t,state:v()}),d("navigate",{value:et,state:Ne})))})}function L(A){return A=A||Xe(tr)||$e,(S,G)=>Qe(A,S,G)}function D(A){const S=P[0];S&&(i({...A,replace:S.replace,scroll:S.scroll}),P.length=0)}function q(A,S){const G=Ot(t(),A.pathname),_e=be;be="preload";for(let vt in G){const{route:ke,params:$t}=G[vt];ke.component&&ke.component.preload&&ke.component.preload();const{preload:Ne}=ke;Oe=!0,S&&Ne&&Jt(n(),()=>Ne({params:$t,location:{pathname:A.pathname,search:A.search,hash:A.hash,query:Zn(A),state:null,key:""},intent:"preload"})),Oe=!1}be=_e}}function Hs(e,t,n,r){const{base:s,location:i,params:a}=e,{pattern:l,component:o,preload:c}=r().route,f=x(()=>r().path);o&&o.preload&&o.preload(),Oe=!0;const u=c?c({params:a,location:i,intent:be||"initial"}):void 0;return Oe=!1,{parent:t,pattern:l,path:f,outlet:()=>o?b(o,{params:a,location:i,data:u,get children(){return n()}}):n(),resolvePath(m){return it(s.path(),m,f())}}}const Ws=e=>t=>{const{base:n}=t,r=pt(()=>t.children),s=x(()=>rr(r(),t.base||""));let i;const a=zs(e,s,()=>i,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),b(er.Provider,{value:a,get children(){return b(Js,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[z(()=>(i=We())&&null),b(Xs,{routerState:a,get branches(){return s()}})]}})}})};function Js(e){const t=e.routerState.location,n=e.routerState.params,r=x(()=>e.preload&&T(()=>{$n(!0),e.preload({params:n,location:t,intent:sr()||"initial"}),$n(!1)}));return b(j,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:s=>b(s,{params:n,location:t,get data(){return r()},get children(){return e.children}})})}function Xs(e){const t=[];let n;const r=x(Wt(e.routerState.matches,(s,i,a)=>{let l=i&&s.length===i.length;const o=[];for(let c=0,f=s.length;c<f;c++){const u=i&&i[c],h=s[c];a&&u&&h.route.key===u.route.key?o[c]=a[c]:(l=!1,t[c]&&t[c](),oe(m=>{t[c]=m,o[c]=Hs(e.routerState,o[c-1]||e.routerState.base,_n(()=>r()[c+1]),()=>{const d=e.routerState.matches();return d[c]??d[0]})}))}return t.splice(s.length).forEach(c=>c()),a&&l?a:(n=o[0],o)}));return _n(()=>r()&&n)()}const _n=e=>()=>b(j,{get when(){return e()},keyed:!0,children:t=>b(tr.Provider,{value:t,get children(){return t.outlet()}})}),Bt=e=>{const t=pt(()=>e.children);return J(e,{get children(){return t()}})};function Ys([e,t],n,r){return[e,r?s=>t(r(s)):t]}function Zs(e){let t=!1;const n=s=>typeof s=="string"?{value:s}:s,r=Ys(N(n(e.get()),{equals:(s,i)=>s.value===i.value&&s.state===i.state}),void 0,s=>(!t&&e.set(s),E.registry&&!E.done&&(E.done=!0),s));return e.init&&de(e.init((s=e.get())=>{t=!0,r[1](n(s)),t=!1})),Ws({signal:r,create:e.create,utils:e.utils})}function Fs(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Qs(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const ei="Location",ti=5e3,ni=18e4;let Ge=new Map;setInterval(()=>{const e=Date.now();for(let[t,n]of Ge.entries())!n[4].count&&e-n[0]>ni&&Ge.delete(t)},3e5);function Ze(){return Ge}function ri(e,t=!0){return Re(()=>{const n=Date.now();ir(e,r=>{t&&(r[0]=0),r[4][1](n)})})}function ir(e,t){e&&!Array.isArray(e)&&(e=[e]);for(let n of Ge.keys())(e===void 0||si(n,e))&&t(Ge.get(n))}function Fe(e,t){e.GET&&(e=e.GET);const n=((...r)=>{const s=Ze(),i=sr(),a=Gs(),o=We()?rn():void 0,c=Date.now(),f=t+Vt(r);let u=s.get(f),h;if(lt()&&!Kn&&(h=!0,de(()=>u[4].count--)),u&&u[0]&&(i==="native"||u[4].count||Date.now()-u[0]<ti)){h&&(u[4].count++,u[4][0]()),u[3]==="preload"&&i!=="preload"&&(u[0]=c);let g=u[1];return i!=="preload"&&(g="then"in u[1]?u[1].then(d(!1),d(!0)):d(!1)(u[1]),i==="navigate"&&Re(()=>u[4][1](u[0]))),a&&"then"in g&&g.catch(()=>{}),g}let m;return E.has&&E.has(f)?(m=E.load(f),delete globalThis._$HY.r[f]):m=e(...r),u?(u[0]=c,u[1]=m,u[3]=i,i==="navigate"&&Re(()=>u[4][1](u[0]))):(s.set(f,u=[c,m,,i,N(c)]),u[4].count=0),h&&(u[4].count++,u[4][0]()),i!=="preload"&&(m="then"in m?m.then(d(!1),d(!0)):d(!1)(m)),a&&"then"in m&&m.catch(()=>{}),m;function d(g){return async p=>{if(p instanceof Response){const v=p.headers.get(ei);if(v!==null){o&&v.startsWith("/")?Re(()=>{o(v,{replace:!0})}):window.location.href=v;return}p.customBody&&(p=await p.customBody())}if(g)throw p;return u[2]=p,p}}});return n.keyFor=(...r)=>t+Vt(r),n.key=t,n}Fe.get=e=>Ze().get(e)[2];Fe.set=(e,t)=>{const n=Ze(),r=Date.now();let s=n.get(e);s?(s[0]=r,s[1]=Promise.resolve(t),s[2]=t,s[3]="preload"):(n.set(e,s=[r,Promise.resolve(t),t,"preload",N(r)]),s[4].count=0)};Fe.delete=e=>Ze().delete(e);Fe.clear=()=>Ze().clear();function si(e,t){for(let n of t)if(n&&e.startsWith(n))return!0;return!1}function Vt(e){return JSON.stringify(e,(t,n)=>ii(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function ii(e){let t;return e!=null&&typeof e=="object"&&(!(t=Object.getPrototypeOf(e))||t===Object.prototype)}const Kt=new Map;function ai(e,t){const n=bt(),r=x(()=>n.submissions[0]().filter(s=>s.url===e.base&&!0));return new Proxy([],{get(s,i){return i===Be?r():i==="pending"?r().some(a=>!a.result):r()[i]},has(s,i){return i in r()}})}function ar(e,t){const n=ai(e);return new Proxy({},{get(r,s){return n.length===0&&s==="clear"||s==="retry"?()=>{}:n[n.length-1]?.[s]}})}function lr(e){const t=bt();return(...n)=>e.apply({r:t},n)}function wt(e,t={}){function n(...i){const a=this.r,l=this.f,o=(a.singleFlight&&e.withOptions?e.withOptions({headers:{"X-Single-Flight":"true"}}):e)(...i),[c,f]=N();let u;function h(m){return async d=>{const g=await oi(d,m,a.navigatorFactory());let p=null;if(r.onComplete?.({...u,result:g?.data,error:g?.error,pending:!1,retry(){return p=u.retry()}}),p)return p;if(!g)return u.clear();if(f(g),g.error&&!l)throw g.error;return g.data}}return a.submissions[1](m=>[...m,u={input:i,url:s,get result(){return c()?.data},get error(){return c()?.error},get pending(){return!c()},clear(){a.submissions[1](d=>d.filter(g=>g!==u))},retry(){return f(void 0),e(...i).then(h(),h(!0))}}]),o.then(h(),h(!0))}const r=typeof t=="string"?{name:t}:t,s=e.url||r.name&&`https://action/${r.name}`||`https://action/${li(e.toString())}`;return n.base=s,or(n,s)}function or(e,t){return e.toString=()=>{if(!t)throw new Error("Client Actions need explicit names if server rendered");return t},e.with=function(...n){const r=function(...i){return e.call(this,...n,...i)};r.base=e.base;const s=new URL(t,nn);return s.searchParams.set("args",Vt(n)),or(r,(s.origin==="https://action"?s.origin:"")+s.pathname+s.search)},e.url=t,Kt.set(t,e),We()&&de(()=>Kt.delete(t)),e}const li=e=>e.split("").reduce((t,n)=>(t<<5)-t+n.charCodeAt(0)|0,0);async function oi(e,t,n){let r,s,i,a;if(e instanceof Response){if(e.headers.has("X-Revalidate")&&(i=e.headers.get("X-Revalidate").split(",")),e.customBody&&(r=s=await e.customBody(),e.headers.has("X-Single-Flight")&&(r=r._$value,delete s._$value,a=Object.keys(s))),e.headers.has("Location")){const l=e.headers.get("Location")||"/";l.startsWith("http")?window.location.href=l:n(l)}}else{if(t)return{error:e};r=e}return ir(i,l=>l[0]=0),a&&a.forEach(l=>Fe.set(l,s[l])),await ri(i,!1),r!=null?{data:r}:void 0}function ci(e=!0,t=!1,n="/_server",r){return s=>{const i=s.base.path(),a=s.navigatorFactory(s.base);let l,o;function c(g){return g.namespaceURI==="http://www.w3.org/2000/svg"}function f(g){if(g.defaultPrevented||g.button!==0||g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)return;const p=g.composedPath().find(M=>M instanceof Node&&M.nodeName.toUpperCase()==="A");if(!p||t&&!p.hasAttribute("link"))return;const v=c(p),y=v?p.href.baseVal:p.href;if((v?p.target.baseVal:p.target)||!y&&!p.hasAttribute("state"))return;const P=(p.getAttribute("rel")||"").split(/\s+/);if(p.hasAttribute("download")||P&&P.includes("external"))return;const I=v?new URL(y,document.baseURI):new URL(y);if(!(I.origin!==window.location.origin||i&&I.pathname&&!I.pathname.toLowerCase().startsWith(i.toLowerCase())))return[p,I]}function u(g){const p=f(g);if(!p)return;const[v,y]=p,k=s.parsePath(y.pathname+y.search+y.hash),P=v.getAttribute("state");g.preventDefault(),a(k,{resolve:!1,replace:v.hasAttribute("replace"),scroll:!v.hasAttribute("noscroll"),state:P?JSON.parse(P):void 0})}function h(g){const p=f(g);if(!p)return;const[v,y]=p;r&&(y.pathname=r(y.pathname)),s.preloadRoute(y,v.getAttribute("preload")!=="false")}function m(g){clearTimeout(l);const p=f(g);if(!p)return o=null;const[v,y]=p;o!==v&&(r&&(y.pathname=r(y.pathname)),l=setTimeout(()=>{s.preloadRoute(y,v.getAttribute("preload")!=="false"),o=v},20))}function d(g){if(g.defaultPrevented)return;let p=g.submitter&&g.submitter.hasAttribute("formaction")?g.submitter.getAttribute("formaction"):g.target.getAttribute("action");if(!p)return;if(!p.startsWith("https://action/")){const y=new URL(p,nn);if(p=s.parsePath(y.pathname+y.search),!p.startsWith(n))return}if(g.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const v=Kt.get(p);if(v){g.preventDefault();const y=new FormData(g.target,g.submitter);v.call({r:s,f:g.target},g.target.enctype==="multipart/form-data"?y:new URLSearchParams(y))}}he(["click","submit"]),document.addEventListener("click",u),e&&(document.addEventListener("mousemove",m,{passive:!0}),document.addEventListener("focusin",h,{passive:!0}),document.addEventListener("touchstart",h,{passive:!0})),document.addEventListener("submit",d),de(()=>{document.removeEventListener("click",u),e&&(document.removeEventListener("mousemove",m),document.removeEventListener("focusin",h),document.removeEventListener("touchstart",h)),document.removeEventListener("submit",d)})}}function cr(e){const t=()=>{const r=window.location.pathname.replace(/^\/+/,"/")+window.location.search,s=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:r+window.location.hash,state:s}},n=Yn();return Zs({get:t,set({value:r,replace:s,scroll:i,state:a}){s?window.history.replaceState(Os(a),"",r):window.history.pushState(a,"",r),Qs(decodeURIComponent(window.location.hash.slice(1)),i),tn()},init:r=>Fs(window,"popstate",js(r,s=>{if(s)return!n.confirm(s);{const i=t();return!n.confirm(i.value,{state:i.state})}})),create:ci(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:r=>window.history.go(r),beforeLeave:n}})(e)}const ft=Symbol("store-raw"),Ee=Symbol("store-node"),ie=Symbol("store-has"),ur=Symbol("store-self");function fr(e){let t=e[ne];if(!t&&(Object.defineProperty(e,ne,{value:t=new Proxy(e,di)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,i=n.length;s<i;s++){const a=n[s];r[a].get&&Object.defineProperty(e,a,{enumerable:r[a].enumerable,get:r[a].get.bind(t)})}}return t}function je(e){let t;return e!=null&&typeof e=="object"&&(e[ne]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Te(e,t=new Set){let n,r,s,i;if(n=e!=null&&e[ft])return n;if(!je(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,l=e.length;a<l;a++)s=e[a],(r=Te(s,t))!==s&&(e[a]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const a=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let o=0,c=a.length;o<c;o++)i=a[o],!l[i].get&&(s=e[i],(r=Te(s,t))!==s&&(e[i]=r))}return e}function dt(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function ze(e,t,n){if(e[t])return e[t];const[r,s]=N(n,{equals:!1,internal:!0});return r.$=s,e[t]=r}function ui(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===ne||t===Ee||(delete n.value,delete n.writable,n.get=()=>e[ne][t]),n}function dr(e){lt()&&ze(dt(e,Ee),ur)()}function fi(e){return dr(e),Reflect.ownKeys(e)}const di={get(e,t,n){if(t===ft)return e;if(t===ne)return n;if(t===Be)return dr(e),n;const r=dt(e,Ee),s=r[t];let i=s?s():e[t];if(t===Ee||t===ie||t==="__proto__")return i;if(!s){const a=Object.getOwnPropertyDescriptor(e,t);lt()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(i=ze(r,t,i)())}return je(i)?fr(i):i},has(e,t){return t===ft||t===ne||t===Be||t===Ee||t===ie||t==="__proto__"?!0:(lt()&&ze(dt(e,ie),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:fi,getOwnPropertyDescriptor:ui};function Ie(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],i=e.length;n===void 0?(delete e[t],e[ie]&&e[ie][t]&&s!==void 0&&e[ie][t].$()):(e[t]=n,e[ie]&&e[ie][t]&&s===void 0&&e[ie][t].$());let a=dt(e,Ee),l;if((l=ze(a,t,s))&&l.$(()=>n),Array.isArray(e)&&e.length!==i){for(let o=e.length;o<i;o++)(l=a[o])&&l.$();(l=ze(a,"length",i))&&l.$(e.length)}(l=a[ur])&&l.$()}function hr(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];Ie(e,s,t[s])}}function hi(e,t){if(typeof t=="function"&&(t=t(e)),t=Te(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const s=t[n];e[n]!==s&&Ie(e,n,s)}Ie(e,"length",r)}else hr(e,t)}function De(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const a=typeof r,l=Array.isArray(e);if(Array.isArray(r)){for(let o=0;o<r.length;o++)De(e,[r[o]].concat(t),n);return}else if(l&&a==="function"){for(let o=0;o<e.length;o++)r(e[o],o)&&De(e,[o].concat(t),n);return}else if(l&&a==="object"){const{from:o=0,to:c=e.length-1,by:f=1}=r;for(let u=o;u<=c;u+=f)De(e,[u].concat(t),n);return}else if(t.length>1){De(e[r],t,[r].concat(n));return}s=e[r],n=[r].concat(n)}let i=t[0];typeof i=="function"&&(i=i(s,n),i===s)||r===void 0&&i==null||(i=Te(i),r===void 0||je(s)&&je(i)&&!Array.isArray(i)?hr(s,i):Ie(e,r,i))}function gi(...[e,t]){const n=Te(e||{}),r=Array.isArray(n),s=fr(n);function i(...a){ae(()=>{r&&a.length===1?hi(n,a[0]):De(n,a)})}return[s,i]}const ht=new WeakMap,gr={get(e,t){if(t===ft)return e;const n=e[t];let r;return je(n)?ht.get(n)||(ht.set(n,r=new Proxy(n,gr)),r):n},set(e,t,n){return Ie(e,t,Te(n)),!0},deleteProperty(e,t){return Ie(e,t,void 0,!0),!0}};function Y(e){return t=>{if(je(t)){let n;(n=ht.get(t))||ht.set(t,n=new Proxy(t,gr)),e(n)}return t}}wt(async(e,t)=>(await t.saveSchema(e),{ok:!0}),"saveSchema");const kn=wt(async(e,t,n,r)=>(await r.saveItem(e,t,n),{ok:!0}),"saveItem"),xn=wt(async(e,t,n,r)=>(await r.deleteItem(e,t,n),{ok:!0}),"deleteItem");wt(async(e,t,n,r)=>(await r.deleteMedia(e,t,n),{ok:!0}),"deleteMedia");function mi(e){const{config:t,backend:n,auth:r,schemaPath:s="plasticine/config.ts"}=e;let i=null,a;const l=t.getCollections(),[o,c]=gi({authenticated:!1,user:null,authLoading:!1,authError:null,dataLoading:!1,dataError:null,collections:Object.fromEntries(l.map(d=>[d,{items:[],loading:!1,error:null}])),media:{files:[],loading:!1,error:null},schema:{content:"",sha:null,loading:!1,saving:!1,error:null},currentView:"collections",currentCollection:null,currentItem:null}),f=d=>{const g=t.getSchema(d);if(!g)return[];const p=en(g);return p?Object.entries(p).filter(([v,y])=>{const k=Le(y);return k.ui==="image"||k.ui==="file"}).map(([v])=>v):[]},u=d=>{const g=d.slug??d.id;return typeof g=="string"&&g?g:Date.now().toString()},h=async d=>{if(!i)throw new Error("Not authenticated");if(!t.getSchema(d))throw new Error(`Unknown collection: ${d}`);return(await i.content.listCollection(d)).map(v=>{const y=t.parseCollection(d,v.data);return{...v,filename:`${v.id}.json`,data:y}})},m={async handleAuthSuccess(d){a=d.token,i=n.createBackend(a),c(Y(g=>{g.authenticated=!0,g.user=d.user,g.authLoading=!1})),await m.loadAllData()},async logout(){await r.logout(),i=null,a=void 0,c(Y(d=>{d.authenticated=!1,d.user=null,d.dataLoading=!1,d.dataError=null;for(const g of l)d.collections[g]={items:[],loading:!1,error:null};d.media={files:[],loading:!1,error:null}}))},async loadAllData(){if(!i)throw new Error("Not authenticated");c("dataLoading",!0),c("dataError",null);try{const[d,g]=await Promise.all([Promise.all(l.map(async p=>({name:p,items:await h(p)}))),i.media.listMedia()]);c(Y(p=>{for(const{name:v,items:y}of d)p.collections[v].items=y;p.media.files=g,p.dataLoading=!1}))}catch(d){throw c(Y(g=>{g.dataLoading=!1,g.dataError=d instanceof Error?d.message:"Failed to load data"})),d}},async saveItem(d,g,p){if(!i)throw new Error("Not authenticated");if(!t.getSchema(d))throw new Error(`Unknown collection: ${d}`);const y=t.parseCollection(d,g),k=u(y),{sha:P}=await i.content.saveItem(d,k,y,p);c("collections",d,"items",Y(I=>{const M=I.findIndex(me=>me.id===k),le={id:k,filename:`${k}.json`,sha:P,data:y};M>=0?I[M]=le:I.push(le)}))},async deleteItem(d,g,p){if(!i)throw new Error("Not authenticated");await i.content.deleteItem(d,g,p),c("collections",d,"items",Y(v=>{const y=v.findIndex(k=>k.id===g);y>=0&&v.splice(y,1)}))},async uploadFile(d,g){if(!i)throw new Error("Not authenticated");const{url:p,sha:v}=await i.media.uploadFile(d,g),y=p.split("/").pop()||"";return c("media","files",Y(k=>{k.push({name:y,path:y,sha:v,size:d.size,url:p})})),p},getMediaReferences(d){const g=[];for(const p of l){const v=f(p),y=o.collections[p]?.items||[];for(const k of y)for(const P of v)k.data[P]===d&&g.push({collection:p,id:k.id,field:P})}return g},async deleteMedia(d,g,p){if(!i)throw new Error("Not authenticated");const v=m.getMediaReferences(d);for(const y of v){const k=o.collections[y.collection]?.items.find(I=>I.id===y.id);if(!k)continue;const P={...k.data,[y.field]:void 0};await m.saveItem(y.collection,P,k.sha)}await i.media.deleteFile(g,p),c("media","files",Y(y=>{const k=y.findIndex(P=>P.path===g);k>=0&&y.splice(k,1)}))},async loadSchema(){if(!i)throw new Error("Not authenticated");c("schema","loading",!0),c("schema","error",null);try{const{content:d,sha:g}=await i.config.readFile(s);c(Y(p=>{p.schema.content=d,p.schema.sha=g||null,p.schema.loading=!1}))}catch(d){throw c(Y(g=>{g.schema.loading=!1,g.schema.error=d instanceof Error?d.message:"Failed to load schema"})),d}},async saveSchema(d){if(!i)throw new Error("Not authenticated");c("schema","saving",!0),c("schema","error",null);try{const{sha:g}=await i.config.writeFile(s,d,o.schema.sha||void 0);c(Y(p=>{p.schema.content=d,p.schema.sha=g||null,p.schema.saving=!1}))}catch(g){throw c(Y(p=>{p.schema.saving=!1,p.schema.error=g instanceof Error?g.message:"Failed to save schema"})),g}},setCurrentView(d){c("currentView",d),(d==="media"||d==="schema")&&(c("currentCollection",null),c("currentItem",null)),d==="schema"&&!o.schema.content&&!o.schema.loading&&m.loadSchema()},setCurrentCollection(d){c("currentView","collections"),c("currentCollection",d),c("currentItem",null)},setCurrentItem(d){c("currentItem",d)}};return r.checkAuth().then(d=>{d&&m.handleAuthSuccess(d)}),[o,m]}const mr=Je();function pi(e){const t=mi({config:e.config,backend:e.backend,auth:e.auth,schemaPath:e.schemaPath});return b(mr.Provider,{value:t,get children(){return[" ",z(()=>e.children)," "]}})}function ge(){const e=Xe(mr);if(!e)throw new Error("useCMS must be used within a CMSProvider");return e}var yi=_("<form>");function U(e){const[t,n]=N(e);return{get value(){return t()},set value(r){n(()=>r)}}}function ee(e,t,n,r,s=!1){if(t.type==="object_with_rest"||t.type==="record"||t.type==="tuple_with_rest"||t.type==="promise")throw new Error(`"${t.type}" schema is not supported`);if(t.type==="lazy")ee(e,t.getter(void 0),n,r);else if(t.type==="exact_optional"||t.type==="nullable"||t.type==="nullish"||t.type==="optional"||t.type==="undefinedable")ee(e,t.wrapped,n===void 0?Qt(t):n,r,!0);else if(t.type==="non_nullable"||t.type==="non_nullish"||t.type==="non_optional")ee(e,t.wrapped,n,r);else if(t.type==="intersect"||t.type==="union"||t.type==="variant")for(const i of t.options)ee(e,i,n,r);else{e.schema=t,e.name=JSON.stringify(r);const i=[];if(e.initialElements=i,e.elements=i,e.errors=U(null),e.isTouched=U(!1),e.isDirty=U(!1),t.type==="array"||t.type==="loose_tuple"||t.type==="strict_tuple"||t.type==="tuple"){if(e.kind&&e.kind!=="array")throw new Error(`Store initialized as "${e.kind}" cannot be reinitialized as "array"`);if(e.kind="array",e.kind==="array"){if(e.children??=[],t.type==="array"){if(n)for(let o=0;o<n.length;o++)e.children[o]={},r.push(o),ee(e.children[o],t.item,n[o],r),r.pop()}else for(let o=0;o<t.items;o++)e.children[o]={},r.push(o),ee(e.children[o],t.items[o],n?.[o],r),r.pop();const a=s&&n==null?n:!0;e.initialInput=U(a),e.startInput=U(a),e.input=U(a);const l=e.children.map(yt);e.initialItems=U(l),e.startItems=U(l),e.items=U(l)}}else if(t.type==="loose_object"||t.type==="object"||t.type==="strict_object"){if(e.kind&&e.kind!=="object")throw new Error(`Store initialized as "${e.kind}" cannot be reinitialized as "object"`);if(e.kind="object",e.kind==="object"){e.children??={};for(const l in t.entries)e.children[l]={},r.push(l),ee(e.children[l],t.entries[l],n?.[l],r),r.pop();const a=s&&n==null?n:!0;e.initialInput=U(a),e.startInput=U(a),e.input=U(a)}}else e.kind="value",e.kind==="value"&&(e.initialInput=U(n),e.startInput=U(n),e.input=U(n))}}function gt(e,t){ae(()=>{T(()=>{if(t.elements=e.elements,t.errors.value=e.errors.value,t.startInput.value=e.startInput.value,t.input.value=e.input.value,t.isTouched.value=e.isTouched.value,t.isDirty.value=e.isDirty.value,e.kind==="array"&&t.kind==="array"){const n=e.items.value;t.startItems.value=e.startItems.value,t.items.value=n;let r;for(let s=0;s<n.length;s++)t.children[s]||(r??=JSON.parse(t.name),t.children[s]={},r.push(s),ee(t.children[s],t.schema.item,void 0,r),r.pop()),gt(e.children[s],t.children[s])}else if(e.kind==="object"&&t.kind==="object")for(const n in e.children)gt(e.children[n],t.children[n])})})}function qt(e,t){ae(()=>{if(e.elements=[],e.errors.value=null,e.isTouched.value=!1,e.isDirty.value=!1,e.kind==="array"||e.kind==="object"){const n=t==null?t:!0;if(e.startInput.value=n,e.input.value=n,e.kind==="array")if(t){const r=t.map(yt);e.startItems.value=r,e.items.value=r;for(let s=0;s<t.length;s++)e.children[s]&&qt(e.children[s],t[s])}else e.startItems.value=[],e.items.value=[];else for(const r in e.children)qt(e.children[r],t?.[r])}else e.startInput.value=t,e.input.value=t})}function He(e){if(e.kind==="array"){if(e.input.value){const t=[];for(let n=0;n<e.items.value.length;n++)t[n]=He(e.children[n]);return t}return e.input.value}if(e.kind==="object"){if(e.input.value){const t={};for(const n in e.children)t[n]=He(e.children[n]);return t}return e.input.value}return e.input.value}function bi(e,t){if(e.options&&e.multiple)return[...e.options].filter(n=>n.selected&&!n.disabled).map(n=>n.value);if(e.type==="checkbox"){const n=document.getElementsByName(e.name);return n.length>1?[...n].filter(r=>r.checked).map(r=>r.value):e.checked}return e.type==="radio"?e.checked?e.value:T(()=>He(t)):e.type==="file"?e.multiple?[...e.files]:e.files[0]:e.value}function Q(e,t){if(e[t].value)return!0;if(e.kind==="array"){for(let n=0;n<e.items.value.length;n++)if(Q(e.children[n],t))return!0;return!1}if(e.kind=="object"){for(const n in e.children)if(Q(e.children[n],t))return!0;return!1}return!1}function an(e,t){let n=e;for(const r of t)n=n.children[r];return n}function Gt(e,t,n){ae(()=>{if(e.kind==="array"){e[t].value=n;for(let r=0;r<T(()=>e.items.value).length;r++)Gt(e.children[r],t,n)}else if(e.kind=="object")for(const r in e.children)Gt(e.children[r],t,n);else e[t].value=n})}function zt(e,t){if(e.isTouched.value=!0,e.kind==="array"){const n=t??[],r=e.items.value;if(n.length<r.length)e.items.value=r.slice(0,n.length);else if(n.length>r.length){if(n.length>e.children.length){const s=JSON.parse(e.name);for(let i=e.children.length;i<n.length;i++)e.children[i]={},s.push(i),ee(e.children[i],e.schema.item,n[i],s),s.pop()}e.items.value=[...r,...n.slice(r.length).map(yt)]}for(let s=0;s<n.length;s++)zt(e.children[s],n[s]);e.input.value=t==null?t:!0,e.isDirty.value=e.startInput.value!==e.input.value||e.startItems.value.length!==r.length}else if(e.kind==="object"){for(const n in e.children)zt(e.children[n],t?.[n]);e.input.value=t==null?t:!0,e.isDirty.value=e.startInput.value!==e.input.value}else{e.input.value=t;const n=e.startInput.value;e.isDirty.value=n!==t&&(n!=null||t!==""&&!Number.isNaN(t))}}function wi(e,t,n){ae(()=>{T(()=>{let r=e;for(let s=0;s<t.length;s++)r=r.children[t[s]],s<t.length-1&&(r.input.value=!0);zt(r,n)})})}function Ht(e,t){if(t(e),e.kind==="array")for(let n=0;n<T(()=>e.items.value).length;n++)Ht(e.children[n],t);else if(e.kind==="object")for(const n in e.children)Ht(e.children[n],t)}function vi(e,t){const n={};return ee(n,e.schema,e.initialInput,[]),n.validators=0,n.validate=e.validate??"submit",n.revalidate=e.revalidate??"input",n.parse=t,n.isSubmitting=U(!1),n.isSubmitted=U(!1),n.isValidating=U(!1),n}async function ln(e,t){e.validators++,e.isValidating.value=!0;const n=await e.parse(T(()=>He(e)));let r,s;if(n.issues){s={};for(const a of n.issues)if(a.path){const l=[];for(const f of a.path){const u=f.key,h=typeof u,m=f.type;if(h!=="string"&&h!=="number"||m==="map"||m==="set")break;l.push(u)}const o=JSON.stringify(l),c=s[o];c?c.push(a.message):s[o]=[a.message]}else r?r.push(a.message):r=[a.message]}let i=t?.shouldFocus??!1;return ae(()=>{Ht(e,a=>{if(a.name==="[]")a.errors.value=r??null;else{const l=s?.[a.name]??null;a.errors.value=l,i&&l&&(a.elements[0]?.focus(),i=!1)}}),e.validators--,e.isValidating.value=e.validators>0}),n}function Ce(e,t,n){n===(e.validate==="initial"||(e.validate==="submit"?T(()=>e.isSubmitted.value):T(()=>Q(t,"errors")))?e.revalidate:e.validate)&&ln(e)}var fe="~internal";function $i(e,t){return async n=>{n.preventDefault();const r=e[fe];r.isSubmitted.value=!0,r.isSubmitting.value=!0;try{const s=await ln(r,{shouldFocus:!0});s.success&&await t(s.output,n)}catch(s){r.errors.value=[s&&typeof s=="object"&&"message"in s&&typeof s.message=="string"?s.message:"An unknown error has occurred."]}finally{r.isSubmitting.value=!1}}}function _i(e,t){const n=e[fe];let r=n;for(let l=0;l<t.path.length;l++)r=r.children[t.path[l]],l<t.path.length-1&&(r.input.value=!0);const s=r,i=T(()=>s.items.value),a=t.at===void 0?i.length:t.at;a>=0&&a<=i.length&&ae(()=>{const l=[...i];l.splice(a,0,yt()),s.items.value=l;for(let o=i.length;o>a;o--)gt(s.children[o-1],s.children[o]);if(s.children[a])qt(s.children[a],t.initialInput);else{const o=JSON.parse(s.name);s.children[a]={},o.push(a),ee(s.children[a],s.schema.item,t.initialInput,o)}s.input.value=!0,s.isTouched.value=!0,s.isDirty.value=!0,Ce(n,s,"input")})}function ki(e,t){const n=e[fe],r=an(n,t.path),s=T(()=>r.items.value);t.at>=0&&t.at<=s.length-1&&ae(()=>{const i=[...s];i.splice(t.at,1),r.items.value=i;for(let a=t.at;a<s.length-1;a++)gt(r.children[a+1],r.children[a]);r.isTouched.value=!0,r.isDirty.value=r.startItems.value.join()!==i.join(),Ce(n,r,"input")})}function xi(e){const t=vi(e,a=>ms(e.schema,a)),n=x(()=>Q(t,"isTouched")),r=x(()=>Q(t,"isDirty")),s=x(()=>!Q(t,"errors")),i={[fe]:t,get isSubmitting(){return t.isSubmitting.value},get isSubmitted(){return t.isSubmitted.value},get isValidating(){return t.isValidating.value},get isTouched(){return n()},get isDirty(){return r()},get isValid(){return s()},get errors(){return t.errors.value}};return e.validate==="initial"&&ln(i[fe]),i}function Ue(e){return typeof e=="function"?e():e}function Ai(e,t){const n=x(()=>Ue(t).path),r=x(()=>Ue(e)[fe]),s=x(()=>an(r(),n())),i=x(()=>He(s())),a=x(()=>Q(s(),"isTouched")),l=x(()=>Q(s(),"isDirty")),o=x(()=>!Q(s(),"errors"));return{get path(){return n()},get input(){return i()},get errors(){return s().errors.value},get isTouched(){return a()},get isDirty(){return l()},get isValid(){return o()},props:{get name(){return s().name},autofocus:!!s().errors.value,ref:c=>{const f=s();f.elements.push(c),de(()=>{f.elements=f.elements.filter(u=>u!==c)})},onFocus(){Gt(s(),"isTouched",!0),Ce(r(),s(),"touch")},onInput(c){const f=s();wi(r(),n(),bi(c.currentTarget,f)),Ce(r(),f,"input")},onChange(){Ce(r(),s(),"change")},onBlur(){Ce(r(),s(),"blur")}}}}function Pi(e,t){const n=x(()=>an(Ue(e)[fe],Ue(t).path)),r=x(()=>Q(n(),"isTouched")),s=x(()=>Q(n(),"isDirty")),i=x(()=>!Q(n(),"errors"));return{get path(){return Ue(t).path},get items(){return n().items.value},get errors(){return n().errors.value},get isTouched(){return r()},get isDirty(){return s()},get isValid(){return i()}}}function Ci(e){const t=Ai(()=>e.of,()=>({path:e.path}));return z(()=>e.children(t))}function Ei(e){const t=Pi(()=>e.of,()=>({path:e.path}));return z(()=>e.children(t))}function Si(e){const[,t]=Rn(e,["of","onSubmit"]);return(()=>{var n=yi();return Zt(r=>{e.of[fe].element=r},n),X(n,J(t,{novalidate:!0,onSubmit:r=>$i(e.of,e.onSubmit)(r)}),!1,!1),n})()}var Oi=_("<input type=text class=input>"),ji=_('<textarea class="input textarea">'),Ti=_('<textarea class="input textarea markdown-editor">'),Ii=_("<input type=number class=input>"),Li=_("<span class=checkbox-description>"),Ni=_("<label class=checkbox-label><input type=checkbox class=checkbox>"),Di=_("<input type=date class=input>"),Ri=_("<input type=datetime-local class=input>"),Mi=_('<input type=text class="input slug-input">'),Ui=_("<img alt=Preview class=image-preview>"),Bi=_('<div class=image-input><div class=image-input-row><input type=url class=input><label class="btn btn-secondary upload-btn"><input type=file>'),Vi=_('<select class="input select"><option value>Select...'),pr=_("<option>"),Ki=_('<select class="input select"><option value>Select <!>...'),qi=_('<div class="field object-field"><label class=field-label></label><div class=object-field-entries>'),Gi=_('<div class=array-field-empty>No items yet. Click "Add" to create one.'),zi=_('<div class="field array-field"><div class=array-field-header><label class=field-label></label><button type=button class="btn btn-small btn-secondary">+ Add</button></div><div class=array-field-items>'),Hi=_('<div class=array-field-item><div class=array-field-item-content></div><button type=button class="btn btn-small btn-danger array-field-remove">'),Wi=_("<span class=field-error>"),Ji=_("<div class=field><label class=field-label>");function Xi(e){return"type"in e&&e.type==="array"&&"item"in e}function Yi(e){return Le(e).ui?!1:"type"in e&&e.type==="object"&&"entries"in e}function Zi(e){const t=Le(e);if(t.ui)return t.ui;if("type"in e)switch(e.type){case"string":return"text";case"number":return"number";case"boolean":return"boolean";default:return"text"}return"text"}function Fi(e,t){const n=Le(e);if(n.label)return n.label;const r=t[t.length-1];return String(r).replace(/([A-Z])/g," $1").replace(/^./,s=>s.toUpperCase()).trim()}function yr(e){if("type"in e)switch(e.type){case"string":return"";case"number":return 0;case"boolean":return!1;case"array":return[];case"object":if("entries"in e&&typeof e.entries=="object"){const t=e.entries;return Object.fromEntries(Object.entries(t).map(([n,r])=>[n,yr(r)]))}return{};default:return}}const Qi=e=>(()=>{var t=Oi();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""},get placeholder(){return e.metadata.placeholder}}),!1,!1),t})(),ea=e=>(()=>{var t=ji();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""},get placeholder(){return e.metadata.placeholder},rows:5}),!1,!1),t})(),ta=e=>(()=>{var t=Ti();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""},get placeholder(){return e.metadata.placeholder||"Write markdown..."},rows:10}),!1,!1),t})(),na=e=>(()=>{var t=Ii();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""},get min(){return e.metadata.min},get max(){return e.metadata.max},get step(){return e.metadata.step}}),!1,!1),t})(),ra=e=>(()=>{var t=Ni(),n=t.firstChild;return X(n,J(()=>e.field.props,{get checked(){return e.field.input??!1}}),!1,!1),w(t,b(j,{get when(){return e.metadata.description},get children(){var r=Li();return w(r,()=>e.metadata.description),r}}),null),t})(),sa=e=>(()=>{var t=Di();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""}}),!1,!1),t})(),ia=e=>(()=>{var t=Ri();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""}}),!1,!1),t})(),aa=e=>(()=>{var t=Mi();return X(t,J(()=>e.field.props,{get value(){return e.field.input??""},get placeholder(){return e.metadata.placeholder||"my-slug"},pattern:"^[a-z0-9]+(?:-[a-z0-9]+)*$"}),!1,!1),t})(),An=e=>{const[,t]=ge(),[n,r]=N(!1);let s;const i=()=>e.field.input,a=()=>e.metadata.accept||"image/*",l=()=>e.metadata.path,o=async c=>{const u=c.target.files?.[0];if(u){r(!0);try{const h=await t.uploadFile(u,l());s&&(s.value=h,s.dispatchEvent(new Event("input",{bubbles:!0})))}catch(h){console.error("Upload failed:",h),alert("Upload failed: "+(h instanceof Error?h.message:"Unknown error"))}finally{r(!1)}}};return(()=>{var c=Bi(),f=c.firstChild,u=f.firstChild,h=u.nextSibling,m=h.firstChild,d=s;return typeof d=="function"?Zt(d,u):s=u,X(u,J(()=>e.field.props,{get value(){return i()??""},placeholder:"https://example.com/image.jpg"}),!1,!1),w(h,()=>n()?"...":"Upload",m),m.addEventListener("change",o),Xr(m,"display","none"),w(c,b(j,{get when(){return i()},get children(){var g=Ui();return R(()=>K(g,"src",i())),g}}),null),R(g=>{var p=a(),v=n();return p!==g.e&&K(m,"accept",g.e=p),v!==g.t&&(m.disabled=g.t=v),g},{e:void 0,t:void 0}),c})()},la=e=>{const t=()=>e.metadata.options||[];return(()=>{var n=Vi();return n.firstChild,X(n,J(()=>e.field.props,{get value(){return e.field.input??""}}),!1,!0),w(n,b(ue,{get each(){return t()},children:r=>(()=>{var s=pr();return s.value=r,w(s,r),s})()}),null),n})()},oa=e=>{const[t]=ge(),n=()=>e.metadata.collection,r=()=>t.collections[n()]?.items||[];return(()=>{var s=Ki(),i=s.firstChild,a=i.firstChild,l=a.nextSibling;return l.nextSibling,X(s,J(()=>e.field.props,{get value(){return e.field.input??""}}),!1,!0),w(i,n,l),w(s,b(ue,{get each(){return r()},children:o=>(()=>{var c=pr();return w(c,()=>o.data.name||o.data.title||o.id),R(()=>c.value=o.id),c})()}),null),s})()},ca={text:Qi,textarea:ea,markdown:ta,number:na,boolean:ra,date:sa,datetime:ia,slug:aa,image:An,file:An,select:la,reference:oa};function ua(e){return(()=>{var t=qi(),n=t.firstChild,r=n.nextSibling;return w(n,()=>e.label),w(r,b(ue,{get each(){return Object.entries(e.entries)},children:([s,i])=>b(on,{get form(){return e.form},get path(){return[...e.path,s]},schema:i})})),t})()}function fa(e){const t=()=>{_i(e.form,{path:e.path,initialInput:yr(e.itemSchema)})},n=r=>{ki(e.form,{path:e.path,at:r})};return b(Ei,{get of(){return e.form},get path(){return e.path},children:r=>(()=>{var s=zi(),i=s.firstChild,a=i.firstChild,l=a.nextSibling,o=i.nextSibling;return w(a,()=>e.label),l.$$click=t,w(o,b(Tr,{get each(){return r.items},children:(c,f)=>(()=>{var u=Hi(),h=u.firstChild,m=h.nextSibling;return w(h,b(on,{get form(){return e.form},get path(){return[...e.path,f]},get schema(){return e.itemSchema},get label(){return`${e.label} ${f+1}`}})),m.$$click=()=>n(f),u})()})),w(s,b(j,{get when(){return r.items.length===0},get children(){return Gi()}}),null),s})()})}function on(e){const t=()=>Zi(e.schema),n=()=>e.label||Fi(e.schema,e.path),r=()=>Le(e.schema);return b(Un,{get fallback(){return b(Ci,{get of(){return e.form},get path(){return e.path},children:s=>(()=>{var i=Ji(),a=i.firstChild;return w(a,n),w(i,b(ss,{get component(){return ca[t()]},field:s,get metadata(){return r()}}),null),w(i,b(j,{get when(){return s.errors?.[0]},get children(){var l=Wi();return w(l,()=>s.errors[0]),l}}),null),i})()})},get children(){return[b(ut,{get when(){return Xi(e.schema)},get children(){return b(fa,{get form(){return e.form},get path(){return e.path},get itemSchema(){return e.schema.item},get label(){return n()},get metadata(){return r()}})}}),b(ut,{get when(){return Yi(e.schema)},get children(){return b(ua,{get form(){return e.form},get path(){return e.path},get entries(){return e.schema.entries},get label(){return n()}})}})]}})}he(["click"]);var da=_("<div class=form-fields>"),ha=_("<div class=form-error>"),ga=_('<button type=button class="btn btn-secondary">Cancel'),ma=_('<div class=form-actions><button type=submit class="btn btn-primary">');function pa(e){const t=xi({schema:e.schema,values:e.initialData}),n=()=>en(e.schema);return b(Si,{of:t,onSubmit:async s=>{await e.onSubmit(s)},class:"schema-form",get children(){return[(()=>{var s=da();return w(s,b(ue,{get each(){return Object.entries(n()||{})},children:([i,a])=>b(on,{form:t,path:[i],schema:a})})),s})(),b(j,{get when(){return e.error},get children(){var s=ha();return w(s,()=>e.error),s}}),(()=>{var s=ma(),i=s.firstChild;return w(s,b(j,{get when(){return e.onCancel},get children(){var a=ga();return Vn(a,"click",e.onCancel,!0),R(()=>a.disabled=e.pending),a}}),i),w(i,(()=>{var a=z(()=>!!e.pending);return()=>a()?"Saving...":e.submitLabel||"Save"})()),R(()=>i.disabled=e.pending),s})()]}})}he(["click"]);var ya=_("<div class=editor><div class=editor-header><h2 class=editor-title>");function ba(e){const[t,n]=ge(),[,r]=sn(),s=lr(kn),i=ar(kn),a=()=>e.itemId==="__new__",l=()=>e.collectionKey.charAt(0).toUpperCase()+e.collectionKey.slice(1),o=()=>a()?void 0:t.collections[e.collectionKey]?.items.find(h=>h.id===e.itemId),c=async u=>{const h=o()?.sha;if(await s(e.collectionKey,u,h,n),a()){const m=u.slug??u.id;m&&r({item:m},{replace:!0})}},f=()=>{r({item:null})};return(()=>{var u=ya(),h=u.firstChild,m=h.firstChild;return w(m,(()=>{var d=z(()=>!!a());return()=>d()?`New ${l()}`:`Edit ${l()}`})()),w(u,b(j,{get when(){return z(()=>!!a())()?e.itemId:o()},keyed:!0,children:d=>b(pa,{get schema(){return e.schema},get initialData(){return z(()=>!!a())()?void 0:d.data},onSubmit:c,onCancel:f,get submitLabel(){return a()?"Create":"Save"},get pending(){return i.pending},get error(){return z(()=>!!i.error)()?String(i.error):void 0}})}),null),u})()}var wa=_("<a>");const Pn=["view","collection","item"];function Se(e){const[t]=sn(),n=()=>{const s=new URLSearchParams;for(const a of Pn)e.params[a]&&s.set(a,e.params[a]);const i=s.toString();return i?`?${i}`:"?"},r=()=>Pn.every(s=>{const i=e.params[s];return i===void 0?!t[s]:t[s]===i});return(()=>{var s=wa();return w(s,()=>e.children),R(i=>{var a=n(),l=`${e.class||""} ${r()&&e.activeClass?e.activeClass:""}`;return a!==i.e&&K(s,"href",i.e=a),l!==i.t&&Bn(s,i.t=l),i},{e:void 0,t:void 0}),s})()}var va=_("<div class=item-list-loading>Loading..."),$a=_("<div class=item-list-error>"),_a=_("<div class=item-list-empty>No items yet. Create your first one!"),ka=_("<div class=item-list><div class=item-list-header><h2 class=item-list-title></h2></div><ul class=item-list-items>"),xa=_("<span class=item-title>"),Aa=_("<span class=item-id>"),Pa=_('<li class=item-list-item><button class="btn btn-danger btn-small">');function Ca(e){const[t,n]=ge(),r=lr(xn),s=ar(xn),i=()=>t.collections[e.collectionKey],a=()=>i()?.items||[],l=()=>e.collectionKey.charAt(0).toUpperCase()+e.collectionKey.slice(1),o=u=>u.title||u.name||u.slug||"Untitled",c=(u,h)=>{confirm("Are you sure you want to delete this item?")&&r(e.collectionKey,u,h,n)},f=u=>{if(!s.pending)return!1;const h=s.input;return Array.isArray(h)&&h[1]===u};return(()=>{var u=ka(),h=u.firstChild,m=h.firstChild,d=h.nextSibling;return w(m,l),w(h,b(Se,{get params(){return{collection:e.collectionKey,item:"__new__"}},class:"btn btn-primary",children:"+ New"}),null),w(u,b(j,{get when(){return i()?.loading},get children(){return va()}}),d),w(u,b(j,{get when(){return i()?.error},get children(){var g=$a();return w(g,()=>i()?.error),g}}),d),w(u,b(j,{get when(){return z(()=>!i()?.loading)()&&a().length===0},get children(){return _a()}}),d),w(d,b(ue,{get each(){return a()},children:g=>(()=>{var p=Pa(),v=p.firstChild;return w(p,b(Se,{get params(){return{collection:e.collectionKey,item:g.id}},class:"item-info",activeClass:"active",get children(){return[(()=>{var y=xa();return w(y,()=>o(g.data)),y})(),(()=>{var y=Aa();return w(y,()=>g.id),y})()]}}),v),v.$$click=y=>{y.stopPropagation(),c(g.id,g.sha)},w(v,()=>f(g.id)?"...":"Delete"),R(()=>v.disabled=f(g.id)),p})()})),u})()}he(["click"]);var Ea=_("<div class=media-library-loading>Loading media..."),Sa=_("<div class=media-library-error>"),Oa=_("<div class=media-library-empty>No media files yet. Upload files through content fields."),ja=_("<div class=media-library><div class=media-library-header><h2 class=media-library-title>Media Library</h2></div><div class=media-grid>"),Ta=_("<img loading=lazy>",!0,!1,!1),Ia=_('<div class=media-item><div class=media-preview></div><div class=media-info><span class=media-name></span><span class=media-meta></span></div><button class="media-delete btn btn-danger btn-small"title="Delete file">'),La=_("<div class=media-file-icon><span class=media-file-ext>");function Na(){const[e,t]=ge(),[n,r]=N(null),s=l=>/\.(jpg|jpeg|png|gif|webp|svg|ico)$/i.test(l),i=l=>l<1024?`${l} B`:l<1024*1024?`${(l/1024).toFixed(1)} KB`:`${(l/(1024*1024)).toFixed(1)} MB`,a=async l=>{const c=t.getMediaReferences(l.url).length,f=c>0?`This will delete the file and remove ${c} reference${c>1?"s":""} from your content. Continue?`:"Delete this file?";if(confirm(f)){r(l.path);try{await t.deleteMedia(l.url,l.path,l.sha)}finally{r(null)}}};return(()=>{var l=ja(),o=l.firstChild,c=o.nextSibling;return w(l,b(j,{get when(){return e.media.loading},get children(){return Ea()}}),c),w(l,b(j,{get when(){return e.media.error},get children(){var f=Sa();return w(f,()=>e.media.error),f}}),c),w(l,b(j,{get when(){return z(()=>!e.media.loading)()&&e.media.files.length===0},get children(){return Oa()}}),c),w(c,b(ue,{get each(){return e.media.files},children:f=>{const u=()=>t.getMediaReferences(f.url);return(()=>{var h=Ia(),m=h.firstChild,d=m.nextSibling,g=d.firstChild,p=g.nextSibling,v=d.nextSibling;return w(m,b(j,{get when(){return s(f.name)},get fallback(){return(()=>{var y=La(),k=y.firstChild;return w(k,()=>f.name.split(".").pop()?.toUpperCase()),y})()},get children(){var y=Ta();return R(k=>{var P=f.url,I=f.name;return P!==k.e&&K(y,"src",k.e=P),I!==k.t&&K(y,"alt",k.t=I),k},{e:void 0,t:void 0}),y}})),w(g,()=>f.name),w(p,()=>i(f.size),null),w(p,b(j,{get when(){return u().length>0},get children(){return["  ",z(()=>u().length)," ref",z(()=>u().length>1?"s":"")]}}),null),v.$$click=()=>a(f),w(v,()=>n()===f.path?"...":""),R(y=>{var k=n()===f.path,P=f.name,I=n()===f.path;return k!==y.e&&h.classList.toggle("deleting",y.e=k),P!==y.t&&K(g,"title",y.t=P),I!==y.a&&(v.disabled=y.a=I),y},{e:void 0,t:void 0,a:void 0}),h})()}})),l})()}he(["click"]);var Da=_("<div class=cms-welcome><h2>Welcome to Plasticine</h2><p>Select a collection from the sidebar to get started."),Ra=_("<div>Collection not found"),Ma=_("<span class=media-nav-name>Library"),Ua=_("<span class=media-nav-count>"),Ba=_("<span class=schema-nav-name>Schema"),Va=_("<aside class=cms-sidebar><nav class=collection-list><h2 class=collection-list-title>Collections</h2><ul class=collection-list-items></ul></nav><nav class=media-nav><h2 class=media-nav-title>Media</h2><ul class=media-nav-items></ul></nav><nav class=schema-nav><h2 class=schema-nav-title>Settings</h2><ul class=schema-nav-items>"),Ka=_("<span class=collection-name>"),qa=_("<span class=collection-count>"),Ga=_('<div class=cms-user><img class=cms-avatar><span class=cms-username></span><button class="btn btn-small">Logout'),za=_("<div class=cms-layout><header class=cms-header></header><div class=cms-body><main class=cms-main>"),Ha=_("<div class=cms-loading><div class=cms-loading-content><h2>Loading...</h2><p>Fetching your content");function Wa(){return Da()}function Ja(e){const[t]=sn();return b(Un,{get fallback(){return b(Wa,{})},get children(){return[b(ut,{get when(){return t.view==="media"},get children(){return b(Na,{})}}),b(ut,{get when(){return t.collection},children:n=>b(j,{get when(){return t.item},get fallback(){return b(Ca,{get collectionKey(){return t.collection}})},children:r=>b(j,{get when(){return e.config.getSchema(n())},get fallback(){return Ra()},children:s=>b(ba,{get schema(){return s()},get collectionKey(){return n()},get itemId(){return r()}})})})})]}})}function Xa(e){const[t]=ge(),n=r=>r.charAt(0).toUpperCase()+r.slice(1);return(()=>{var r=Va(),s=r.firstChild,i=s.firstChild,a=i.nextSibling,l=s.nextSibling,o=l.firstChild,c=o.nextSibling,f=l.nextSibling,u=f.firstChild,h=u.nextSibling;return w(a,()=>e.config.getCollections().map(m=>b(Se,{params:{collection:m},class:"collection-list-item",activeClass:"active",get children(){return[(()=>{var d=Ka();return w(d,()=>n(m)),d})(),(()=>{var d=qa();return w(d,()=>t.collections[m]?.items.length||0),d})()]}}))),w(c,b(Se,{params:{view:"media"},class:"media-nav-item",activeClass:"active",get children(){return[Ma(),(()=>{var m=Ua();return w(m,()=>t.media.files.length),m})()]}})),w(h,b(Se,{params:{view:"schema"},class:"schema-nav-item",activeClass:"active",get children(){return Ba()}})),r})()}function Ya(e){const[t,n]=ge();return(()=>{var r=za(),s=r.firstChild,i=s.nextSibling,a=i.firstChild;return w(s,b(Se,{params:{},class:"cms-logo",children:"Plasticine"}),null),w(s,b(j,{get when(){return t.user},get children(){var l=Ga(),o=l.firstChild,c=o.nextSibling,f=c.nextSibling;return w(c,()=>t.user.login),f.$$click=()=>n.logout(),R(u=>{var h=t.user.avatar_url,m=t.user.login;return h!==u.e&&K(o,"src",u.e=h),m!==u.t&&K(o,"alt",u.t=m),u},{e:void 0,t:void 0}),l}}),null),w(i,b(Xa,{get config(){return e.config}}),a),w(a,b(Ja,{get config(){return e.config}})),r})()}function Za(e){const[t,n]=ge();return b(j,{get when(){return t.authenticated},get fallback(){return b(e.auth.LoginScreen,{get onSuccess(){return n.handleAuthSuccess}})},get children(){return b(j,{get when(){return!t.dataLoading},get fallback(){return Ha()},get children(){return b(Ya,{get config(){return e.config}})}})}})}function Cn(e){return b(pi,{get config(){return e.config},get backend(){return e.backend},get auth(){return e.auth},get schemaPath(){return e.schemaPath},get children(){return b(Za,{get config(){return e.config},get auth(){return e.auth}})}})}function Fa(e){try{return rn(),b(Cn,e)}catch{return b(cr,{get children(){return b(Bt,{path:"*",component:()=>b(Cn,e)})}})}}he(["click"]);const br=is({authors:Ct(pe({slug:rt({label:"Slug"}),name:Ae({label:"Name",placeholder:"John Doe"}),bio:ye(ps({label:"Bio",placeholder:"A short bio..."})),avatar:ye(Pt({label:"Avatar",path:"avatars"}))})),posts:Ct(pe({slug:rt({label:"Slug"}),title:Ae({label:"Title",placeholder:"My awesome post"}),content:At({label:"Content"})})).version(pe({slug:rt({label:"Slug"}),title:Ae({label:"Title",placeholder:"My awesome post"}),cover:ye(Pt({label:"Cover Image",path:"covers"})),content:At({label:"Content"}),author:ye(vs("authors",{label:"Author"})),draft:ys({label:"Draft",description:"Keep this post as draft"}),publishedAt:ye(bs({label:"Published Date"})),images:Rt(pe({src:Pt({label:"Image",path:"posts"}),alt:ye(Ae({label:"Alt Text"})),tags:Rt(pe({name:Ae({label:"Tag Name"})}))}))}),e=>({...e,cover:void 0,author:void 0,draft:!0,publishedAt:void 0,images:[]})),pages:Ct(pe({slug:rt({label:"Slug"}),title:Ae({label:"Title"}),content:At({label:"Content"}),template:ws(["default","landing","contact"],{label:"Template"})}))});var Qa=_("<img alt class=post-cover>"),el=_("<img alt class=author-avatar>"),tl=_("<div class=post-author><span>"),nl=_("<time class=post-date>"),rl=_("<article class=post-card><div class=post-content><h2 class=post-title></h2><div class=post-excerpt>..."),sl=_("<img alt class=author-avatar-large>"),il=_("<p>"),al=_("<div class=author-card><h3>"),ll=_("<div class=posts-grid>"),ol=_("<div class=authors-grid>"),cl=_("<div class=app><header class=header><h1>My Blog</h1><nav><a href=#posts>Posts</a><a href=#authors>Authors</a></nav></header><main><section id=posts class=section><h2>Latest Posts</h2></section><section id=authors class=section><h2>Authors</h2></section></main><footer class=footer><p>Powered by Plasticine CMS"),ul=_("<p>Loading posts..."),fl=_("<p>No posts yet."),dl=_("<p>Loading authors..."),hl=_("<p>No authors yet.");const En=ks(br,{owner:"bigmistqke",repo:"plasticine-cms",branch:"main",contentPath:"demo/demo1/content"});function gl(e){const t=()=>e.authors.find(n=>n.slug===e.post.author);return(()=>{var n=rl(),r=n.firstChild,s=r.firstChild,i=s.nextSibling,a=i.firstChild;return w(n,b(j,{get when(){return e.post.cover},get children(){var l=Qa();return R(()=>K(l,"src",e.post.cover)),l}}),r),w(s,()=>e.post.title),w(r,b(j,{get when(){return t()},get children(){var l=tl(),o=l.firstChild;return w(l,b(j,{get when(){return t().avatar},get children(){var c=el();return R(()=>K(c,"src",t().avatar)),c}}),o),w(o,()=>t().name),l}}),i),w(r,b(j,{get when(){return e.post.publishedAt},get children(){var l=nl();return w(l,()=>new Date(e.post.publishedAt).toLocaleDateString()),l}}),i),w(i,()=>e.post.content.slice(0,200),a),n})()}function ml(e){return(()=>{var t=al(),n=t.firstChild;return w(t,b(j,{get when(){return e.author.avatar},get children(){var r=sl();return R(()=>K(r,"src",e.author.avatar)),r}}),n),w(n,()=>e.author.name),w(t,b(j,{get when(){return e.author.bio},get children(){var r=il();return w(r,()=>e.author.bio),r}}),null),t})()}function pl(){const[e]=dn(()=>En.posts.getAll()),[t]=dn(()=>En.authors.getAll()),n=()=>(e()||[]).map(s=>s.data).filter(s=>!s.draft).sort((s,i)=>!s.publishedAt||!i.publishedAt?0:new Date(i.publishedAt).getTime()-new Date(s.publishedAt).getTime()),r=()=>(t()||[]).map(s=>s.data);return(()=>{var s=cl(),i=s.firstChild,a=i.nextSibling,l=a.firstChild;l.firstChild;var o=l.nextSibling;return o.firstChild,w(l,b(mn,{get fallback(){return ul()},get children(){return b(j,{get when(){return n().length>0},get fallback(){return fl()},get children(){var c=ll();return w(c,b(ue,{get each(){return n()},children:f=>b(gl,{post:f,get authors(){return r()}})})),c}})}}),null),w(o,b(mn,{get fallback(){return dl()},get children(){return b(j,{get when(){return r().length>0},get fallback(){return hl()},get children(){var c=ol();return w(c,b(ue,{get each(){return r()},children:f=>b(ml,{author:f})})),c}})}}),null),s})()}const yl=As({owner:"bigmistqke",repo:"plasticine-cms",branch:"main",contentPath:"demo/demo1/content"}),bl=Ss(),wl=document.getElementById("root");Gr(()=>b(cr,{base:"plasticine-cms",get children(){return[b(Bt,{path:"/*",component:pl}),b(Bt,{path:"/admin/*",component:()=>b(Fa,{config:br,backend:yl,auth:bl,get schemaPath(){return"demo/demo1/config.ts"}})})]}}),wl);
